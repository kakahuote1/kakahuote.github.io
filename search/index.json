[{"content":"åƒè±†äºº è¿ä¸Šç¯å¢ƒåf12,å‘ç°è„šæœ¬game.js:\nfunction startGame() { document.getElementById(\u0026#34;start-screen\u0026#34;).style.display = \u0026#34;none\u0026#34;; document.getElementById(\u0026#34;game\u0026#34;).style.display = \u0026#34;block\u0026#34;; initGame(); } const canvas = document.getElementById(\u0026#34;game\u0026#34;); const ctx = canvas.getContext(\u0026#34;2d\u0026#34;); const box = 20; let people, balls, score, dx, dy, isGameOver, game; let redBallCount, blueBallCount; let hasGotFlag = false; function initGame() { people = [{ x: 200, y: 200 }]; dx = box; dy = 0; score = 0; isGameOver = false; hasGotFlag = false; redBallCount = 1000; blueBallCount = 1; balls = []; spawnBalls(); if (game) clearInterval(game); game = setInterval(draw, 150); } document.addEventListener(\u0026#34;keydown\u0026#34;, dir); function dir(e) { if (e.key === \u0026#34;ArrowUp\u0026#34; \u0026amp;\u0026amp; dy === 0) { dx = 0; dy = -box; } else if (e.key === \u0026#34;ArrowDown\u0026#34; \u0026amp;\u0026amp; dy === 0) { dx = 0; dy = box; } else if (e.key === \u0026#34;ArrowLeft\u0026#34; \u0026amp;\u0026amp; dx === 0) { dx = -box; dy = 0; } else if (e.key === \u0026#34;ArrowRight\u0026#34; \u0026amp;\u0026amp; dx === 0) { dx = box; dy = 0; } else if (e.key === \u0026#34; \u0026#34;) { // ç©ºæ ¼é‡å¼€ initGame(); } } function draw() { if (isGameOver) return; ctx.clearRect(0, 0, 400, 400); ctx.strokeStyle = \u0026#34;white\u0026#34;; ctx.lineWidth = 2; ctx.strokeRect(0, 0, 400, 400); // ren ctx.fillStyle = \u0026#34;lime\u0026#34;; ctx.fillRect(people[0].x, people[0].y, box, box); // ç”»çƒ balls.forEach(ball =\u0026gt; { ctx.fillStyle = ball.color; ctx.beginPath(); ctx.arc(ball.x + box / 2, ball.y + box / 2, box / 2 - 2, 0, Math.PI * 2); ctx.fill(); }); // äººç§»åŠ¨ let head = { x: people[0].x + dx, y: people[0].y + dy }; // ç¢°æ’åˆ¤æ–­ if (head.x \u0026lt; 0 || head.x \u0026gt;= 400 || head.y \u0026lt; 0 || head.y \u0026gt;= 400) { gameOver(); return; } // åƒçƒé€»è¾‘ let ateIndex = balls.findIndex(b =\u0026gt; b.x === head.x \u0026amp;\u0026amp; b.y === head.y); if (ateIndex !== -1) { const eaten = balls[ateIndex]; if (eaten.color === \u0026#34;red\u0026#34;) { score += 1; redBallCount--; } else if (eaten.color === \u0026#34;blue\u0026#34;) { score = score * 5; blueBallCount--; } balls.splice(ateIndex, 1); } people[0] = head; // èƒœåˆ©æ£€æµ‹ if (score \u0026gt;= 5000 \u0026amp;\u0026amp; !hasGotFlag) { fetch(\u0026#39;/submit_score\u0026#39;, { method: \u0026#34;POST\u0026#34;, headers: { \u0026#34;Content-Type\u0026#34;: \u0026#34;application/json\u0026#34; }, body: JSON.stringify({ score: score }) }) .then(response =\u0026gt; response.json()) .then(data =\u0026gt; { if (data.flag) { alert(\u0026#34;ğŸ‰ æ­å–œï¼ä½ çš„flagæ˜¯ï¼š\u0026#34; + data.flag); } else { alert(\u0026#34;æœªè¾¾åˆ°æŒ‡å®šåˆ†æ•°ï¼\u0026#34;); } }); hasGotFlag = true; } // çƒåƒå…‰äº† if (balls.length === 0) { if (redBallCount === 0 \u0026amp;\u0026amp; blueBallCount === 0) { if (score \u0026gt;= 5000) { alert(\u0026#34;ä½ èµ¢äº†ï¼\u0026#34;); } else { alert(\u0026#34;çƒå…¨åƒå®Œäº†ï¼Œä½†åˆ†æ•°ä¸è¶³ï¼Œæ¸¸æˆå¤±è´¥ï¼\u0026#34;); } isGameOver = true; return; } else { spawnBalls(); } } if ( redBallCount \u0026gt; 0 \u0026amp;\u0026amp; balls.every(b =\u0026gt; b.color !== \u0026#34;red\u0026#34;) \u0026amp;\u0026amp; balls.length \u0026gt; 0 ) { spawnBalls(); } ctx.fillStyle = \u0026#34;white\u0026#34;; ctx.fillText(\u0026#34;Score: \u0026#34; + score, 10, 20); ctx.fillText(\u0026#34;Red left: \u0026#34; + redBallCount, 10, 40); ctx.fillText(\u0026#34;Blue left: \u0026#34; + blueBallCount, 10, 60); } function spawnBalls() { let num = Math.floor(Math.random() * 5) + 1; // å³ä½¿çº¢çƒæˆ–è“çƒåº“å­˜ä¸º 0ï¼Œä¹Ÿè¦åˆ·æ–°è“çƒä½ç½®ï¼ˆå¦‚æœè¿˜åœ¨åœºä¸Šï¼‰ const blueIndex = balls.findIndex(b =\u0026gt; b.color === \u0026#34;blue\u0026#34;); if (blueIndex !== -1) { balls.splice(blueIndex, 1); } if (redBallCount \u0026lt;= 0 \u0026amp;\u0026amp; blueBallCount \u0026lt;= 0) return; // ç‰¹ä¾‹ï¼šåªç”Ÿæˆä¸€ä¸ªçƒ if (num === 1) { if (redBallCount \u0026gt; 0) { balls.push(createBall(\u0026#34;red\u0026#34;)); } else if (blueBallCount \u0026gt; 0) { balls.push(createBall(\u0026#34;blue\u0026#34;)); } return; } // å¤šäº1ä¸ªçƒæ—¶ï¼Œå…ˆåŠ è“çƒï¼ˆå‰æï¼šè“çƒè¿˜æœªè¢«åƒæ‰ï¼‰ if (blueBallCount \u0026gt; 0) { balls.push(createBall(\u0026#34;blue\u0026#34;)); num--; } // åŠ çº¢çƒï¼ˆå‰æï¼šåº“å­˜è¶³å¤Ÿï¼‰ while (num \u0026gt; 0 \u0026amp;\u0026amp; redBallCount \u0026gt; 0) { balls.push(createBall(\u0026#34;red\u0026#34;)); num--; } } function createBall(color) { let x, y; do { x = box * Math.floor(Math.random() * 20); y = box * Math.floor(Math.random() * 20); } while (balls.some(b =\u0026gt; b.x === x \u0026amp;\u0026amp; b.y === y) || (people[0].x === x \u0026amp;\u0026amp; people[0].y === y)); return { x, y, color }; } function gameOver() { alert(\u0026#34;ä½ æ’å¢™äº†ï¼Œæ¸¸æˆå¤±è´¥ï¼å¾—åˆ†ï¼š\u0026#34; + score + \u0026#34;\\næŒ‰ç©ºæ ¼é”®é‡æ–°å¼€å§‹\u0026#34;); isGameOver = true; } // å¯åŠ¨ //initGame(); çœ‹ä¸‹é¢è¿™ä¸€æ®µï¼š\nif (score \u0026gt;= 5000 \u0026amp;\u0026amp; !hasGotFlag) { fetch(\u0026#39;/submit_score\u0026#39;, { method: \u0026#34;POST\u0026#34;, headers: { \u0026#34;Content-Type\u0026#34;: \u0026#34;application/json\u0026#34; }, body: JSON.stringify({ score: score }) }) åªè¦æ»¡è¶³score\u0026gt;=5000å°±èƒ½è·å– flag\næ§åˆ¶å°è¾“å…¥ä»¥ä¸‹å‘½ä»¤å³å¯ï¼š\nscore = 5000; éº¦éœ¸è¯„åˆ† å®¡æŸ¥ä»£ç ï¼š\n\u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;zh-CN\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34;\u0026gt; \u0026lt;meta name=\u0026#34;viewport\u0026#34; content=\u0026#34;width=device-width, initial-scale=1.0\u0026#34;\u0026gt; \u0026lt;title\u0026gt;f4k3 KTY è¯„åˆ†ç³»ç»Ÿ\u0026lt;/title\u0026gt; \u0026lt;style\u0026gt; body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; background-color: #f5f5f5; } .container { background-color: #fff; border-radius: 8px; padding: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); } .header { text-align: center; margin-bottom: 30px; } .header h1 { color: #e74c3c; margin-bottom: 10px; } .controls { display: flex; flex-direction: column; align-items: center; gap: 20px; margin-bottom: 30px; } .button { padding: 12px 25px; font-size: 16px; background-color: #e74c3c; color: white; border: none; border-radius: 4px; cursor: pointer; transition: background-color 0.3s; } .button:hover { background-color: #c0392b; } .button:disabled { background-color: #95a5a6; cursor: not-allowed; } .result { margin-top: 20px; padding: 15px; border-radius: 4px; text-align: center; } .result-low { background-color: #d6eaf8; color: #2980b9; } .result-medium { background-color: #fdebd0; color: #e67e22; } .result-high { background-color: #d5f5e3; color: #27ae60; } .result-perfect { background-color: #ebdef0; color: #8e44ad; } .audio-container { margin: 20px 0; display: flex; flex-direction: column; align-items: center; } .audio-container h3 { margin-bottom: 10px; } .modal { display: none; position: fixed; z-index: 1; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.7); } .modal-content { position: relative; background-color: #fefefe; margin: 15% auto; padding: 30px; border-radius: 8px; width: 70%; max-width: 500px; text-align: center; box-shadow: 0 4px 20px rgba(0,0,0,0.2); animation: modalopen 0.4s; } @keyframes modalopen { from {opacity: 0; transform: translateY(-30px);} to {opacity: 1; transform: translateY(0);} } .close-button { position: absolute; top: 10px; right: 15px; color: #aaa; font-size: 28px; font-weight: bold; cursor: pointer; } .close-button:hover { color: #333; } .flag { margin: 30px 0; padding: 15px; font-size: 20px; font-weight: bold; color: #e74c3c; background-color: #f9ebea; border: 2px dashed #e74c3c; border-radius: 5px; } .timer { font-size: 24px; font-weight: bold; margin: 10px 0; color: #e74c3c; } .visualizer { width: 100%; height: 60px; margin: 20px 0; background-color: #f5f5f5; border-radius: 4px; } .similarity-meter { width: 100%; height: 20px; background-color: #ecf0f1; border-radius: 10px; margin: 15px 0; overflow: hidden; } .similarity-value { height: 100%; width: 0%; background: linear-gradient(to right, #3498db, #2ecc71, #f1c40f, #e74c3c); border-radius: 10px; transition: width 0.5s ease-in-out; } .loader { border: 5px solid #f3f3f3; border-top: 5px solid #e74c3c; border-radius: 50%; width: 30px; height: 30px; animation: spin 1s linear infinite; margin: 20px auto; display: none; } @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } } .cooldown { font-size: 18px; margin-top: 10px; color: #e74c3c; font-weight: bold; } .warning { background-color: #fadbd8; padding: 10px; border-radius: 5px; margin: 10px 0; color: #c0392b; } /* æ·»åŠ é€€å‡ºç¡®è®¤å¯¹è¯æ¡†æ ·å¼ */ .exit-confirm-modal { display: none; position: fixed; z-index: 2; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.7); } .exit-confirm-content { position: relative; background-color: #fff2cc; margin: 15% auto; padding: 30px; border-radius: 8px; width: 70%; max-width: 500px; text-align: center; box-shadow: 0 4px 20px rgba(0,0,0,0.2); animation: modalopen 0.4s; border-left: 5px solid #e74c3c; } .exit-confirm-title { color: #e74c3c; font-size: 20px; margin-bottom: 15px; } .exit-confirm-buttons { display: flex; justify-content: center; gap: 20px; margin-top: 20px; } .exit-confirm-buttons button { padding: 10px 20px; border: none; border-radius: 4px; font-size: 16px; cursor: pointer; } .exit-confirm-stay { background-color: #3498db; color: white; } .exit-confirm-leave { background-color: #e74c3c; color: white; } \u0026lt;/style\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;div class=\u0026#34;container\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;header\u0026#34;\u0026gt; \u0026lt;h1\u0026gt;KTV å½•éŸ³è¯„åˆ†ç³»ç»Ÿ\u0026lt;/h1\u0026gt; \u0026lt;p\u0026gt;å¤§å®¶éƒ½ä¼šé€†æˆ˜å§, have a try \u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;audio-container\u0026#34;\u0026gt; \u0026lt;h3\u0026gt;é€†æˆ˜\u0026amp;å¼ æ°:\u0026lt;/h3\u0026gt; \u0026lt;audio id=\u0026#34;originalAudio\u0026#34; controls\u0026gt; \u0026lt;source id=\u0026#34;originalAudioSource\u0026#34; src=\u0026#34;/original.wav\u0026#34; type=\u0026#34;audio/wav\u0026#34;\u0026gt; æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾ \u0026lt;/audio\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div id=\u0026#34;warningMessage\u0026#34; class=\u0026#34;warning\u0026#34; style=\u0026#34;display:none;\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;controls\u0026#34;\u0026gt; \u0026lt;div id=\u0026#34;timer\u0026#34; class=\u0026#34;timer\u0026#34;\u0026gt;00:00\u0026lt;/div\u0026gt; \u0026lt;canvas id=\u0026#34;visualizer\u0026#34; class=\u0026#34;visualizer\u0026#34;\u0026gt;\u0026lt;/canvas\u0026gt; \u0026lt;div class=\u0026#34;similarity-meter\u0026#34;\u0026gt; \u0026lt;div id=\u0026#34;similarityValue\u0026#34; class=\u0026#34;similarity-value\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;button id=\u0026#34;recordButton\u0026#34; class=\u0026#34;button\u0026#34;\u0026gt;å¼€å§‹å½•éŸ³\u0026lt;/button\u0026gt; \u0026lt;div id=\u0026#34;cooldownTimer\u0026#34; class=\u0026#34;cooldown\u0026#34; style=\u0026#34;display:none;\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;div id=\u0026#34;loader\u0026#34; class=\u0026#34;loader\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div id=\u0026#34;result\u0026#34; class=\u0026#34;result\u0026#34; style=\u0026#34;display:none;\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;!-- å½•éŸ³é¢„è§ˆ --\u0026gt; \u0026lt;div class=\u0026#34;audio-container\u0026#34; id=\u0026#34;recordingContainer\u0026#34; style=\u0026#34;display:none;\u0026#34;\u0026gt; \u0026lt;h3\u0026gt;ä½ çš„å½•éŸ³:\u0026lt;/h3\u0026gt; \u0026lt;audio id=\u0026#34;recordedAudio\u0026#34; controls\u0026gt;\u0026lt;/audio\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;!-- FLAGå¼¹çª— --\u0026gt; \u0026lt;div id=\u0026#34;flagModal\u0026#34; class=\u0026#34;modal\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;modal-content\u0026#34;\u0026gt; \u0026lt;span class=\u0026#34;close-button\u0026#34; onclick=\u0026#34;closeModal()\u0026#34;\u0026gt;\u0026amp;times;\u0026lt;/span\u0026gt; \u0026lt;h2\u0026gt;æ­å–œä½ ï¼æ­Œç¥çº§åˆ«ï¼\u0026lt;/h2\u0026gt; \u0026lt;p\u0026gt;ä½ çš„æ¼”å”±ç®€ç›´å®Œç¾ï¼Œè·å¾—äº†æœ€é«˜è¯„ä»·ï¼\u0026lt;/p\u0026gt; \u0026lt;div class=\u0026#34;flag\u0026#34; id=\u0026#34;flagContent\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;button class=\u0026#34;button\u0026#34; onclick=\u0026#34;closeModal()\u0026#34;\u0026gt;è°¢è°¢\u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div id=\u0026#34;exitConfirmModal\u0026#34; class=\u0026#34;exit-confirm-modal\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;exit-confirm-content\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;exit-confirm-title\u0026#34;\u0026gt;âš ï¸ è­¦å‘Š\u0026lt;/div\u0026gt; \u0026lt;p\u0026gt;è‹¥æ‚¨é€€å‡ºå½“ä¸‹é¡µé¢ï¼Œæ‰€æœ‰å½•åˆ¶çš„å½•éŸ³éƒ½ä¼šè¢«åˆ é™¤ï¼\u0026lt;/p\u0026gt; \u0026lt;div class=\u0026#34;exit-confirm-buttons\u0026#34;\u0026gt; \u0026lt;button id=\u0026#34;stayButton\u0026#34; class=\u0026#34;exit-confirm-stay\u0026#34;\u0026gt;ç•™åœ¨é¡µé¢\u0026lt;/button\u0026gt; \u0026lt;button id=\u0026#34;leaveButton\u0026#34; class=\u0026#34;exit-confirm-leave\u0026#34;\u0026gt;ç¡®è®¤é€€å‡º\u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;script\u0026gt; let audioContext; let analyser; let microphone; let mediaRecorder; let audioChunks = []; let isRecording = false; let startTime; let timerInterval; let visualizerContext; // æ—¶é—´ let lastRequestTime = 0; const MIN_REQUEST_INTERVAL = 10000; // 10ç§’ï¼Œä¸æœåŠ¡å™¨ç«¯ä¿æŒä¸€è‡´ let cooldownInterval = null; // DOMå…ƒç´  const recordButton = document.getElementById(\u0026#39;recordButton\u0026#39;); const timer = document.getElementById(\u0026#39;timer\u0026#39;); const visualizer = document.getElementById(\u0026#39;visualizer\u0026#39;); const recordingContainer = document.getElementById(\u0026#39;recordingContainer\u0026#39;); const recordedAudio = document.getElementById(\u0026#39;recordedAudio\u0026#39;); const result = document.getElementById(\u0026#39;result\u0026#39;); const loader = document.getElementById(\u0026#39;loader\u0026#39;); const similarityValue = document.getElementById(\u0026#39;similarityValue\u0026#39;); const flagModal = document.getElementById(\u0026#39;flagModal\u0026#39;); const flagContent = document.getElementById(\u0026#39;flagContent\u0026#39;); const cooldownTimer = document.getElementById(\u0026#39;cooldownTimer\u0026#39;); const warningMessage = document.getElementById(\u0026#39;warningMessage\u0026#39;); const originalAudio = document.getElementById(\u0026#39;originalAudio\u0026#39;); const originalAudioSource = document.getElementById(\u0026#39;originalAudioSource\u0026#39;); originalAudio.addEventListener(\u0026#39;error\u0026#39;, function(e) { console.error(\u0026#39;éŸ³é¢‘åŠ è½½å¤±è´¥:\u0026#39;, e); warningMessage.textContent = \u0026#39;åŸå§‹éŸ³é¢‘åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•\u0026#39;; warningMessage.style.display = \u0026#39;block\u0026#39;; fetch(\u0026#39;/get-original-audio\u0026#39;) .then(response =\u0026gt; response.json()) .then(data =\u0026gt; { if (data \u0026amp;\u0026amp; data.url) { console.log(\u0026#39;ä»APIè·å–éŸ³é¢‘URL:\u0026#39;, data.url); originalAudioSource.src = data.url + \u0026#39;?t=\u0026#39; + new Date().getTime(); // æ·»åŠ æ—¶é—´æˆ³é˜²æ­¢ç¼“å­˜ originalAudio.load(); } }) .catch(err =\u0026gt; { console.error(\u0026#39;è·å–éŸ³é¢‘URLå¤±è´¥:\u0026#39;, err); }); }); // æ·»åŠ é€€å‡ºç¡®è®¤å¯¹è¯æ¡†å…ƒç´  const exitConfirmModal = document.getElementById(\u0026#39;exitConfirmModal\u0026#39;); const stayButton = document.getElementById(\u0026#39;stayButton\u0026#39;); const leaveButton = document.getElementById(\u0026#39;leaveButton\u0026#39;); let currentRecordingFilename = null; visualizerContext = visualizer.getContext(\u0026#39;2d\u0026#39;); visualizer.width = visualizer.offsetWidth; visualizer.height = visualizer.offsetHeight; recordButton.addEventListener(\u0026#39;click\u0026#39;, () =\u0026gt; { if (!isRecording) { if (!canMakeRequest()) { showCooldownMessage(); return; } // å¦‚æœæœ‰ä¸Šä¸€æ®µå½•éŸ³ï¼Œå…ˆæ¸…ç† if (currentRecordingFilename) { cleanRecording(currentRecordingFilename); currentRecordingFilename = null; } startRecording(); } else { stopRecording(); } }); // æ£€æŸ¥æ˜¯å¦å¯ä»¥å‘é€è¯·æ±‚ function canMakeRequest() { const now = Date.now(); return now - lastRequestTime \u0026gt;= MIN_REQUEST_INTERVAL; } // é™æ—¶ï¼Œé¿å…è¿‡åº¦è¯·æ±‚ function showCooldownMessage() { const now = Date.now(); const remainingTime = Math.ceil((MIN_REQUEST_INTERVAL - (now - lastRequestTime)) / 1000); cooldownTimer.textContent = `è¯·ç­‰å¾… ${remainingTime} ç§’åå†è¯•`; cooldownTimer.style.display = \u0026#39;block\u0026#39;; if (cooldownInterval) { clearInterval(cooldownInterval); } cooldownInterval = setInterval(() =\u0026gt; { const currentTime = Date.now(); const remaining = Math.ceil((MIN_REQUEST_INTERVAL - (currentTime - lastRequestTime)) / 1000); if (remaining \u0026lt;= 0) { clearInterval(cooldownInterval); cooldownTimer.style.display = \u0026#39;none\u0026#39;; cooldownTimer.textContent = \u0026#39;\u0026#39;; } else { cooldownTimer.textContent = `è¯·ç­‰å¾… ${remaining} ç§’åå†è¯•`; } }, 1000); } function updateTimer() { const elapsedTime = Math.floor((Date.now() - startTime) / 1000); const minutes = Math.floor(elapsedTime / 60).toString().padStart(2, \u0026#39;0\u0026#39;); const seconds = (elapsedTime % 60).toString().padStart(2, \u0026#39;0\u0026#39;); timer.textContent = `${minutes}:${seconds}`; } // å¯è§†åŒ–éŸ³é¢‘è¾“å…¥ function visualize() { if (!audioContext || audioContext.state === \u0026#39;closed\u0026#39;) return; const bufferLength = analyser.frequencyBinCount; const dataArray = new Uint8Array(bufferLength); const draw = () =\u0026gt; { if (!isRecording) return; requestAnimationFrame(draw); analyser.getByteFrequencyData(dataArray); visualizerContext.clearRect(0, 0, visualizer.width, visualizer.height); const barWidth = (visualizer.width / bufferLength) * 2.5; let x = 0; for (let i = 0; i \u0026lt; bufferLength; i++) { const barHeight = (dataArray[i] / 255) * visualizer.height; // ä½¿ç”¨å½©è‰²æ¸å˜æ•ˆæœ const hue = i / bufferLength * 360; visualizerContext.fillStyle = `hsl(${hue}, 100%, 50%)`; visualizerContext.fillRect(x, visualizer.height - barHeight, barWidth, barHeight); x += barWidth + 1; } }; draw(); } async function startRecording() { try { result.style.display = \u0026#39;none\u0026#39;; recordingContainer.style.display = \u0026#39;none\u0026#39;; warningMessage.style.display = \u0026#39;none\u0026#39;; try { const prepareResponse = await fetch(\u0026#39;/prepare-recording\u0026#39;); if (!prepareResponse.ok) { console.warn(\u0026#39;é¢„æ¸…ç†è¯·æ±‚å¤±è´¥ï¼Œç»§ç»­å½•éŸ³:\u0026#39;, prepareResponse.statusText); } else { // æ£€æŸ¥å†…å®¹ç±»å‹ const contentType = prepareResponse.headers.get(\u0026#39;content-type\u0026#39;); if (contentType \u0026amp;\u0026amp; contentType.includes(\u0026#39;application/json\u0026#39;)) { const data = await prepareResponse.json(); console.log(\u0026#39;é¢„æ¸…ç†ç»“æœ:\u0026#39;, data.message); } else { console.warn(\u0026#39;é¢„æ¸…ç†å“åº”ä¸æ˜¯JSONæ ¼å¼ï¼Œç»§ç»­å½•éŸ³\u0026#39;); } } } catch (cleanError) { console.warn(\u0026#39;é¢„æ¸…ç†å‡ºé”™ï¼Œç»§ç»­å½•éŸ³:\u0026#39;, cleanError); } if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) { throw new Error(\u0026#39;æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒå½•éŸ³åŠŸèƒ½ã€‚è¯·ä½¿ç”¨Chrome, Firefoxæˆ–Edgeçš„æœ€æ–°ç‰ˆæœ¬ã€‚\u0026#39;); } try { // è·å–å½•éŸ³æƒé™ const stream = await navigator.mediaDevices.getUserMedia({ audio: true }); audioContext = new (window.AudioContext || window.webkitAudioContext)(); analyser = audioContext.createAnalyser(); microphone = audioContext.createMediaStreamSource(stream); microphone.connect(analyser); analyser.fftSize = 256; const bufferLength = analyser.frequencyBinCount; const dataArray = new Uint8Array(bufferLength); if (typeof MediaRecorder === \u0026#39;undefined\u0026#39;) { throw new Error(\u0026#39;æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒMediaRecorder APIã€‚è¯·ä½¿ç”¨Chrome, Firefoxæˆ–Edgeçš„æœ€æ–°ç‰ˆæœ¬ã€‚\u0026#39;); } // åˆ›å»ºåª’ä½“è®°å½•å™¨ let mimeType = \u0026#39;audio/wav\u0026#39;; // æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æ”¯æŒæŒ‡å®šçš„MIMEç±»å‹ if (!MediaRecorder.isTypeSupported(mimeType)) { console.warn(\u0026#39;æµè§ˆå™¨ä¸æ”¯æŒaudio/wavæ ¼å¼ï¼Œä½¿ç”¨é»˜è®¤æ ¼å¼\u0026#39;); mimeType = \u0026#39;\u0026#39;; } const mediaRecorderOptions = mimeType ? { mimeType: mimeType, audioBitsPerSecond: 16000 } : { audioBitsPerSecond: 16000 }; mediaRecorder = new MediaRecorder(stream, mediaRecorderOptions); audioChunks = []; // æ”¶é›†å½•éŸ³æ•°æ® mediaRecorder.ondataavailable = (event) =\u0026gt; { audioChunks.push(event.data); }; // å½•éŸ³åœæ­¢åçš„å¤„ç† mediaRecorder.onstop = () =\u0026gt; { const audioBlob = new Blob(audioChunks, { type: \u0026#39;audio/wav\u0026#39; }); const audioUrl = URL.createObjectURL(audioBlob); recordedAudio.src = audioUrl; recordingContainer.style.display = \u0026#39;block\u0026#39;; uploadRecording(audioBlob); }; mediaRecorder.start(); isRecording = true; recordButton.textContent = \u0026#39;åœæ­¢å½•éŸ³\u0026#39;; recordButton.style.backgroundColor = \u0026#39;#c0392b\u0026#39;; startTime = Date.now(); updateTimer(); timerInterval = setInterval(updateTimer, 1000); visualize(); } catch (mediaError) { handleMediaError(mediaError); } } catch (error) { console.error(\u0026#39;å½•éŸ³åŠŸèƒ½é”™è¯¯:\u0026#39;, error); showErrorMessage(error.message || \u0026#39;æ— æ³•è®¿é—®éº¦å…‹é£ï¼Œè¯·ç¡®ä¿æ‚¨å·²æˆäºˆå½•éŸ³æƒé™ã€‚\u0026#39;); } } // åœæ­¢å½•éŸ³ function stopRecording() { console.log(\u0026#39;åœæ­¢å½•éŸ³å‡½æ•°è¢«è°ƒç”¨ï¼Œå½“å‰çŠ¶æ€:\u0026#39;, { isRecording: isRecording, mediaRecorderExists: !!mediaRecorder, mediaRecorderState: mediaRecorder ? mediaRecorder.state : \u0026#39;undefined\u0026#39; }); try { if (!mediaRecorder) { console.error(\u0026#39;MediaRecorderå¯¹è±¡ä¸å­˜åœ¨ï¼Œæ— æ³•åœæ­¢å½•éŸ³\u0026#39;); showErrorMessage(\u0026#39;å½•éŸ³è®¾å¤‡å¼‚å¸¸ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•\u0026#39;); isRecording = false; recordButton.textContent = \u0026#39;å¼€å§‹å½•éŸ³\u0026#39;; recordButton.style.backgroundColor = \u0026#39;#e74c3c\u0026#39;; return; } if (!isRecording) { console.warn(\u0026#39;çŠ¶æ€æ˜¾ç¤ºæœªåœ¨å½•éŸ³ä¸­ï¼Œä½†åœæ­¢å½•éŸ³æŒ‰é’®è¢«ç‚¹å‡»\u0026#39;); return; } // ç¡®ä¿MediaRecorderå¤„äºå½•éŸ³çŠ¶æ€æ‰èƒ½åœæ­¢ if (mediaRecorder.state === \u0026#39;recording\u0026#39; || mediaRecorder.state === \u0026#39;paused\u0026#39;) { // è¯·æ±‚æ•°æ® mediaRecorder.requestData(); // åœæ­¢å½•éŸ³ mediaRecorder.stop(); console.log(\u0026#39;MediaRecorderå·²åœæ­¢\u0026#39;); } else { console.warn(`MediaRecorderçŠ¶æ€å¼‚å¸¸: ${mediaRecorder.state}`); } //UIæ›´æ–° isRecording = false; recordButton.textContent = \u0026#39;å¼€å§‹å½•éŸ³\u0026#39;; recordButton.style.backgroundColor = \u0026#39;#e74c3c\u0026#39;; // åœæ­¢è®¡æ—¶å™¨ if (timerInterval) { clearInterval(timerInterval); console.log(\u0026#39;è®¡æ—¶å™¨å·²åœæ­¢\u0026#39;); } // å…³é—­éŸ³é¢‘æµ if (audioContext \u0026amp;\u0026amp; audioContext.state !== \u0026#39;closed\u0026#39;) { if (microphone) { microphone.disconnect(); console.log(\u0026#39;éº¦å…‹é£å·²æ–­å¼€è¿æ¥\u0026#39;); } } if (audioChunks.length \u0026gt; 0 \u0026amp;\u0026amp; mediaRecorder.state !== \u0026#39;recording\u0026#39;) { console.log(\u0026#39;æ‰‹åŠ¨å¤„ç†å½•éŸ³æ•°æ®\u0026#39;); const audioBlob = new Blob(audioChunks, { type: \u0026#39;audio/wav\u0026#39; }); const audioUrl = URL.createObjectURL(audioBlob); recordedAudio.src = audioUrl; recordingContainer.style.display = \u0026#39;block\u0026#39;; // ä¸Šä¼ å½•éŸ³ uploadRecording(audioBlob); } } catch (error) { console.error(\u0026#39;åœæ­¢å½•éŸ³æ—¶å‡ºé”™:\u0026#39;, error); showErrorMessage(\u0026#39;åœæ­¢å½•éŸ³æ—¶å‡ºé”™ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•\u0026#39;); isRecording = false; recordButton.textContent = \u0026#39;å¼€å§‹å½•éŸ³\u0026#39;; recordButton.style.backgroundColor = \u0026#39;#e74c3c\u0026#39;; } } // å¤„ç†åª’ä½“è®¿é—®é”™è¯¯ function handleMediaError(error) { console.error(\u0026#39;éº¦å…‹é£è®¿é—®é”™è¯¯:\u0026#39;, error); let errorMessage = \u0026#39;æ— æ³•è®¿é—®éº¦å…‹é£ï¼Œè¯·ç¡®ä¿æ‚¨å·²æˆäºˆå½•éŸ³æƒé™ã€‚\u0026#39;; // æ ¹æ®é”™è¯¯ç±»å‹æä¾›å…·ä½“çš„é”™è¯¯ä¿¡æ¯ if (error.name === \u0026#39;NotAllowedError\u0026#39; || error.name === \u0026#39;PermissionDeniedError\u0026#39;) { errorMessage = \u0026#39;æ‚¨å·²æ‹’ç»éº¦å…‹é£è®¿é—®æƒé™ã€‚è¯·ç‚¹å‡»æµè§ˆå™¨åœ°å€æ çš„é”å›¾æ ‡ï¼Œæ›´æ”¹éº¦å…‹é£æƒé™è®¾ç½®ï¼Œç„¶ååˆ·æ–°é¡µé¢ã€‚\u0026#39;; } else if (error.name === \u0026#39;NotFoundError\u0026#39; || error.name === \u0026#39;DevicesNotFoundError\u0026#39;) { errorMessage = \u0026#39;æœªæ£€æµ‹åˆ°éº¦å…‹é£è®¾å¤‡ã€‚è¯·ç¡®è®¤æ‚¨çš„éº¦å…‹é£å·²æ­£ç¡®è¿æ¥ï¼Œå¹¶ä¸”æ²¡æœ‰è¢«ç³»ç»Ÿç¦ç”¨ã€‚\u0026#39;; } else if (error.name === \u0026#39;NotReadableError\u0026#39; || error.name === \u0026#39;TrackStartError\u0026#39;) { errorMessage = \u0026#39;éº¦å…‹é£æ­£åœ¨è¢«å…¶ä»–åº”ç”¨ç¨‹åºä½¿ç”¨ã€‚è¯·å…³é—­å¯èƒ½æ­£åœ¨ä½¿ç”¨éº¦å…‹é£çš„å…¶ä»–åº”ç”¨ï¼Œç„¶ååˆ·æ–°é¡µé¢é‡è¯•ã€‚\u0026#39;; } else if (error.name === \u0026#39;OverconstrainedError\u0026#39;) { errorMessage = \u0026#39;éº¦å…‹é£è®¾ç½®çº¦æŸæ¡ä»¶æ— æ³•æ»¡è¶³ã€‚è¯·ä½¿ç”¨å…¶ä»–éº¦å…‹é£è®¾å¤‡é‡è¯•ã€‚\u0026#39;; } else if (error.name === \u0026#39;TypeError\u0026#39;) { errorMessage = \u0026#39;å½•éŸ³å‚æ•°é”™è¯¯ã€‚è¯·åˆ·æ–°é¡µé¢é‡è¯•ã€‚\u0026#39;; } else if (error.name === \u0026#39;AbortError\u0026#39;) { errorMessage = \u0026#39;éº¦å…‹é£è®¿é—®è¯·æ±‚è¢«ä¸­æ–­ã€‚è¯·åˆ·æ–°é¡µé¢é‡è¯•ã€‚\u0026#39;; } else if (error.name === \u0026#39;SecurityError\u0026#39;) { errorMessage = \u0026#39;æµè§ˆå™¨å®‰å…¨è®¾ç½®é˜»æ­¢äº†éº¦å…‹é£è®¿é—®ã€‚è¯·ä½¿ç”¨HTTPSè¿æ¥æˆ–localhostè®¿é—®æœ¬ç«™ç‚¹ã€‚\u0026#39;; } showErrorMessage(errorMessage); } // æ¸…ç†å½•éŸ³ function cleanRecording(filename) { if (!filename) return; fetch(`/clean-recording/${filename}`, { method: \u0026#39;DELETE\u0026#39; }) .then(response =\u0026gt; response.json()) .then(data =\u0026gt; { console.log(\u0026#39;æ¸…ç†å½•éŸ³ç»“æœ:\u0026#39;, data.message); }) .catch(error =\u0026gt; { console.error(\u0026#39;æ¸…ç†å½•éŸ³å‡ºé”™:\u0026#39;, error); }); } function cleanAllRecordings() { fetch(\u0026#39;/clean-all-recordings\u0026#39;, { method: \u0026#39;DELETE\u0026#39; }) .then(response =\u0026gt; response.json()) .then(data =\u0026gt; { console.log(\u0026#39;æ¸…ç†æ‰€æœ‰å½•éŸ³ç»“æœ:\u0026#39;, data.message); }) .catch(error =\u0026gt; { console.error(\u0026#39;æ¸…ç†æ‰€æœ‰å½•éŸ³å‡ºé”™:\u0026#39;, error); }); } function uploadRecording(audioBlob) { loader.style.display = \u0026#39;block\u0026#39;; result.style.display = \u0026#39;none\u0026#39;; similarityValue.style.width = \u0026#39;0%\u0026#39;; lastRequestTime = Date.now(); const formData = new FormData(); formData.append(\u0026#39;audio\u0026#39;, audioBlob, \u0026#39;recording.wav\u0026#39;); fetch(\u0026#39;/compare-recording\u0026#39;, { method: \u0026#39;POST\u0026#39;, body: formData }) .then(response =\u0026gt; { // æ£€æŸ¥å“åº”çŠ¶æ€ if (!response.ok) { throw new Error(`æœåŠ¡å™¨å“åº”é”™è¯¯: ${response.status} ${response.statusText}`); } return response.json(); }) .then(data =\u0026gt; { // éšè—åŠ è½½çŠ¶æ€ loader.style.display = \u0026#39;none\u0026#39;; // å¦‚æœæˆåŠŸè·å–åˆ°å½•éŸ³æ–‡ä»¶åï¼Œä¿å­˜å®ƒ if (data.filename) { currentRecordingFilename = data.filename; } // æ˜¾ç¤ºåŒ¹é…åº¦ const similarity = parseFloat(data.similarity); similarityValue.style.width = `${similarity}%`; // æ˜¾ç¤ºç»“æœ result.textContent = `åŒ¹é…åº¦: ${similarity.toFixed(2)}% - ${data.message}`; result.style.display = \u0026#39;block\u0026#39;; // æ ¹æ®åŒ¹é…åº¦è®¾ç½®ä¸åŒçš„æ ·å¼ result.className = \u0026#39;result\u0026#39;; if (similarity \u0026gt;= 98) { result.classList.add(\u0026#39;result-perfect\u0026#39;); } else if (similarity \u0026gt;= 85) { result.classList.add(\u0026#39;result-high\u0026#39;); } else if (similarity \u0026gt;= 70) { result.classList.add(\u0026#39;result-medium\u0026#39;); } else { result.classList.add(\u0026#39;result-low\u0026#39;); } // å¦‚æœæœ‰FLAGï¼Œæ˜¾ç¤ºFLAGå¼¹çª— if (data.flag) { showFlagModal(data.flag); } }) .catch(error =\u0026gt; { console.error(\u0026#39;ä¸Šä¼ å½•éŸ³å‡ºé”™:\u0026#39;, error); loader.style.display = \u0026#39;none\u0026#39;; result.textContent = \u0026#39;è¯„åˆ†å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•: \u0026#39; + error.message; result.className = \u0026#39;result result-low\u0026#39;; result.style.display = \u0026#39;block\u0026#39;; }); } function showErrorMessage(message) { warningMessage.textContent = message; warningMessage.style.display = \u0026#39;block\u0026#39;; isRecording = false; recordButton.textContent = \u0026#39;å¼€å§‹å½•éŸ³\u0026#39;; recordButton.style.backgroundColor = \u0026#39;#e74c3c\u0026#39;; if (timerInterval) { clearInterval(timerInterval); } } // æ˜¾ç¤ºFLAGå¼¹çª— function showFlagModal(flag) { flagContent.textContent = flag; flagModal.style.display = \u0026#39;block\u0026#39;; } function closeModal() { flagModal.style.display = \u0026#39;none\u0026#39;; } window.onclick = function(event) { if (event.target === flagModal) { flagModal.style.display = \u0026#39;none\u0026#39;; } } // é¡µé¢å¸è½½å‰å¤„ç† window.addEventListener(\u0026#39;beforeunload\u0026#39;, function(event) { // æ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡† exitConfirmModal.style.display = \u0026#39;block\u0026#39;; // é˜»æ­¢é¡µé¢ç«‹å³å¸è½½ï¼Œæ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡† event.preventDefault(); event.returnValue = \u0026#39;\u0026#39;; // æ³¨æ„ï¼šç°ä»£æµè§ˆå™¨å‡ºäºå®‰å…¨è€ƒè™‘å¯èƒ½ä¼šå¿½ç•¥è‡ªå®šä¹‰æ¶ˆæ¯ return \u0026#39;è‹¥æ‚¨é€€å‡ºå½“ä¸‹é¡µé¢ï¼Œæ‰€æœ‰å½•åˆ¶çš„å½•éŸ³éƒ½ä¼šè¢«åˆ é™¤ï¼\u0026#39;; }); // ç”¨æˆ·é€‰æ‹©é¡µé¢ stayButton.addEventListener(\u0026#39;click\u0026#39;, function() { exitConfirmModal.style.display = \u0026#39;none\u0026#39;; }); leaveButton.addEventListener(\u0026#39;click\u0026#39;, function() { cleanAllRecordings(); exitConfirmModal.style.display = \u0026#39;none\u0026#39;; setTimeout(() =\u0026gt; { window.location.href = \u0026#39;about:blank\u0026#39;; }, 500); }); \u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; å‘ç°flagè·å–æ¡ä»¶å¦‚ä¸‹ï¼š\nif (similarity \u0026gt;= 98) { result.classList.add(\u0026#39;result-perfect\u0026#39;); } ä½†æ˜¯ç´§æ¥ç€åˆå‘ç°ï¼š\nif (data.flag) { showFlagModal(data.flag); } è¯´æ˜flagæ˜¯ä»åç«¯ä¼ æ¥ï¼Œæ”¹åŠ¨å‰ç«¯similarityå€¼ä¸èƒ½å¾—åˆ°flag\nå”±æ­Œè‚¯å®šä¸è¡Œï¼Œé‚£ä¹ˆæ—¢ç„¶ç½‘ç«™æä¾›äº†åŸéŸ³é¢‘ä¸‹è½½ï¼Œå°±å¯ä»¥ç›´æ¥æäº¤åŸéŸ³é¢‘\nä½†ç½‘é¡µæ²¡æœ‰æä¾›æäº¤å…¥å£ï¼Œè€Œä»£ç ä¸­æ˜¯å‰ç«¯å°†å½•éŸ³æ–‡ä»¶ä¸Šä¼ åˆ°/compare-recordingï¼Œé‚£å°±å¯ä»¥ç›´æ¥ä¸åç«¯å»ºç«‹è”ç³»\nä½¿ç”¨curlï¼š\ncurl -X POST http://127.0.0.1:xxxx/compare-recording -F \u0026#34;audio=@original.wav\u0026#34; ç›´æ¥å¾—åˆ°è¿”å›çš„flag\n","date":"2025-05-09T01:17:52+08:00","permalink":"https://blog.928330.xyz/p/minil/","title":"MiniL"},{"content":"VIMä½¿ç”¨æ–¹å¼ vimé”®ç›˜å›¾ vimæ“ä½œæ–‡ä»¶åŸºæœ¬æ–¹å¼ æ‰“å¼€æ–‡ä»¶ å•ä¸ªæ–‡ä»¶\nvim file1 å¤šä¸ªæ–‡ä»¶\nvim file1 file2 ... filen è¯¥æ–¹å¼æ‰“å¼€æ–‡ä»¶ï¼Œæ˜¾ç¤ºå±é»˜è®¤æ˜¾ç¤ºç¬¬ä¸€ä¸ªæ–‡ä»¶ä¹Ÿå°±æ˜¯ file1\næ–‡ä»¶ä¹‹é—´çš„åˆ‡æ¢ :ls \u0026ndash; åˆ—å‡º VIM æ‰“å¼€çš„æ‰€æœ‰æ–‡ä»¶ :bn \u0026ndash; æ˜¾ç¤ºå±ä¸Šæ˜¾ç¤ºç¬¬nä¸ªæ–‡ä»¶ æ˜¾ç¤ºå¤šä¸ªæ–‡ä»¶ å·¦å³åˆ†å±\nvim -On file1 file2 ... filen è¿™é‡Œçš„ n æ˜¯ä»£è¡¨æœ‰å‡ ä¸ªæ–‡ä»¶éœ€è¦åˆ†å±ï¼Œä»å·¦è‡³å³ä¾æ¬¡æ˜¾ç¤º n ä¸ªæ–‡ä»¶\nä¸Šä¸‹åˆ†å±\nvim -on file1 file2 ... filen è·Ÿä¸Šä¸€ä¸ªå‘½ä»¤ä¸åŒçš„æ˜¯ -on ä¸­çš„ o æ˜¯å°å†™ï¼Œè¿™æ ·å°†ä¼šä¸Šä¸‹ä¾æ¬¡æ˜¾ç¤º n ä¸ªæ–‡ä»¶\nåˆ†å±æ“ä½œï¼ˆctrl+wç³»åˆ—ï¼‰ å·¦å³åˆ†å± Ctrl+w+s \u0026ndash; ä¸Šä¸‹åˆ†å‰²å½“å‰æ‰“å¼€çš„æ–‡ä»¶ :sp file \u0026ndash; ä¸Šä¸‹åˆ†å‰²å½“å‰æ–‡ä»¶å’Œæ–°æ‰“å¼€çš„ file ä¸Šä¸‹åˆ†å± Ctrl+w+v \u0026ndash; å·¦å³åˆ†å‰²å½“å‰æ‰“å¼€çš„æ–‡ä»¶ :vsp file \u0026ndash; å·¦å³åˆ†å‰²å½“å‰æ–‡ä»¶å’Œæ–°æ‰“å¼€çš„ file ç§»åŠ¨åˆ†å± å¤§å†™å­—æ¯\nCtrl+w+H \u0026ndash; å°†å½“å‰çš„åˆ†å±ç§»åŠ¨åˆ°å·¦è¾¹ Ctrl+w+L \u0026ndash; å°†å½“å‰çš„åˆ†å±ç§»åŠ¨åˆ°å³è¾¹ Ctrl+w+J \u0026ndash; å°†å½“å‰çš„åˆ†å±ç§»åŠ¨åˆ°ä¸Šè¾¹ Ctrl+w+K \u0026ndash; å°†å½“å‰çš„åˆ†å±ç§»åŠ¨åˆ°ä¸‹è¾¹ åœ¨æ–‡ä»¶é—´åˆ‡æ¢å…‰æ ‡ å°å†™å­—æ¯\nCtrl+w+h \u0026ndash; å°†å½“å‰å…‰æ ‡å®šä½åˆ°å·¦è¾¹çš„å±å¹• Ctrl+w+l \u0026ndash; å°†å½“å‰å…‰æ ‡å®šä½åˆ°å·¦è¾¹çš„å±å¹• Ctrl+w+j \u0026ndash; å°†å½“å‰å…‰æ ‡å®šä½åˆ°å·¦è¾¹çš„å±å¹• Ctrl+w+k \u0026ndash; å°†å½“å‰å…‰æ ‡å®šä½åˆ°å·¦è¾¹çš„å±å¹• å…³é—­åˆ†å± Ctrl+w+c \u0026ndash; å…³é—­å½“å‰çš„åˆ†å±(å¤šä¸ªåˆ†å±å°±åªå…³é—­å…‰æ ‡æ‰€åœ¨çš„åˆ†å±) Ctrl+w+q \u0026ndash; å…³é—­å½“å‰çš„åˆ†å±ï¼Œå¦‚æœæ˜¯æœ€åä¸€ä¸ªåˆ†å±å°†ä¼šé€€å‡º VIM vimäº”å¤§æ¨¡å¼ æ™®é€šæ¨¡å¼ ç”¨æˆ·åˆšåˆšå¯åŠ¨ vi/vimï¼Œä¾¿è¿›å…¥äº†æ™®é€šæ¨¡å¼\næ­¤çŠ¶æ€ä¸‹æ•²å‡»é”®ç›˜åŠ¨ä½œä¼šè¢« Vim è¯†åˆ«ä¸ºå‘½ä»¤ï¼Œè€Œéè¾“å…¥å­—ç¬¦\næ™®é€šæ¨¡å¼ç§»åŠ¨å…‰æ ‡ å¿«é€Ÿç§»åŠ¨å…‰æ ‡\nè¾“å…¥[æ•°å­—nï¼‹æ–¹å‘]ï¼Œä»£è¡¨å‘æŸä¸ªæ–¹å‘ç§»åŠ¨n\nh / â† / [backspace]ï¼šå‘å·¦ç§»åŠ¨å…‰æ ‡ j / â†“ï¼šå‘ä¸‹ç§»åŠ¨å…‰æ ‡ k / â†‘ï¼šå‘ä¸Šç§»åŠ¨å…‰æ ‡ l / â†’ / [space]ï¼šå‘å³ç§»åŠ¨å…‰æ ‡ åœ¨å½“å‰è¡Œä¸Šç§»åŠ¨å…‰æ ‡\n0 æˆ–åŠŸèƒ½é”®[Home] \u0026ndash; ç§»åŠ¨åˆ°è¡Œå¤´ ^ \u0026ndash; ç§»åŠ¨åˆ°æœ¬è¡Œçš„ç¬¬ä¸€ä¸ªä¸æ˜¯ blank å­—ç¬¦ $ æˆ–åŠŸèƒ½é”®[End] \u0026ndash; ç§»åŠ¨åˆ°è¡Œå°¾ g_ \u0026ndash; ç§»åŠ¨åˆ°æœ¬è¡Œæœ€åä¸€ä¸ªä¸æ˜¯ blank å­—ç¬¦çš„ä½ç½® w \u0026ndash; å…‰æ ‡ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå•è¯çš„å¼€å¤´ e \u0026ndash; å…‰æ ‡ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå•è¯çš„ç»“å°¾ fa \u0026ndash; ç§»åŠ¨åˆ°æœ¬è¡Œä¸‹ä¸€ä¸ªä¸º a çš„å­—ç¬¦å¤„ nfa \u0026ndash; ç§»åŠ¨åˆ°æœ¬è¡Œå…‰æ ‡å¤„å¼€å§‹çš„ç¬¬ n ä¸ª å­—ç¬¦ä¸º a çš„åœ°æ–¹ Fa \u0026ndash; åŒfaä¸€æ ·ï¼Œå…‰æ ‡ç§»åŠ¨æ–¹å‘åŒfaç›¸å nFa \u0026ndash; åŒ nfa ç±»ä¼¼ï¼Œå…‰æ ‡ç§»åŠ¨æ–¹å‘åŒ nfaç›¸å ta \u0026ndash; ç§»åŠ¨å…‰æ ‡è‡³ a å­—ç¬¦çš„å‰ä¸€ä¸ªå­—ç¬¦ nta \u0026ndash; ç§»åŠ¨åˆ°ç¬¬nä¸ª a å­—ç¬¦çš„å‰ä¸€ä¸ªå­—ç¬¦å¤„ Ta \u0026ndash; åŒtaç§»åŠ¨å…‰æ ‡æ–¹å‘ç›¸å nTa \u0026ndash; åŒ nta ç§»åŠ¨å…‰æ ‡æ–¹å‘ç›¸å ; \u0026amp; , \u0026ndash; å½“ä½¿ç”¨ f, F, t ,T, å…³é”®å­—æŒ‡å®šå­—ç¬¦è·³è½¬çš„æ—¶å€™ï¼Œä½¿ç”¨**ï¼›å¯ä»¥å¿«é€Ÿè·³è½¬åˆ°ä¸‹ä¸€ä¸ªæŒ‡å®šçš„å­—ç¬¦ï¼Œ,** æ˜¯è·³åˆ°å‰ä¸€ä¸ªæŒ‡å®šçš„å­—ç¬¦ è·¨è¡Œç§»åŠ¨å…‰æ ‡\nnG \u0026ndash; å…‰æ ‡å®šä½åˆ°ç¬¬ n è¡Œçš„è¡Œé¦– gg \u0026ndash; å…‰æ ‡å®šä½åˆ°ç¬¬ä¸€è¡Œçš„è¡Œé¦– G \u0026ndash; å…‰æ ‡å®šä½åˆ°æœ€åä¸€è¡Œçš„è¡Œé¦– H \u0026ndash; å…‰æ ‡å®šä½åˆ°å½“å‰å±å¹•çš„ç¬¬ä¸€è¡Œè¡Œé¦– M \u0026ndash; å…‰æ ‡ç§»åŠ¨åˆ°å½“å‰å±å¹•çš„ä¸­é—´ L \u0026ndash; å…‰æ ‡ç§»åŠ¨åˆ°å½“å‰å±å¹•çš„å°¾éƒ¨ zt \u0026ndash; æŠŠå½“å‰è¡Œç§»åŠ¨åˆ°å½“å‰å±å¹•çš„æœ€ä¸Šæ–¹ï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸€è¡Œ zz \u0026ndash; æŠŠå½“å‰è¡Œç§»åŠ¨åˆ°å½“å‰å±å¹•çš„ä¸­é—´ zb \u0026ndash; æŠŠå½“å‰è¡Œç§»åŠ¨åˆ°å½“å‰å±å¹•çš„å°¾éƒ¨ % \u0026ndash; åŒ¹é…æ‹¬å·ç§»åŠ¨ï¼ŒåŒ…æ‹¬ ( , { , [ éœ€è¦æŠŠå…‰æ ‡å…ˆç§»åŠ¨åˆ°æ‹¬å·ä¸Š * \u0026amp; # \u0026ndash; åŒ¹é…å…‰æ ‡å½“å‰æ‰€åœ¨çš„å•è¯ï¼Œ ***** æ˜¯ä¸‹ä¸€ä¸ªï¼Œ# æ˜¯ä¸Šä¸€ä¸ª ç¿»é¡µæ“ä½œ\nctrl+u \u0026ndash; å‘ä¸Šæ»šåŠ¨åŠé¡µ ctrl+b \u0026ndash; å‘ä¸Šæ»šåŠ¨ä¸€é¡µ ctrl+d \u0026ndash; å‘ä¸‹æ»šåŠ¨åŠé¡µ ctrl+f \u0026ndash; å‘ä¸‹æ»šåŠ¨ä¸€é¡µ æ™®é€šæ¨¡å¼æ“ä½œæ–‡æœ¬ åˆ é™¤\nd æ˜¯åˆ é™¤çš„æ„æ€ï¼Œé€šå¸¸æ­é…ä¸€ä¸ªå­—ç¬¦ ( åˆ é™¤èŒƒå›´ ) å®ç°åˆ é™¤åŠŸèƒ½ï¼Œå¸¸ç”¨çš„å¦‚ä¸‹ï¼š\ndw \u0026ndash; åˆ é™¤ä¸€ä¸ªå•è¯ dnw \u0026ndash; åˆ é™¤ n ä¸ªå•è¯ï¼Œ dfa \u0026ndash; åˆ é™¤å…‰æ ‡å¤„åˆ°ä¸‹ä¸€ä¸ª a çš„å­—ç¬¦å¤„ï¼ˆ fa å®šä½å…‰æ ‡åˆ° a å¤„ ï¼‰ dnfa \u0026ndash; åˆ é™¤å…‰æ ‡å¤„åˆ°ç¬¬ n ä¸ª a çš„å­—ç¬¦å¤„ dd \u0026ndash; åˆ é™¤ä¸€æ•´è¡Œ ndd \u0026ndash; åˆ é™¤å…‰æ ‡å¤„å¼€å§‹çš„ n è¡Œ d$ \u0026ndash; åˆ é™¤å…‰æ ‡åˆ°æœ¬è¡Œçš„ç»“å°¾ d0 \u0026ndash; åˆ é™¤æ¸¸æ ‡æ‰€åœ¨å¤„åˆ°è¯¥è¡Œçš„æœ€å‰é¢ä¸€ä¸ªå­—ç¬¦ dH \u0026ndash; åˆ é™¤å±å¹•æ˜¾ç¤ºçš„ç¬¬ä¸€è¡Œæ–‡æœ¬åˆ°å…‰æ ‡æ‰€åœ¨çš„è¡Œ d1G \u0026ndash; åˆ é™¤å…‰æ ‡æ‰€åœ¨åˆ°ç¬¬ä¸€è¡Œçš„æ‰€æœ‰æ•°æ® dG \u0026ndash; åˆ é™¤å…‰æ ‡æ‰€åœ¨åˆ°æœ€åä¸€è¡Œçš„æ‰€æœ‰æ•°æ® x \u0026ndash; åˆ é™¤å…‰æ ‡å½“å‰æ‰€åœ¨çš„å­—ç¬¦**(delete)** X \u0026ndash; åˆ é™¤å…‰æ ‡å‰é¢çš„ä¸€ä¸ªå­—ç¬¦**(backspace)** nx \u0026ndash; å‘åè¿ç»­åˆ é™¤nä¸ªå­—ç¬¦ å¤åˆ¶\ny æ˜¯å¤åˆ¶çš„æ„æ€ï¼Œé€šå¸¸æ­é…ä¸€ä¸ªå­—ç¬¦ï¼ˆå¤åˆ¶èŒƒå›´ï¼‰å®ç°å¤åˆ¶çš„åŠŸèƒ½ï¼Œå¸¸ç”¨çš„å¦‚ä¸‹ï¼š\nyw \u0026ndash; å¤åˆ¶ä¸€ä¸ªå•è¯ï¼Œè¿˜æœ‰ynw yfa \u0026ndash; å¤åˆ¶å…‰æ ‡åˆ°ä¸‹ä¸€ä¸ª a çš„å­—ç¬¦å¤„,è¿˜æœ‰ynfa yy \u0026ndash; å¤åˆ¶ä¸€è¡Œï¼Œè¿˜æœ‰nyy y$ \u0026ndash; å¤åˆ¶å…‰æ ‡åˆ°æœ¬å·çš„ç»“å°¾ yH \u0026ndash; å¤åˆ¶å±å¹•æ˜¾ç¤ºçš„ç¬¬ä¸€è¡Œæ–‡æœ¬åˆ°å…‰æ ‡æ‰€åœ¨çš„è¡Œ y1G \u0026ndash; å¤åˆ¶å…‰æ ‡æ‰€åœ¨è¡Œåˆ°ç¬¬ä¸€è¡Œçš„æ‰€æœ‰æ•°æ® yG \u0026ndash; å¤åˆ¶å…‰æ ‡æ‰€åœ¨è¡Œåˆ°æœ€åä¸€è¡Œçš„æ‰€æœ‰æ•°æ® ç²˜è´´\npæ˜¯é»è´´çš„æ„æ€ï¼Œå½“æ‰§è¡Œå®Œå¤åˆ¶æˆ–è€…é»è´´çš„å‘½ä»¤ä»¥åï¼ŒVIM ä¼šæŠŠæ–‡æœ¬å¯„å­˜èµ·æ¥\np(å°å†™) \u0026ndash; åœ¨å…‰æ ‡åå¼€å§‹é»è´´\nP(å¤§å†™) \u0026ndash; åœ¨å…‰æ ‡å‰å¼€å§‹ç²˜è´´\næ’¤é”€æ“ä½œå’Œæ¢å¤\nu \u0026ndash; æ’¤é”€åˆšæ‰çš„æ“ä½œ ctrl+r \u0026ndash; æ¢å¤æ’¤é”€æ“ä½œ å¤§å°å†™è½¬æ¢\n~ \u0026ndash; å°†å…‰æ ‡ä¸‹çš„å­—æ¯æ”¹å˜å¤§å°å†™ 3~ \u0026ndash; å°†å…‰æ ‡ä½ç½®å¼€å§‹çš„3ä¸ªå­—æ¯æ”¹å˜å…¶å¤§å°å†™ g~~ \u0026ndash; æ”¹å˜å½“å‰è¡Œå­—æ¯çš„å¤§å°å†™ gUU \u0026ndash; å°†å½“å‰è¡Œçš„å­—æ¯æ”¹æˆå¤§å†™ guu \u0026ndash; å°†å½“å‰è¡Œçš„å­—æ¯å…¨æ”¹æˆå°å†™ 3gUU \u0026ndash; å°†ä»å…‰æ ‡å¼€å§‹åˆ°ä¸‹é¢3è¡Œå­—æ¯æ”¹æˆå¤§å†™ gUw \u0026ndash; å°†å…‰æ ‡ä¸‹çš„å•è¯æ”¹æˆå¤§å†™ guw \u0026ndash; å°†å…‰æ ‡ä¸‹çš„å•è¯æ”¹æˆå°å†™ é‡å¤æ“ä½œ\n. \u0026ndash; é‡å¤ä¸Šä¸€ä¸ªæ“ä½œçš„å‘½ä»¤ n\u0026lt;command\u0026gt; \u0026ndash; é‡å¤æŸä¸ªå‘½ä»¤ n æ¬¡ï¼Œå¦‚ 10på¤åˆ¶ 10 æ¬¡ï¼Œ10dd åˆ é™¤åæ¬¡ å…¶ä»–\nJ \u0026ndash; å°†å…‰æ ‡æ‰€åœ¨è¡Œä¸ä¸‹ä¸€è¡Œçš„æ•°æ®ç»“åˆæˆåŒä¸€è¡Œ c \u0026ndash; é‡å¤åˆ é™¤å¤šä¸ªæ•°æ®ï¼Œä¾‹å¦‚å‘ä¸‹åˆ é™¤ 10 è¡Œï¼Œ10cj æ’å…¥æ¨¡å¼ è¿›å…¥æ’å…¥æ¨¡å¼ å‘½ä»¤ è¯´æ˜ i, I i \u0026ndash; ä»ç›®å‰å…‰æ ‡æ‰€åœ¨å¤„è¾“å…¥\nI \u0026ndash; åœ¨ç›®å‰æ‰€åœ¨è¡Œçš„ç¬¬ä¸€ä¸ªéç©ºæ ¼ç¬¦å¤„å¼€å§‹è¾“å…¥ a, A a \u0026ndash; ä»ç›®å‰å…‰æ ‡æ‰€åœ¨çš„ä¸‹ä¸€ä¸ªå­—ç¬¦å¤„å¼€å§‹è¾“å…¥\nA \u0026ndash; ä»å…‰æ ‡æ‰€åœ¨è¡Œçš„æœ€åä¸€ä¸ªå­—ç¬¦å¤„å¼€å§‹è¾“å…¥ o, O o \u0026ndash; åœ¨ç›®å‰å…‰æ ‡æ‰€åœ¨çš„ä¸‹ä¸€è¡Œå¤„è¾“å…¥æ–°çš„ä¸€è¡Œ\nO \u0026ndash; åœ¨ç›®å‰å…‰æ ‡æ‰€åœ¨çš„ä¸Šä¸€è¡Œå¤„è¾“å…¥æ–°çš„ä¸€è¡Œ sï¼ŒS s \u0026ndash; åˆ é™¤å…‰æ ‡æ‰€åœ¨å¤„çš„å­—ç¬¦ç„¶åæ’å…¥éœ€è¦å½•å…¥çš„æ–‡æœ¬\nS \u0026ndash; åˆ é™¤å…‰æ ‡æ‰€åœ¨è¡Œï¼Œåœ¨å½“å‰è¡Œçš„è¡Œé¦–å¼€å§‹æ’å…¥éœ€è¦å½•å…¥çš„æ–‡æœ¬ cw åˆ é™¤ä»å…‰æ ‡å¤„å¼€å§‹åˆ°è¯¥å•è¯ç»“æŸçš„æ‰€æœ‰å­—ç¬¦ï¼Œç„¶åæ’å…¥éœ€è¦å½•å…¥çš„æ–‡æœ¬ æ’å…¥æ¨¡å¼çš„å‘½ä»¤ å¿…é¡»çŸ¥é“çš„ï¼š#æ˜¯vimä¸­çš„æ³¨é‡Šç¬¦å·\nåœ¨è¾“å…¥æ¨¡å¼ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æŒ‰é”®ï¼š\nå­—ç¬¦æŒ‰é”®ä»¥åŠShiftç»„åˆï¼Œè¾“å…¥å­—ç¬¦ ENTERï¼Œå›è½¦é”®ï¼Œæ¢è¡Œ BACK SPACEï¼Œé€€æ ¼é”®ï¼Œåˆ é™¤å…‰æ ‡å‰ä¸€ä¸ªå­—ç¬¦ DELï¼Œåˆ é™¤é”®ï¼Œåˆ é™¤å…‰æ ‡åä¸€ä¸ªå­—ç¬¦ æ–¹å‘é”®ï¼Œåœ¨æ–‡æœ¬ä¸­ç§»åŠ¨å…‰æ ‡ HOME/ENDï¼Œç§»åŠ¨å…‰æ ‡åˆ°è¡Œé¦–/è¡Œå°¾ Page Up/Page Downï¼Œä¸Š/ä¸‹ç¿»é¡µ Insertï¼Œåˆ‡æ¢å…‰æ ‡ä¸ºè¾“å…¥/æ›¿æ¢æ¨¡å¼ï¼Œå…‰æ ‡å°†å˜æˆç«–çº¿/ä¸‹åˆ’çº¿ ESCï¼Œé€€å‡ºè¾“å…¥æ¨¡å¼ï¼Œåˆ‡æ¢åˆ°å‘½ä»¤æ¨¡å¼ æ›¿æ¢æ¨¡å¼ è¿›å…¥æ›¿æ¢æ¨¡å¼ R \u0026ndash; è¿›å…¥æ›¿æ¢æ¨¡å¼ï¼Œæ­¤æ—¶æ–°è¾“å…¥çš„æ–‡æœ¬å°†ç›´æ¥æ›¿ä»£/è¦†ç›–å·²ç»å­˜åœ¨çš„å†…å®¹ï¼Œç‚¹å‡»ESCé”®è¿”å›å¸¸è§„æ¨¡å¼\nr \u0026ndash; è¿›å…¥å•å­—ç¬¦æ›¿æ¢æ¨¡å¼ï¼Œæ­¤æ—¶æ–°è¾“å…¥çš„å­—ç¬¦å°†æ›¿ä»£å…‰æ ‡ä¹‹ä¸‹çš„å½“å‰å­—ç¬¦ï¼Œç„¶åè‡ªåŠ¨è¿”å›åˆ°å¸¸è§„æ¨¡å¼\ngR \u0026ndash; è¿›å…¥è™šæ‹Ÿæ›¿æ¢æ¨¡å¼ï¼Œå…¶ä¸æ›¿æ¢æ¨¡å¼æœ€ä¸»è¦çš„åŒºåˆ«åœ¨äºï¼Œå¯¹\u0026lt;Tab\u0026gt;é”®å’Œæ¢è¡Œç¬¦çš„ä¸åŒå¤„ç†æ–¹å¼\ngr \u0026ndash; è¿›å…¥å•å­—ç¬¦è™šæ‹Ÿæ›¿æ¢æ¨¡å¼ï¼Œåœ¨æ›¿æ¢å…‰æ ‡ä¸‹çš„å½“å‰å­—ç¬¦ä¹‹åï¼Œå°†è‡ªåŠ¨è¿”å›åˆ°å¸¸è§„æ¨¡å¼\nè™šæ‹Ÿæ›¿æ¢æ¨¡å¼ \u0026lt;Tab\u0026gt;é”®\næ›¿æ¢æ¨¡å¼ï¼ˆREPLACEï¼‰ä¸‹ï¼Œåœ¨åŸæœ‰\u0026lt;Tab\u0026gt;é”®å¤„è¾“å…¥å­—æ¯\u0026rsquo;a\u0026rsquo;ï¼Œå°†ç›´æ¥æ›¿ä»£\u0026lt;Tab\u0026gt;é”®æ‰€å ç”¨çš„æ‰€æœ‰ç©ºæ ¼çš„ä½ç½®\nè™šæ‹Ÿæ›¿æ¢æ¨¡å¼ï¼ˆVREPLACEï¼‰ä¸‹ï¼Œåœ¨åŸæœ‰\u0026lt;Tab\u0026gt;é”®å¤„è¾“å…¥å­—æ¯\u0026rsquo;a\u0026rsquo;ï¼Œå°†ä»…ä»…æ›¿ä»£å•ä¸ªç©ºæ ¼\n\u0026lt;NL\u0026gt;æ¢è¡Œ\næ›¿æ¢æ¨¡å¼ï¼ˆREPLACEï¼‰ä¸‹ï¼Œè¾“å…¥\u0026lt;Enter\u0026gt;å›è½¦é”®å°†å¢åŠ æ–°è¡Œï¼š\nè™šæ‹Ÿæ›¿æ¢æ¨¡å¼ï¼ˆVREPLACEï¼‰ä¸‹ï¼Œè¾“å…¥\u0026lt;Enter\u0026gt;å›è½¦é”®å°†ç”¨æ–°è¡Œæ›¿ä»£å½“å‰è¡Œå†…å®¹ï¼ˆå³æ¸…ç©ºå½“å‰è¡Œï¼‰ï¼š\nå‘½ä»¤æ¨¡å¼ åœ¨å‘½ä»¤æ¨¡å¼ä¸‹æŒ‰ä¸‹ :ï¼ˆè‹±æ–‡å†’å·ï¼‰å°±è¿›å…¥äº†åº•çº¿å‘½ä»¤æ¨¡å¼\næœ‰çš„å‘½ä»¤è¦è¾“å…¥ / æ‰§è¡Œ\nå‘½ä»¤æ¨¡å¼å¸¸ç”¨å‘½ä»¤ :w \u0026ndash; ä¿å­˜æ–‡ä»¶ :q \u0026ndash; é€€å‡º Vim ç¼–è¾‘å™¨ :wq \u0026ndash; ä¿å­˜æ–‡ä»¶å¹¶é€€å‡º Vim ç¼–è¾‘å™¨ :q! \u0026ndash; å¼ºåˆ¶é€€å‡ºVimç¼–è¾‘å™¨ï¼Œä¸ä¿å­˜ä¿®æ”¹ :set nu \u0026ndash; æ˜¾ç¤ºè¡Œå· :set nonu \u0026ndash; å–æ¶ˆè¡Œå· :n \u0026ndash; å®šä½åˆ°ç¬¬nè¡Œ :n1,n2d \u0026ndash; åˆ é™¤è¡Œå·n1è‡³n2ä¹‹é—´çš„å†…å®¹ï¼ˆn1å’Œn2éƒ½ä»£è¡¨æ•°å­—ï¼‰ æŒ‰ ESC é”®å¯éšæ—¶é€€å‡ºåº•çº¿å‘½ä»¤æ¨¡å¼\nå‘½ä»¤æ¨¡å¼å¤„ç†æ–‡ä»¶ :w [filename] \u0026ndash; å°†ç¼–è¾‘çš„æ•°æ®å‚¨å­˜æˆå¦ä¸€ä¸ªæ–‡ä»¶ï¼ˆç±»ä¼¼å¦å­˜æ–°æ¡£ï¼‰ :r [filename] \u0026ndash; åœ¨ç¼–è¾‘çš„æ•°æ®ä¸­ï¼Œè¯»å…¥å¦ä¸€ä¸ªæ¡£æ¡ˆçš„æ•°æ®ï¼Œå³å°†filenamçš„å†…å®¹åŠ åˆ°å…‰æ ‡æ‰€åœ¨è¡Œåé¢ :n1,n2 w [filename] \u0026ndash; å°† n1 åˆ° n2 çš„å†…å®¹å‚¨å­˜æˆ filename å‘½ä»¤æ¨¡å¼æœç´¢æ–‡æœ¬ ?{ç›®æ ‡å­—ç¬¦ä¸²} \u0026ndash; å‘å…‰æ ‡ä¹‹ä¸Šå¯»æ‰¾ä¸€ä¸ªç›®æ ‡å­—ç¬¦ä¸² /{ç›®æ ‡å­—ç¬¦ä¸²} \u0026ndash; å‘å…‰æ ‡ä¹‹ä¸‹å¯»æ‰¾ä¸€ä¸ªç›®æ ‡å­—ç¬¦ä¸² n \u0026ndash; é‡å¤å‰ä¸€ä¸ªæœå¯»çš„åŠ¨ä½œ N \u0026ndash; åå‘è¿›è¡Œå‰ä¸€ä¸ªæœå¯»åŠ¨ä½œ :set ic \u0026ndash; ç¼–è¾‘å™¨å°†ä¸ä¼šåŒºåˆ†å¤§å°å†™ :set noic \u0026ndash; ç¼–è¾‘å™¨å°†åŒºåˆ†å¤§å°å†™ å‘½ä»¤æ¨¡å¼æ›¿æ¢æ–‡æœ¬ æ ¼å¼ï¼š:(ä½œç”¨èŒƒå›´)s/{ç›®æ ‡}/{æ›¿æ¢}(/æ›¿æ¢çš„æ ‡å¿—)\næ›¿æ¢çš„ä½œç”¨èŒƒå›´\næ ‡å¿— ä½œç”¨ s å½“å‰è¡Œæ›¿æ¢ %s å…¨æ–‡æ›¿æ¢ n1,n2s æŒ‡å®šè¡Œæ›¿æ¢ï¼Œæ›¿æ¢n1åˆ°n2é—´æ‰€æœ‰è¡Œçš„ç›®æ ‡ï¼Œn2å¯ä»¥æ˜¯$ï¼Œä»£æŒ‡æœ€åä¸€è¡Œ \u0026rsquo;\u0026lt;,\u0026rsquo;\u0026gt;s æŒ‡å®šåŒºåŸŸæ›¿æ¢ æ›¿æ¢çš„æ ‡å¿—\næ ‡å¿— ä½œç”¨ [æ— ] åªæ›¿æ¢ä½œç”¨èŒƒå›´å†…ï¼Œæ¯è¡Œç¬¬ä¸€æ¬¡å‡ºç°çš„ç›®æ ‡ g ä¸€æ¬¡æ€§æ›¿æ¢æ‰€æœ‰ä½œç”¨èŒƒå›´å†…æ‰€æœ‰çš„ç›®æ ‡ i å¤§å°å†™ä¸æ•æ„ŸæŸ¥æ‰¾ I å¤§å°å†™æ•æ„ŸæŸ¥æ‰¾ c å¯¹ä½œç”¨èŒƒå›´å†…çš„ç›®æ ‡é€ä¸ªæ›¿æ¢ï¼Œæ›¿æ¢å‰éœ€è¿›è¡Œç¡®è®¤ æ›¿æ¢æ ‡å¿—å¯ä»¥ä½¿ç”¨å¤šä¸ªï¼Œæ¯”å¦‚/gic\nå‘½ä»¤æ¨¡å¼æ‰§è¡Œlinuxå‘½ä»¤ :![command]\næ‰“å¼€ç»ˆç«¯çª—å£å¹¶æ‰“å°æ‰§è¡Œå‘½ä»¤çš„ç»“æœï¼Œä¸ä¼šæ”¹å˜å½“å‰ç¼–è¾‘çš„æ–‡ä»¶çš„å†…å®¹\nå¯ä»¥ä½¿ç”¨:!bashæ‰“å¼€bash shellå¹¶æ‰§è¡Œå‘½ä»¤\n:!date\t//æ‰§è¡Œ date å‘½ä»¤æ˜¾ç¤ºæ—¶é—´ï¼Œæ‰§è¡Œå®Œå‘½ä»¤ä»¥åæŒ‰ä¸‹é”®ç›˜ä¸Šçš„ Enter å°±ä¼šè¿”å›åˆ°æ–‡ä»¶ :r ![command]\nå°†shellå‘½ä»¤commandçš„ç»“æœæ’å…¥åˆ°å½“å‰è¡Œçš„ä¸‹ä¸€è¡Œ\n:r !date\t//è¯»å–ç³»ç»Ÿæ—¶é—´å¹¶æ’å…¥åˆ°å½“å‰è¡Œçš„ä¸‹ä¸€è¡Œ n1,n2 ![command]\nå°†n1è‡³n2è¡ŒèŒƒå›´å†…çš„å†…å®¹äº¤ç»™å‘½ä»¤commandå¤„ç†ï¼Œå¹¶å°†å¤„ç†ç»“æœæ›¿æ¢èµ·å§‹è¡Œå·å’Œç»“æŸè¡Œå·æŒ‡å®šèŒƒå›´ä¸­çš„å†…å®¹\n:1,4 !sort\t//å°†ç¬¬1è¡Œåˆ°ç¬¬4è¡Œçš„å†…å®¹è¿›è¡Œæ’åº å¯ä»¥åªæŒ‡å®šèµ·å§‹è¡Œ\n:1 !tr [a-z] [A-Z]\t//å°†ç¬¬1è¡Œçš„å°å†™å­—æ¯è½¬ä¸ºå¤§å†™å­—æ¯ å¯ä»¥ç”¨.è¡¨ç¤ºå½“å‰å…‰æ ‡æ‰€åœ¨è¡Œ (è¾“å…¥!!ä¼šå˜æˆ:.!)\n:. !tr [a-z] [A-Z]\t//å°†å½“å‰è¡Œçš„å°å†™è½¬ä¸ºå¤§å†™ n1,n2 w ![command]\nå°†èµ·å§‹è¡Œå·å’Œç»“æŸè¡Œå·æ‰€æŒ‡å®šèŒƒå›´çš„å†…å®¹ä½œä¸ºå‘½ä»¤commandçš„è¾“å…¥ï¼Œä¸ä¼šæ”¹å˜å½“å‰ç¼–è¾‘çš„æ–‡ä»¶çš„å†…å®¹\nå¯ä»¥ä½¿ç”¨:1 w !bashï¼Œå°†ä¼šæŠŠç¬¬1è¡Œçš„å†…å®¹ä½œä¸ºbashå‘½ä»¤æ¥æ‰§è¡Œå¹¶æ˜¾ç¤ºç»“æœï¼Œè€Œä¸”ä¸ä¼šæ”¹å˜å½“å‰ç¼–è¾‘çš„æ–‡ä»¶çš„å†…å®¹\nåŒæ ·çš„ : . w !bashå°†å½“å‰è¡Œçš„å†…å®¹ä½œä¸ºbashå‘½ä»¤æ¥æ‰§è¡Œ\n!!\né‡æ–°æ‰§è¡Œæœ€è¿‘ä¸€æ¬¡è¿è¡Œè¿‡çš„å‘½ä»¤\n:shell / :terminal\næ‰“å¼€å‘½ä»¤ç»ˆç«¯ï¼ˆè¾“å…¥exitç»“æŸå¹¶è¿”å›vimï¼‰\nä½¿ç”¨:versionå‘½ä»¤ï¼ˆæŒ‰qé€€å‡ºï¼‰ï¼ŒæŸ¥çœ‹æ˜¯å¦åŒ…å«+terminalå…³é”®å­—ï¼Œä»¥ç¡®è®¤æ˜¯å¦èƒ½ä½¿ç”¨ :terminal\nå‘½ä»¤æ¨¡å¼å®šä¹‰å¿«æ·é”® åŸºæœ¬æ ¼å¼\næ¨¡å¼ åŸºæœ¬æ ¼å¼ æè¿° æ™®é€šæ¨¡å¼ :nmap \u0026lt;key\u0026gt; \u0026lt;command\u0026gt; ä»…åœ¨æ™®é€šæ¨¡å¼ä¸‹æœ‰æ•ˆï¼Œå®šä¹‰æ™®é€šæ¨¡å¼ä¸‹çš„å¿«æ·é”® æ’å…¥æ¨¡å¼ :imap \u0026lt;key\u0026gt; \u0026lt;command\u0026gt; ç”¨äºå®šä¹‰æ’å…¥æ¨¡å¼ä¸‹çš„å¿«æ·é”® å¯è§†æ¨¡å¼ :vmap \u0026lt;key\u0026gt; \u0026lt;command\u0026gt; ç”¨äºå®šä¹‰å¯è§†æ¨¡å¼ä¸‹çš„å¿«æ·é”® å‘½ä»¤è¡Œæ¨¡å¼ :cmap \u0026lt;key\u0026gt; \u0026lt;command\u0026gt; ç”¨äºå®šä¹‰å‘½ä»¤è¡Œæ¨¡å¼ä¸‹çš„å¿«æ·é”® æ€»ä½“æ˜ å°„ :map \u0026lt;key\u0026gt; \u0026lt;command\u0026gt; å®šä¹‰å¿«æ·é”®ï¼Œé€‚ç”¨äºæ™®é€šã€å¯è§†ã€æ“ä½œå’Œé€‰æ‹©æ¨¡å¼ï¼Œä½†ä¸å»ºè®®ç”¨äºæœ‰å†²çªçš„æƒ…å†µã€‚ æ€»ä½“ä¸å¯é€’å½’æ˜ å°„ :noremap \u0026lt;key\u0026gt; \u0026lt;command\u0026gt; ç±»ä¼¼:mapï¼Œä½†æ˜¯ä¸ä¼šé€’å½’åœ°æ‰©å±•å·²ç»å­˜åœ¨çš„æ˜ å°„ï¼Œé¿å…æ„å¤–è¡Œä¸ºã€‚ æ™®é€šæ¨¡å¼ä¸å¯é€’å½’ :nnoremap \u0026lt;key\u0026gt; \u0026lt;command\u0026gt; åœ¨æ™®é€šæ¨¡å¼ä¸‹ä½¿ç”¨ï¼Œé¿å…é€’å½’æ˜ å°„ æ’å…¥æ¨¡å¼ä¸å¯é€’å½’ :inoremap \u0026lt;key\u0026gt; \u0026lt;command\u0026gt; åœ¨æ’å…¥æ¨¡å¼ä¸‹ä½¿ç”¨ï¼Œé¿å…é€’å½’æ˜ å°„ å¯è§†æ¨¡å¼ä¸å¯é€’å½’ :vnoremap \u0026lt;key\u0026gt; \u0026lt;command\u0026gt; åœ¨å¯è§†æ¨¡å¼ä¸‹ä½¿ç”¨ï¼Œé¿å…é€’å½’æ˜ å°„ ç¼©å†™ :ab [ç¼©å†™] [å®Œæ•´æ–‡æœ¬] è¾“å…¥ç¼©å†™åç©ºæ ¼ï¼Œè‡ªåŠ¨æ‰©å±•ä¸ºå®Œæ•´æ–‡æœ¬ã€‚ä¾‹å¦‚ï¼š:ab email xxxx@gmail.com ä»€ä¹ˆæ˜¯\u0026lt;key\u0026gt;ï¼Ÿ\n\u0026lt;key\u0026gt; å¯¹åº”çš„æ˜¯ ^[A-Z] ï¼Œ å®šä¹‰å¿«æ·é”®æ—¶ä½¿ç”¨ctrl+v+[a-z]ï¼Œä½¿ç”¨å¿«æ·é”®æ—¶ç”¨å¯¹åº”çš„ctrl+[a-z]\nä»€ä¹ˆæ˜¯é€’å½’æ˜ å°„ï¼Ÿ\n:nmap j gg :nmap Q j å¦‚æœå·²ç»åšäº†ä»¥ä¸Šæ˜ å°„ï¼Œé‚£ä¹ˆæŒ‰ä¸‹Qï¼Œæ‰§è¡Œçš„å°†æ˜¯ggè€Œä¸æ˜¯j\nä¸ºäº†é¿å…ä»¥ä¸Šé—®é¢˜ï¼Œåº”è¯¥è¿™æ ·å®šä¹‰ï¼š\n:nnoremap j gg :nnoremap Q j å‡ ä¸ªä¾‹å­\n:map ^D Ahelloworld\u0026lt;ESC\u0026gt; åœ¨æ–‡ä»¶çš„å…‰æ ‡æ‰€åœ¨è¡Œçš„è¡Œå°¾ï¼Œæ·»åŠ  helloworld å­—ç¬¦ä¸²ï¼ŒæŒ‰ä½ç»„åˆé”® ctrl + d å°±ä¼šæ‰§è¡Œæ“ä½œ\n:map ^M I#\u0026lt;ESC\u0026gt; åœ¨æ–‡ä»¶å…‰æ ‡å¤„æ‰€åœ¨è¡Œçš„è¡Œé¦–æ’å…¥#ï¼ŒæŒ‰ä½ç»„åˆé”® ctrl + m å°±ä¼šæ‰§è¡Œæ“ä½œ\n:ab email xxxx@gmail.com è¾“å…¥ email+ç©ºæ ¼ ä¼šæŠŠè¾“å…¥çš„ email è‡ªåŠ¨æ›¿æ¢æˆ xxxx @gmail.com\nå¯è§†åŒ–æ¨¡å¼ è¿›å…¥å¯è§†åŒ–æ¨¡å¼ å¯è§†åŒ–æ¨¡å¼å¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸‰ç§ï¼š\nv \u0026ndash; å­—ç¬¦å¯è§†åŒ–æ¨¡å¼ï¼Œæ–‡æœ¬é€‰æ‹©æ˜¯ä»¥å­—ç¬¦ä¸ºå•ä½çš„ V \u0026ndash; è¡Œå¯è§†åŒ–æ¨¡å¼ï¼Œæ–‡æœ¬é€‰æ‹©æ˜¯ä»¥è¡Œä¸ºå•ä½çš„ ctrl-V \u0026ndash; å—å¯è§†åŒ–æ¨¡å¼ï¼Œå¯ä»¥é€‰æ‹©ä¸€ä¸ªçŸ©å½¢å†…çš„æ–‡æœ¬ åœ¨ä»»æ„å¯è§†åŒ–æ¨¡å¼ä¸‹ä½¿ç”¨ä»¥ä¸Šå‘½ä»¤ï¼Œå°†ä¼šåˆ‡æ¢åˆ°å¯¹åº”æ¨¡å¼\nåœ¨ä»»æ„å¯è§†åŒ–æ¨¡å¼ä¸‹ä½¿ç”¨Iï¼ˆå¤§å†™iï¼‰ï¼Œå°†ä¼šåˆ‡æ¢åˆ°æ’å…¥æ¨¡å¼\ngv \u0026ndash; è¿›å…¥ä¸Šä¸€æ¬¡çš„å¯è§†åŒ–æ¨¡å¼ï¼Œå¹¶é€‰ä¸­å½“æ—¶é€‰ä¸­çš„æ–‡æœ¬**ï¼ˆå‘½ä»¤æ¨¡å¼ä¹Ÿèƒ½ç”¨æ­¤å‘½ä»¤ï¼‰** æŒ‰ ESC é”®å¯éšæ—¶é€€å‡ºå¯è§†åŒ–æ¨¡å¼\nå¯è§†åŒ–æ¨¡å¼ä¸‹ç§»åŠ¨å…‰æ ‡ å‘½ä»¤æ¨¡å¼ä¸‹çš„å…‰æ ‡ç§»åŠ¨æ–¹æ³•ä»ç„¶é€‚ç”¨\nè¿›å…¥ä»»æ„å¯è§†åŒ–æ¨¡å¼ï¼Œç§»åŠ¨å…‰æ ‡ï¼Œä¼šä»å½“å‰ä½ç½®å¼€å§‹ï¼Œä»¥ç›¸åº”æ–¹å¼é«˜äº®é€‰ä¸­å­—ç¬¦\no \u0026ndash; ç§»åŠ¨å…‰æ ‡åˆ°å·²ç»é€‰å–çš„æ–‡æœ¬çš„ç»“å°¾å¤„æˆ–è€…å¼€å¤´å¤„ï¼ˆæ ¹æ®ç°åœ¨å…‰æ ‡æ‰€åœ¨ä½ç½®ç¡®å®šï¼‰\nå¦‚æœæ˜¯å—å¯è§†åŒ–æ¨¡å¼ï¼Œç§»åŠ¨å…‰æ ‡åˆ°å¯¹è§’å¤„ O \u0026ndash; åœ¨å—å¯è§†åŒ–æ¨¡å¼ä¸‹ï¼Œç§»åŠ¨å…‰æ ‡åˆ°åŒä¸€è¡Œçš„ç»“å°¾å¤„æˆ–è€…å¼€å¤´å¤„\nå¯è§†åŒ–æ¨¡å¼ä¸‹ç¼–è¾‘ å¤§éƒ¨åˆ†å‘½ä»¤æ¨¡å¼å¯¹å†…å®¹æ“ä½œçš„å‘½ä»¤éƒ½èƒ½åœ¨å¯è§†åŒ–æ¨¡å¼ä¸‹ä½¿ç”¨ï¼Œæ¯”å¦‚ï¼š\nd \u0026ndash; åˆ é™¤é«˜äº®æ–‡æœ¬\nD \u0026ndash; åˆ é™¤ä¸€æ•´è¡Œæ–‡æœ¬ï¼Œå³ä½¿åªæœ‰ä¸€éƒ¨åˆ†è¢«é€‰ä¸­äº†\nc \u0026ndash; åˆ é™¤é«˜äº®æ–‡æœ¬å¹¶è¿›å…¥æ’å…¥æ¨¡å¼\ny \u0026ndash; å¤åˆ¶é«˜äº®æ–‡æœ¬\nY \u0026ndash; å¤åˆ¶ä¸€æ•´è¡Œæ–‡æœ¬\np \u0026ndash; é»è´´å¤åˆ¶çš„æ–‡æœ¬\n~ \u0026ndash; å¯¹é«˜äº®æ–‡æœ¬è¿›è¡Œå¤§å°å†™è½¬æ¢\n\u0026gt; / \u0026lt; \u0026ndash; å¯¹é«˜äº®æ–‡æœ¬å¢åŠ /å‡å°‘ç¼©è¿›ï¼Œå¹…åº¦ä¸ºä¸€ä¸ªTabé”®\nr \u0026ndash; è¾“å…¥å•ä¸ªå­—ç¬¦ï¼ŒæŠŠé«˜äº®æ–‡æœ¬æ‰€æœ‰å­—ç¬¦é€ä¸ªæ›¿æ¢ä¸ºè¯¥å­—ç¬¦\nvimå®å½•åˆ¶ å®å½•åˆ¶çš„å½•åˆ¶æ“ä½œ å‡è®¾éœ€è¦å°†æ–‡æœ¬çš„æ¯ä¸€è¡Œçš„è¡Œé¦–æ’å…¥å…¥ä¸€ä¸ª tab é”®\nå…ˆå°†å…‰æ ‡ç§»åŠ¨åˆ°ç¬¬ä¸€è¡Œï¼Œåœ¨æ™®é€šæ¨¡å¼ä¸‹æŒ‰ä¸‹ q é”®ï¼ˆå®å½•åˆ¶æ˜¯ q é”®å¯åŠ¨çš„) æŒ‰ä¸€ä¸ª a ï¼ˆå­—æ¯éšæ„ï¼‰,è¡¨ç¤ºè¯¥å®æ³¨å†Œä¸º a æŒ‰ä¸‹ I åœ¨è¡Œé¦–æ’å…¥ä¸€ä¸ª tab é”® æŒ‰ä¸‹ESCé€€å‡ºç¼–è¾‘æ¨¡å¼ æŒ‰ä¸‹ j å°†å…‰æ ‡ç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œè¡Œé¦– æŒ‰ä¸‹ q é”®å®Œæˆå½•åˆ¶æ“ä½œï¼ˆå®å½•åˆ¶æ˜¯ q é”®ç»“æŸçš„ï¼‰ ä¸»è¦æ­¥éª¤ï¼šq(å¼€å§‹ï¼‰-\u0026gt; a(å‘½å) -\u0026gt; æ“ä½œ -\u0026gt; q(ç»“æŸ)\nå®å½•åˆ¶çš„ä½¿ç”¨ @a \u0026ndash; æ‰§è¡Œaå®å½•åˆ¶çš„ä¸€ç³»åˆ—åŠ¨ä½œï¼Œæ³¨æ„aæ˜¯å½•åˆ¶çš„æ“ä½œåç§° n@a \u0026ndash; æ‰§è¡Œnæ¬¡aå® @@ \u0026ndash; é‡å¤ä¸Šä¸€æ¬¡ä½¿ç”¨çš„å®æ“ä½œ VIMç›¸å…³æ¡ˆä¾‹ VIMç¼“å­˜æ³„éœ² vimäº¤æ¢æ–‡ä»¶ åœ¨ä½¿ç”¨vimæ—¶ä¼šåˆ›å»ºä¸´æ—¶ç¼“å­˜æ–‡ä»¶ï¼Œå…³é—­vimæ—¶ç¼“å­˜æ–‡ä»¶åˆ™ä¼šè¢«åˆ é™¤ï¼Œå½“vimå¼‚å¸¸é€€å‡ºåï¼Œå› ä¸ºæœªå¤„ç†ç¼“å­˜æ–‡ä»¶ï¼Œå¯¼è‡´å¯ä»¥é€šè¿‡ç¼“å­˜æ–‡ä»¶æ¢å¤åŸå§‹æ–‡ä»¶å†…å®¹\nç°åœ¨ç”¨vimæ‰“å¼€æ–‡ä»¶1.txtï¼Œç›´æ¥å…³é—­ç»ˆç«¯ï¼Œå†æ¬¡è¯•å›¾ç”¨vimæ‰“å¼€1.txtæ—¶ä¼šå‡ºç°å¦‚ä¸‹æç¤ºï¼š\né€‰æ‹©æ¢å¤ï¼ˆRï¼‰ï¼Œå¼¹å‡ºå¦‚ä¸‹æç¤ºï¼š\nVim ä¸­ï¼Œå½“å¤„ç†åŒä¸€ä¸ªæ–‡ä»¶å‘ç”Ÿå¤šæ¬¡å¼‚å¸¸é€€å‡ºæ—¶ï¼Œå®ƒä¼šä¾æ¬¡ä½¿ç”¨ä¸åŒçš„åç¼€æ¥å‘½åäº¤æ¢æ–‡ä»¶ã€‚æŒ‰ç…§ä½ ç»™å‡ºçš„æ¨¡å¼ï¼Œé¦–æ¬¡äº§ç”Ÿçš„äº¤æ¢æ–‡ä»¶åä¸º .index.php.swpï¼Œå†æ¬¡æ„å¤–é€€å‡ºåäº§ç”Ÿ .index.php.swoï¼Œç¬¬ä¸‰æ¬¡äº§ç”Ÿçš„äº¤æ¢æ–‡ä»¶ä¸º .index.php.swnã€‚\nä»ç¬¬å››æ¬¡å¼€å§‹åŠä¹‹åçš„äº¤æ¢æ–‡ä»¶ï¼ŒVim ä¼šå¾ªç¯ä½¿ç”¨è¿™ä¸‰ä¸ªåç¼€ï¼ˆ.swp, .swo, .swnï¼‰\nä¾‹é¢˜ ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è·å–ç½‘ç«™ä¸­çš„vimæ–‡ä»¶ç¼“å­˜ï¼š\nwget http://xxx/.index.php.swp -P /home //-PæŒ‡å®šä¸‹è½½ä½ç½® ä½¿ç”¨vim -ræ¢å¤æ–‡ä»¶å¹¶æ‰“å¼€:\nvim -r .index.php.swp è·å–åˆ°ç½‘ç«™æºç åï¼Œè¿›è¡Œä»£ç å®¡è®¡å³å¯\n","date":"2025-05-08T15:28:02+08:00","permalink":"https://blog.928330.xyz/p/vim%E7%BC%96%E8%BE%91%E5%99%A8%E5%AE%8C%E5%85%A8%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/","title":"Vimç¼–è¾‘å™¨å®Œå…¨ä½¿ç”¨æ•™ç¨‹"}]