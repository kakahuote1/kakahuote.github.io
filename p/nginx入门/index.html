<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="ËøòÊòØapacheÂ•ΩÁî®">
<title>NginxÂÖ•Èó®</title>

<link rel='canonical' href='https://blog.928330.xyz/p/nginx%E5%85%A5%E9%97%A8/'>

<link rel="stylesheet" href="/scss/style.min.e3073096d25e5a3d746191d039ec1146fd3a3920d63ab62f3cacf37f04c37a53.css"><meta property='og:title' content="NginxÂÖ•Èó®">
<meta property='og:description' content="ËøòÊòØapacheÂ•ΩÁî®">
<meta property='og:url' content='https://blog.928330.xyz/p/nginx%E5%85%A5%E9%97%A8/'>
<meta property='og:site_name' content='kakahuote'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='web' /><meta property='article:tag' content='linux' /><meta property='article:published_time' content='2025-07-24T22:15:30&#43;08:00'/><meta property='article:modified_time' content='2025-07-26T18:10:14&#43;08:00'/>
<meta name="twitter:title" content="NginxÂÖ•Èó®">
<meta name="twitter:description" content="ËøòÊòØapacheÂ•ΩÁî®">
    <link rel="shortcut icon" href="/favicon.ico" />
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Âä†ËΩΩÂä®Áîª</title>
    <style>
        .loading {
            position: fixed;
            display: flex;
            flex-direction: column;  
            justify-content: center;
            align-items: center;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 99;
            background-color: #f5f5fa;
            transition: transform 1.5s, opacity 1.5s;
            transform: scale(1);
            opacity: 1;
        }

        .loader-bars {
            display: flex;  
            align-items: flex-end;  
            gap: 3px;  
            margin-bottom: 20px;  
        }

        .bar {
            height: 5px;
            width: 12px;
            animation-duration: 0.45s;
            animation-name: changeHeight;
            animation-iteration-count: infinite;
            animation-direction: alternate;
        }

        .red {
            background-color: #E50000;
            box-shadow: 1px 1px 10px #E50000;
            animation-delay: 0.10s;
        }

        .orange {
            background-color: #FF8D00;
            box-shadow: 1px 1px 10px #FF8D00;
            animation-delay: 0.20s;
        }

        .yellow {
            background-color: #FFEE00;
            box-shadow: 1px 1px 10px #FFEE00;
            animation-delay: 0.25s;
        }

        .green {
            background-color: #008121;
            box-shadow: 1px 1px 10px #008121;
            animation-delay: 0.30s;
        }

        .blue {
            background-color: #004CFF;
            box-shadow: 1px 1px 10px #004CFF;
            animation-delay: 0.35s;
        }

        .violet {
            background-color: #760188;
            box-shadow: 1px 1px 10px #760188;
            animation-delay: 0.40s;
        }

        @keyframes changeHeight {
            from {
                height: 5px;
            }

            to {
                height: 40px;
            }
        }

        .scaleAndFadeout {
            transform: scale(1.5);
            opacity: 0;
        }

         
        .loading-text {
            color: #333;  
            font-size: 16px;  
        }
    </style>
</head>
<body>

    <div class="loading">
        <div class="loader-bars">
            <div class="red bar"></div>
            <div class="orange bar"></div>
            <div class="yellow bar"></div>
            <div class="green bar"></div>
            <div class="blue bar"></div>
            <div class="violet bar"></div>
        </div>
        <div class="loading-text">loading...</div>
    </div>

    <script>
        function initLoading() {
            let loading = document.querySelector(".loading");
            document.addEventListener('DOMContentLoaded', function() {
                setTimeout(() => {
                    loading.classList.add("scaleAndFadeout");
                    setTimeout(() => {
                        loading.style.display = "none";
                    }, 1500);
                }, 50);
            });
        }

        initLoading();
    </script>

</body>
</html>
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="ÂàáÊç¢ËèúÂçï">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img class="site-logo original-logo" src="/img/avatar_hu_4804467f7cda2058.png" width="300" height="300" loading="lazy" alt="ÂéüÂßãÂ§¥ÂÉè">
                    
                    
                        
                        <img class="site-logo hover-logo" src="/img/avatar-hover_hu_f231304c77e946da.png" width="300" height="300" loading="lazy" alt="ÊÇ¨ÂÅúÂ§¥ÂÉè">
                    
                
                </a>
                
                    <span class="emoji">ü§ù</span>
                
            </figure>
            
        

        <div class="site-meta">
            <h1 class="site-name"><a href="/">kakahuote</a></h1>
            <h2 class="site-description">Èù°‰∏çÊúâÂàùÔºåÈ≤úÂÖãÊúâÁªà</h2>
        </div>
    </header>

    <ol class="menu-social">
                <li>
                    <a
                        href='https://bilibili.com'
                        target="_blank"
                        title="bilibili"
                        rel="me"
                    >
                        
                        
                            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-brand-bilibili"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 10a4 4 0 0 1 4 -4h10a4 4 0 0 1 4 4v6a4 4 0 0 1 -4 4h-10a4 4 0 0 1 -4 -4v-6z" /><path d="M8 3l2 3" /><path d="M16 3l-2 3" /><path d="M9 13v-2" /><path d="M15 11v2" /></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a
                        href='https://github.com'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            </ol>

    <ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>‰∏ªÈ°µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>ÂΩíÊ°£</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>ÊêúÁ¥¢</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%8F%8B%E9%93%BE/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>ÂèãÈìæ</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>ÊöóËâ≤Ê®°Âºè</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>
    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ÁõÆÂΩï</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#‰ªÄ‰πàÊòØnginx">‰ªÄ‰πàÊòØNginx</a></li>
    <li><a href="#‰∏ªË¶ÅÁî®Ê≥ï">‰∏ªË¶ÅÁî®Ê≥ï</a>
      <ol>
        <li><a href="#webÊúçÂä°Âô®">WebÊúçÂä°Âô®</a></li>
        <li><a href="#ÂèçÂêë‰ª£ÁêÜÊúçÂä°Âô®">ÂèçÂêë‰ª£ÁêÜÊúçÂä°Âô®</a></li>
        <li><a href="#Ë¥üËΩΩÂùáË°°Âô®">Ë¥üËΩΩÂùáË°°Âô®</a></li>
        <li><a href="#apiÁΩëÂÖ≥">APIÁΩëÂÖ≥</a></li>
      </ol>
    </li>
    <li><a href="#ÁõÆÂΩïÁªìÊûÑ">ÁõÆÂΩïÁªìÊûÑ</a></li>
    <li><a href="#Â∏∏Áî®ÂëΩ‰ª§">Â∏∏Áî®ÂëΩ‰ª§</a>
      <ol>
        <li><a href="#Êü•ÁúãÁâàÊú¨">Êü•ÁúãÁâàÊú¨</a></li>
        <li><a href="#Ê£ÄÊü•ÈÖçÁΩÆÊñá‰ª∂ËØ≠Ê≥ï">Ê£ÄÊü•ÈÖçÁΩÆÊñá‰ª∂ËØ≠Ê≥ï</a></li>
        <li><a href="#ÈáçÊñ∞Âä†ËΩΩÈÖçÁΩÆÊñá‰ª∂">ÈáçÊñ∞Âä†ËΩΩÈÖçÁΩÆÊñá‰ª∂</a></li>
        <li><a href="#Âº∫Âà∂ÂÅúÊ≠¢">Âº∫Âà∂ÂÅúÊ≠¢</a></li>
      </ol>
    </li>
    <li><a href="#ÈÖçÁΩÆÊñá‰ª∂">ÈÖçÁΩÆÊñá‰ª∂</a>
      <ol>
        <li><a href="#ÂÖ®Â±ÄÂùó">ÂÖ®Â±ÄÂùó</a></li>
        <li><a href="#eventsÂùó">eventsÂùó</a></li>
        <li><a href="#httpÂùó">httpÂùó</a></li>
        <li><a href="#serverÂùó">serverÂùó</a></li>
        <li><a href="#locationÂùó">locationÂùó</a></li>
      </ol>
    </li>
    <li><a href="#Ê†∏ÂøÉÂäüËÉΩ--webÊúçÂä°">Ê†∏ÂøÉÂäüËÉΩ ‚Äî‚Äî WebÊúçÂä°</a>
      <ol>
        <li><a href="#ÈÉ®ÁΩ≤ÈùôÊÄÅËµÑÊ∫ê">ÈÉ®ÁΩ≤ÈùôÊÄÅËµÑÊ∫ê</a></li>
        <li><a href="#ÈÖçÁΩÆhttpsÊúçÂä°">ÈÖçÁΩÆHTTPSÊúçÂä°</a></li>
      </ol>
    </li>
    <li><a href="#Ê†∏ÂøÉÂäüËÉΩ--ÂèçÂêë‰ª£ÁêÜ">Ê†∏ÂøÉÂäüËÉΩ ‚Äî‚Äî ÂèçÂêë‰ª£ÁêÜ</a></li>
    <li><a href="#Ê†∏ÂøÉÂäüËÉΩ--Ë¥üËΩΩÂùáË°°">Ê†∏ÂøÉÂäüËÉΩ ‚Äî‚Äî Ë¥üËΩΩÂùáË°°</a>
      <ol>
        <li><a href="#httpË¥üËΩΩÂùáË°°ÈÖçÁΩÆ">HTTPË¥üËΩΩÂùáË°°ÈÖçÁΩÆ</a>
          <ol>
            <li><a href="#Ë¥üËΩΩÂùáË°°Á≠ñÁï•">Ë¥üËΩΩÂùáË°°Á≠ñÁï•</a></li>
            <li><a href="#ËΩÆËØ¢">ËΩÆËØ¢</a></li>
            <li><a href="#ÊùÉÈáçweight">ÊùÉÈáçÔºàweightÔºâ</a></li>
            <li><a href="#ipÂìàÂ∏åip_hash">IPÂìàÂ∏åÔºàip_hashÔºâ</a></li>
            <li><a href="#ÊúÄÂ∞ëËøûÊé•-least_conn">ÊúÄÂ∞ëËøûÊé• (least_conn)</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#Ê†∏ÂøÉÂäüËÉΩ--tcpudp‰ª£ÁêÜ">Ê†∏ÂøÉÂäüËÉΩ ‚Äî‚Äî TCP/UDP‰ª£ÁêÜ</a></li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/" >
                Â∑•ÂÖ∑‰ΩøÁî®
            </a>
        
    </header>
    

    <div class="article-title-wrapper">


        <h2 class="article-title">
            <a href="/p/nginx%E5%85%A5%E9%97%A8/">NginxÂÖ•Èó®</a>
        </h2>
        
        <h3 class="article-subtitle">
            ËøòÊòØapacheÂ•ΩÁî®
        </h3>
        

    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">
                    ÂèëÂ∏ÉÊó∂Èó¥Ôºö2025-07-24</time>
            </div>
        

        

        <div class="article-lastmod">
               <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



               <time>
                   Êõ¥Êñ∞Êó∂Èó¥Ôºö2025-07-26
               </time>
           </div>
        <div>
            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-eye"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" /><path d="M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6" /></svg>
            <time class="article-time--published">
                ÊµèËßàÈáèÔºö<span class="waline-pageview-count" data-waline-pageview-count="0">0</span>
            </time>
        </div>
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h1 id="‰ªÄ‰πàÊòØnginx">‰ªÄ‰πàÊòØNginx
</h1><p>NginxÔºàÂèëÈü≥‰∏∫ &ldquo;engine-X&rdquo;ÔºâÊòØ‰∏ÄÊ¨æÂºÄÊ∫êÁöÑ„ÄÅÈ´òÊÄßËÉΩÁöÑHTTPÂíåÂèçÂêë‰ª£ÁêÜÊúçÂä°Âô®</p>
<p>ÂÆÉÁöÑËÆæËÆ°Âì≤Â≠¶ÊòØÊèê‰æõÊûÅËá¥ÁöÑÊÄßËÉΩ„ÄÅÁ®≥ÂÆöÊÄß„ÄÅ‰∏∞ÂØåÁöÑÂäüËÉΩ„ÄÅÁÆÄÂçïÁöÑÈÖçÁΩÆÂíå‰ΩéËµÑÊ∫êÊ∂àËÄóÔºåÁúã‰∏äÂéªÂ∞±ÂæàÂéâÂÆ≥</p>
<p>NginxÈááÁî®‰∫ã‰ª∂È©±Âä®ÁöÑÂºÇÊ≠•ÈùûÈòªÂ°ûÊû∂ÊûÑ</p>
<p>‰∏é‰º†ÁªüÁöÑApacheÁ≠âÊúçÂä°Âô®‰∏∫ÊØè‰∏™ËØ∑Ê±ÇÂàõÂª∫‰∏Ä‰∏™Êñ∞ËøõÁ®ãÊàñÁ∫øÁ®ã‰∏çÂêåÔºåNginx‰ΩøÁî®‰∏Ä‰∏™‰∏ªËøõÁ®ãÂíåÂ∞ëÊï∞Âá†‰∏™Â∑•‰ΩúËøõÁ®ã</p>
<p>‰∏ªËøõÁ®ãË¥üË¥£ËØªÂèñÈÖçÁΩÆ„ÄÅÁÆ°ÁêÜÂ∑•‰ΩúËøõÁ®ãÔºåËÄåÁúüÊ≠£Â§ÑÁêÜÁΩëÁªúËØ∑Ê±ÇÁöÑÊòØÂ∑•‰ΩúËøõÁ®ã</p>
<p>ÊØè‰∏™Â∑•‰ΩúËøõÁ®ãÈÉΩÊòØÂçïÁ∫øÁ®ãÁöÑÔºåÂºÇÊ≠•Âú∞Â§ÑÁêÜÊàêÂçÉ‰∏ä‰∏á‰∏™Âπ∂ÂèëËøûÊé•</p>
<p>ËøôÁßçÊ®°ÂûãÈÅøÂÖç‰∫ÜÂàõÂª∫ÂíåÈîÄÊØÅËøõÁ®ã/Á∫øÁ®ãÁöÑÂºÄÈîÄ‰ª•Âèä‰∏ä‰∏ãÊñáÂàáÊç¢ÁöÑÊàêÊú¨ÔºåÂõ†Ê≠§ËÉΩ‰ª•ÊûÅ‰ΩéÁöÑÂÜÖÂ≠òÂç†Áî®Â∫îÂØπÈ´òÂπ∂ÂèëÂú∫ÊôØ</p>
<p><strong>Êé•‰∏ãÊù•Êàë‰ª¨‰ºö‰ªãÁªçÁõ¥Êé•ÂÆâË£ÖÁöÑNginxÔºå‰πü‰ºöÈ°∫Â∏¶‰ªãÁªçÈÄöËøáDockerÂÆπÂô®ÂêØÂä®ÁöÑNginx</strong></p>
<p><strong>‰∫åËÄÖÂú®Ê¥ªÂä®Áä∂ÊÄÅÊéßÂà∂ÂíåÊó•ÂøóÊñπÈù¢Êúâ‰∫õÂå∫Âà´ÔºåÈÖçÁΩÆÂü∫Êú¨‰∏ÄËá¥</strong></p>
<h1 id="‰∏ªË¶ÅÁî®Ê≥ï">‰∏ªË¶ÅÁî®Ê≥ï
</h1><h2 id="webÊúçÂä°Âô®">WebÊúçÂä°Âô®
</h2><p>Áõ¥Êé•ÂêëÂÆ¢Êà∑Á´ØÊèê‰æõÈùôÊÄÅËµÑÊ∫êÔºàÂ¶ÇHTML„ÄÅCSS„ÄÅÂõæÁâáÔºâÁöÑÊúçÂä°</p>
<p>Áî±‰∫éÂÖ∂È´òÊïàÁöÑÊñá‰ª∂ËØªÂèñÂíåÁΩëÁªú‰º†ËæìËÉΩÂäõÔºåNginxÂú®Â§ÑÁêÜÈùôÊÄÅÂÜÖÂÆπÊñπÈù¢Ë°®Áé∞ÊûÅÂÖ∂Âá∫Ëâ≤,<del>ÈÄÇÂêàÊê≠Âª∫ÂçöÂÆ¢</del></p>
<h2 id="ÂèçÂêë‰ª£ÁêÜÊúçÂä°Âô®">ÂèçÂêë‰ª£ÁêÜÊúçÂä°Âô®
</h2><p>ÂÆÉÊòØÊòØÂÆ¢Êà∑Á´ØÂíåÂêéÁ´ØÁúüÂÆûÊúçÂä°Âô®‰πãÈó¥ÁöÑ‰∏≠Èó¥‰∫∫</p>
<p>ÂÆÉÂèØ‰ª•Â∞ÜÂÆ¢Êà∑Á´ØËØ∑Ê±ÇËΩ¨ÂèëÂà∞ÂêéÁ´ØÁöÑÂ∫îÁî®ÊúçÂä°Âô®ÔºàÂ¶ÇNode.js„ÄÅJava„ÄÅPythonÂ∫îÁî®ÔºâÔºåÂπ∂Â∞ÜÂêéÁ´ØÂìçÂ∫îËøîÂõûÁªôÂÆ¢Êà∑Á´ØÔºå‰ªéËÄåÂÆûÁé∞ËØ∑Ê±ÇÂàÜÂèë„ÄÅË¥üËΩΩÂùáË°°ÔºåÂπ∂ËÉΩÈöêËóèÂêéÁ´ØÊúçÂä°ÁöÑÁúüÂÆûIPÂíåÁ´ØÂè£ÔºåÊèêÂçáÂÆâÂÖ®ÊÄß</p>
<h2 id="Ë¥üËΩΩÂùáË°°Âô®">Ë¥üËΩΩÂùáË°°Âô®
</h2><p>ÂΩìÂêéÁ´ØÊúâÂ§öÂè∞ÊúçÂä°Âô®Êó∂ÔºåNginxÂèØ‰ª•Ê†πÊçÆÈ¢ÑËÆæÁöÑÁ≠ñÁï•Â∞ÜËØ∑Ê±ÇÂàÜÂèëÂà∞Ëøô‰∫õÊúçÂä°Âô®‰∏äÔºå‰ªéËÄåÂàÜÊãÖÂçï‰∏ÄÊúçÂä°Âô®ÁöÑÂéãÂäõ</p>
<h2 id="apiÁΩëÂÖ≥">APIÁΩëÂÖ≥
</h2><p>Âú®ÂæÆÊúçÂä°Êû∂ÊûÑ‰∏≠ÔºåNginxÂèØ‰ª•‰Ωú‰∏∫ÊâÄÊúâAPIËØ∑Ê±ÇÁöÑÁªü‰∏ÄÂÖ•Âè£ÔºåÊâßË°åÂ¶ÇË∫´‰ªΩÈ™åËØÅ„ÄÅÈÄüÁéáÈôêÂà∂„ÄÅÊó•ÂøóËÆ∞ÂΩï„ÄÅÊúçÂä°ÂèëÁé∞Á≠âÈÄöÁî®ÂäüËÉΩ</p>
<h1 id="ÁõÆÂΩïÁªìÊûÑ">ÁõÆÂΩïÁªìÊûÑ
</h1><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#c678dd">/</span>                                                  <span style="color:#7f848e"># Ê†πÁõÆÂΩï
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#98c379">‚îú‚îÄ‚îÄ</span> <span style="color:#98c379">etc/</span>
</span></span><span style="display:flex;"><span><span style="color:#98c379">‚îÇ</span>   <span style="color:#98c379">‚îî‚îÄ‚îÄ</span> <span style="color:#98c379">nginx/</span>                            <span style="color:#7f848e"># ÈÖçÁΩÆÊñá‰ª∂ÁõÆÂΩï
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#98c379">‚îÇ</span>       <span style="color:#98c379">‚îú‚îÄ‚îÄ</span> <span style="color:#98c379">nginx.conf</span>                  <span style="color:#7f848e"># ‰∏ªÈÖçÁΩÆÊñá‰ª∂ÔºàNginx ÁöÑÊ†∏ÂøÉÈÖçÁΩÆÔºâ
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#98c379">‚îÇ</span>       <span style="color:#98c379">‚îú‚îÄ‚îÄ</span> <span style="color:#98c379">mime.types</span>                <span style="color:#7f848e"># MIMEÁ±ªÂûãÊò†Â∞ÑË°®
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#98c379">‚îÇ</span>       <span style="color:#98c379">‚îî‚îÄ‚îÄ</span> <span style="color:#98c379">conf.d/</span>                       <span style="color:#7f848e"># Â≠êÈÖçÁΩÆÁõÆÂΩïÔºàÁî®‰∫éËôöÊãü‰∏ªÊú∫Ôºâ
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#98c379">‚îÇ</span>           <span style="color:#98c379">‚îî‚îÄ‚îÄ</span> <span style="color:#98c379">default.conf</span>           <span style="color:#7f848e"># ÈªòËÆ§ÁΩëÁ´ôÈÖçÁΩÆÊñá‰ª∂
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#98c379">‚îÇ</span>
</span></span><span style="display:flex;"><span><span style="color:#98c379">‚îú‚îÄ‚îÄ</span> <span style="color:#98c379">usr/</span>
</span></span><span style="display:flex;"><span><span style="color:#98c379">‚îÇ</span>   <span style="color:#98c379">‚îú‚îÄ‚îÄ</span> <span style="color:#98c379">share/</span>
</span></span><span style="display:flex;"><span><span style="color:#98c379">‚îÇ</span>   <span style="color:#98c379">‚îÇ</span>   <span style="color:#98c379">‚îî‚îÄ‚îÄ</span> <span style="color:#98c379">nginx/</span>
</span></span><span style="display:flex;"><span><span style="color:#98c379">‚îÇ</span>   <span style="color:#98c379">‚îÇ</span>      <span style="color:#98c379">‚îî‚îÄ‚îÄ</span> <span style="color:#98c379">html/</span>                     <span style="color:#7f848e"># ÈªòËÆ§ÁöÑ Web Ê†πÁõÆÂΩï
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#98c379">‚îÇ</span>   <span style="color:#98c379">‚îÇ</span>           <span style="color:#98c379">‚îú‚îÄ‚îÄ</span> <span style="color:#98c379">index.html</span>        <span style="color:#7f848e"># ÈªòËÆ§Ê¨¢ËøéÈ°µÈù¢
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#98c379">‚îÇ</span>   <span style="color:#98c379">‚îÇ</span>           <span style="color:#98c379">‚îî‚îÄ‚îÄ</span> <span style="color:#98c379">50x.html</span>           <span style="color:#7f848e"># ÊúçÂä°Âô®ÈîôËØØÈ°µÈù¢ÔºàÂ¶Ç 500„ÄÅ502Ôºâ
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#98c379">‚îÇ</span>   <span style="color:#98c379">‚îî‚îÄ‚îÄ</span> <span style="color:#98c379">sbin/</span>
</span></span><span style="display:flex;"><span><span style="color:#98c379">‚îÇ</span>       <span style="color:#98c379">‚îî‚îÄ‚îÄ</span> <span style="color:#98c379">nginx</span>                         <span style="color:#7f848e"># ‰∏ªÁ®ãÂ∫è‰∫åËøõÂà∂Êñá‰ª∂
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#98c379">‚îÇ</span> 
</span></span><span style="display:flex;"><span><span style="color:#98c379">‚îî‚îÄ‚îÄ</span> <span style="color:#98c379">var/</span>
</span></span><span style="display:flex;"><span>     <span style="color:#98c379">‚îî‚îÄ‚îÄ</span> <span style="color:#98c379">log/</span>
</span></span><span style="display:flex;"><span>          <span style="color:#98c379">‚îî‚îÄ‚îÄ</span> <span style="color:#98c379">nginx/</span>                       <span style="color:#7f848e"># Êó•ÂøóÊñá‰ª∂ÁõÆÂΩïÔºàÈÉ®ÂàÜÁ≤æÁÆÄÈïúÂÉèÊó†Êó•ÂøóËæìÂá∫Ôºâ
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>             <span style="color:#98c379">‚îú‚îÄ‚îÄ</span> <span style="color:#98c379">access.log</span>             <span style="color:#7f848e"># ËÆøÈóÆÊó•ÂøóÔºàÈªòËÆ§ÂèØËÉΩÊú™ÂêØÁî®Ôºâ
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>             <span style="color:#98c379">‚îî‚îÄ‚îÄ</span> <span style="color:#98c379">error.log</span>                <span style="color:#7f848e"># ÈîôËØØÊó•ÂøóÔºàÈªòËÆ§ÂèØËÉΩÊú™ÂêØÁî®Ôºâ
</span></span></span></code></pre></div><p>Ë¶ÅÊ≥®ÊÑè‰ª•‰∏ãÂá†ÁÇπÔºö</p>
<ol>
<li>
<p><span style="color:red;font-size:20px"><strong>DockerÈïúÂÉèÁöÑNginxÊó•ÂøóÈªòËÆ§ËæìÂá∫Âà∞Ê†áÂáÜËæìÂá∫/ÈîôËØØÔºåËÄå‰∏çÊòØÊñá‰ª∂‰∏≠</strong></span></p>
<p><strong>Âú®ÁºñËØëÂÆâË£ÖÔºà<code>make install</code>ÔºâÁöÑ‰º†ÁªüÊñπÂºè‰∏≠ÔºåNginxÊó•Âøó‰ºöËÆ∞ÂΩïÂú®Ôºö</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span><span style="color:#56b6c2">/</span><span style="color:#e06c75">usr</span><span style="color:#56b6c2">/</span><span style="color:#e06c75">local</span><span style="color:#56b6c2">/</span><span style="color:#e06c75">nginx</span><span style="color:#56b6c2">/</span><span style="color:#e06c75">logs</span><span style="color:#56b6c2">/</span>
</span></span></code></pre></div><p><strong>Âú®Á≥ªÁªüÂåÖÂÆâË£ÖÔºà<code>apt/yum</code>ÔºâÁöÑÊñπÂºè‰∏≠ÔºåNginxÊó•Âøó‰ºöËÆ∞ÂΩïÂú®Ôºö</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span><span style="color:#56b6c2">/</span><span style="color:#c678dd">var</span><span style="color:#56b6c2">/</span><span style="color:#e06c75">log</span><span style="color:#56b6c2">/</span><span style="color:#e06c75">nginx</span><span style="color:#56b6c2">/</span>
</span></span></code></pre></div><p><strong>ËÄåÂú®DockerÂÆòÊñπÈïúÂÉè‰∏≠ÔºåÊó•ÂøóÈªòËÆ§‰∏çÂÜôÂÖ•‰∏äÈù¢ÁöÑÊñá‰ª∂ÔºåËÄåÊòØËæìÂá∫Âà∞Ê†áÂáÜËæìÂá∫ÂíåÊ†áÂáÜÈîôËØØ</strong></p>
<p><strong>Êü•ÁúãÊó•ÂøóÁöÑÊñπÂºè</strong>Ôºö</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker logs &lt;ÂÆπÂô®ID&gt;/&lt;ÂêçÁß∞&gt;
</span></span></code></pre></div></li>
<li>
<p><span style="color:red;font-size:20px"><strong><code>/etc/nginx/conf.d/</code>ÊòØ‰∏ªÈÖçÁΩÆÁõÆÂΩïÔºå<code>/etc/nginx/nginx.conf</code>ÊòØ‰∏ªÈÖçÁΩÆÊñá‰ª∂</strong></span></p>
<p>NginxÁöÑ‰∏ªÈÖçÁΩÆÊñá‰ª∂ÊòØ<code>/etc/nginx/nginx.conf</code>ÔºåÂú®Ëøô‰∏™Êñá‰ª∂‰∏≠ÊúâËøôÊ†∑‰∏ÄË°å‰ª£Á†ÅÔºö</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#c678dd">include</span> <span style="color:#e06c75">/etc/nginx/conf.d/*.conf</span>;
</span></span></code></pre></div><p><strong><code>include</code>ÊòØNginxÈÖçÁΩÆËØ≠Ë®Ä‰∏≠ÁöÑÊåá‰ª§ÔºåÁî®‰∫éÂåÖÂê´ÂÖ∂‰ªñÈÖçÁΩÆÊñá‰ª∂</strong></p>
<p><strong>‰πüÂ∞±ÊòØËØ¥Ôºå<code>/etc/nginx/nginx.conf</code>ÈªòËÆ§‰ºöÂåÖÂê´<code>/etc/nginx/conf.d/</code>Ëøô‰∏™Â≠êÁõÆÂΩï‰∏≠ÁöÑÊâÄÊúâÈÖçÁΩÆÔºà.confÔºâ</strong></p>
</li>
</ol>
<h1 id="Â∏∏Áî®ÂëΩ‰ª§">Â∏∏Áî®ÂëΩ‰ª§
</h1><p>NginxÁõ¥Êé•ÂÆâË£ÖÂú®Êú¨Êú∫Êó∂Ôºå‰ΩøÁî®<code>systemctl</code>ÊàñËÄÖ<code>service</code>ÂëΩ‰ª§ÊéßÂà∂</p>
<p>ÈÄöËøáDockerÂÆπÂô®‰ΩøÁî®Êó∂ÔºåÂ∞±ÊåâÁÖßDockerÂÆπÂô®ÁöÑ‰ΩøÁî®ÊñπÊ≥ïÔºàÊ≤°Áî®ËøáÁúãËøôÈáåÔºö<a class="link" href="http://blog.928330.xyz/p/%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8Bdocker/"  target="_blank" rel="noopener"
    >Âø´ÈÄü‰∏äÊâãDocker
    
    <span style="white-space: nowrap;"><svg width=".7em"
        height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg">
        <path d="m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z" fill="currentColor" />
        <path d="M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z"
            fill="currentColor">
    </svg></span>
    
</a>Ôºâ</p>
<p>‰∏ãÈù¢‰ªãÁªç‰∏Ä‰∫õNginxÊú¨Ë∫´ÁöÑÂëΩ‰ª§Ôºö</p>
<h2 id="Êü•ÁúãÁâàÊú¨">Êü•ÁúãÁâàÊú¨
</h2><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>nginx -v
</span></span></code></pre></div><p>ËæìÂá∫ÂΩìÂâçÂÆâË£ÖÁöÑNginxÁâàÊú¨Âè∑ÔºåÁî®‰∫éÁ°ÆËÆ§ÊòØÂê¶Ê≠£Á°ÆÂÆâË£ÖNginxÂèäÂÖ∂ÁâàÊú¨‰ø°ÊÅØ</p>
<h2 id="Ê£ÄÊü•ÈÖçÁΩÆÊñá‰ª∂ËØ≠Ê≥ï">Ê£ÄÊü•ÈÖçÁΩÆÊñá‰ª∂ËØ≠Ê≥ï
</h2><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>nginx -t
</span></span></code></pre></div><p><strong>Âú®ÊØèÊ¨°‰øÆÊîπÈÖçÁΩÆÊñá‰ª∂ÂêéÂøÖÈ°ªÊâßË°å</strong></p>
<p>‰ΩøÁî®ÂêéÔºå‰∏ªËøõÁ®ã‰ºöfork‰∏Ä‰∏™‰∏¥Êó∂Â≠êËøõÁ®ãÔºåÂ≠êËøõÁ®ãÂ∞ùËØïËß£ÊûêÊâÄÊúâÈÖçÁΩÆÊñá‰ª∂Ôºå‰ΩÜ‰∏ç‰ºöÁªëÂÆöÁ´ØÂè£ÊàñÁúüÊ≠£ÂêØÂä®ÊúçÂä°</p>
<p>Ëã•ËØ≠Ê≥ïÊó†ËØØÔºå‰ºöÊèêÁ§∫<code>syntax is ok</code>Âíå <code>test is successful</code></p>
<p>Ëã•ÊúâÈîôËØØÔºå‰ºöÊòéÁ°ÆÊåáÂá∫ÊòØÂì™‰∏ÄË°å„ÄÅÂì™‰∏™Êñá‰ª∂ÈÖçÁΩÆÊúâËØØ</p>
<p><img src="http://picture.928330.xyz/typora/image-20250724132842292.png"
	
	
	
	loading="lazy"
	
		alt="image-20250724132842292"
	
	
></p>
<h2 id="ÈáçÊñ∞Âä†ËΩΩÈÖçÁΩÆÊñá‰ª∂">ÈáçÊñ∞Âä†ËΩΩÈÖçÁΩÆÊñá‰ª∂
</h2><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>nginx -s reload
</span></span></code></pre></div><h2 id="Âº∫Âà∂ÂÅúÊ≠¢">Âº∫Âà∂ÂÅúÊ≠¢
</h2><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>nginx -s stop
</span></span></code></pre></div><h1 id="ÈÖçÁΩÆÊñá‰ª∂">ÈÖçÁΩÆÊñá‰ª∂
</h1><p><strong>NginxÁöÑÊâÄÊúâÂäüËÉΩÈÉΩÊòØÈÄöËøáÈÖçÁΩÆÊñá‰ª∂<code>nginx.conf</code>Êù•È©±Âä®ÁöÑ</strong></p>
<p>ËØ•Êñá‰ª∂‰∏ªË¶ÅÁî±Â§ö‰∏™ÈÖçÁΩÆÂùóÁªÑÊàêÔºåËøô‰∫õÂùóÁî±Ëä±Êã¨Âè∑<code>{}</code>ÁïåÂÆöÔºåÂèØ‰ª•ÂµåÂ•óÔºåÂΩ¢Êàê‰∫ÜÂ±ÇÁ∫ßÂàÜÊòéÁöÑÁªìÊûÑ</p>
<p>‰∏Ä‰∏™ÂÖ∏ÂûãÁöÑ<code>nginx.conf</code>ÁªìÊûÑÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#c678dd">nginx.conf</span>
</span></span><span style="display:flex;"><span><span style="color:#98c379">‚îú‚îÄ‚îÄ</span> <span style="color:#98c379">ÂÖ®Â±ÄÂùó</span>
</span></span><span style="display:flex;"><span><span style="color:#98c379">‚îú‚îÄ‚îÄ</span> <span style="color:#98c379">eventsÂùó</span>
</span></span><span style="display:flex;"><span><span style="color:#98c379">‚îî‚îÄ‚îÄ</span> <span style="color:#98c379">httpÂùó</span>
</span></span><span style="display:flex;"><span>    <span style="color:#98c379">‚îî‚îÄ‚îÄ</span> <span style="color:#98c379">serverÂùóÔºàÂèØÂ§ö‰∏™Ôºâ</span>
</span></span><span style="display:flex;"><span>        <span style="color:#98c379">‚îî‚îÄ‚îÄ</span> <span style="color:#98c379">locationÂùóÔºàÂèØÂ§ö‰∏™Ôºâ</span>
</span></span></code></pre></div><p>ÂÖ∑‰ΩìÁ§∫‰æãÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#c678dd">user</span>  <span style="color:#98c379">nginx</span>; 
</span></span><span style="display:flex;"><span><span style="color:#c678dd">worker_processes</span>  <span style="color:#98c379">auto</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">error_log</span>  <span style="color:#98c379">/var/log/nginx/error.log</span> <span style="color:#98c379">warn</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">pid</span>        <span style="color:#98c379">/var/run/nginx.pid</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">events</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">worker_connections</span>  <span style="color:#d19a66">1024</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">http</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">include</span>       <span style="color:#98c379">/etc/nginx/mime.types</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">default_type</span>  <span style="color:#98c379">application/octet-stream</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">log_format</span>  <span style="color:#98c379">main</span>  <span style="color:#98c379">&#39;</span><span style="color:#e06c75">$remote_addr</span> <span style="color:#98c379">-</span> <span style="color:#e06c75">$remote_user</span> <span style="color:#98c379">[</span><span style="color:#e06c75">$time_local]</span> <span style="color:#98c379">&#34;</span><span style="color:#e06c75">$request&#34;</span> <span style="color:#98c379">&#39;</span>
</span></span><span style="display:flex;"><span>                      <span style="color:#98c379">&#39;</span><span style="color:#e06c75">$status</span> <span style="color:#e06c75">$body_bytes_sent</span> <span style="color:#98c379">&#34;</span><span style="color:#e06c75">$http_referer&#34;</span> <span style="color:#98c379">&#39;</span>
</span></span><span style="display:flex;"><span>                      <span style="color:#98c379">&#39;&#34;</span><span style="color:#e06c75">$http_user_agent&#34;</span> <span style="color:#98c379">&#34;</span><span style="color:#e06c75">$http_x_forwarded_for&#34;&#39;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">access_log</span>  <span style="color:#98c379">/var/log/nginx/access.log</span>  <span style="color:#98c379">main</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">sendfile</span>        <span style="color:#e06c75">on</span>; 
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">tcp_nopush</span>      <span style="color:#e06c75">on</span>; 
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">keepalive_timeout</span>  <span style="color:#d19a66">65</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">server</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">listen</span>       <span style="color:#d19a66">80</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">server_name</span>  <span style="color:#98c379">localhost</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">location</span> <span style="color:#98c379">/</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#c678dd">root</span>   <span style="color:#98c379">/usr/share/nginx/html</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#c678dd">index</span>  <span style="color:#98c379">index.html</span> <span style="color:#98c379">index.htm</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="ÂÖ®Â±ÄÂùó">ÂÖ®Â±ÄÂùó
</h2><p>‰Ωç‰∫éÈÖçÁΩÆÊñá‰ª∂È°∂ÈÉ®ÔºåÊú™ÂµåÂ•ó‰∫é‰ªª‰ΩïÂùó‰∏≠</p>
<p>Áî®‰∫éÈÖçÁΩÆNginxÊï¥‰ΩìËøêË°åÁéØÂ¢ÉÔºåÂΩ±ÂìçÊâÄÊúâÂ≠êÊ®°Âùó</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#c678dd">user</span>  <span style="color:#98c379">nginx</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">worker_processes</span>  <span style="color:#98c379">auto</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">error_log</span>  <span style="color:#98c379">/var/log/nginx/error.log</span> <span style="color:#98c379">warn</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">pid</span>        <span style="color:#98c379">/var/run/nginx.pid</span>;
</span></span></code></pre></div><ul>
<li>
<p><strong><code>user</code>ÔºöÊåáÂÆöËøêË°åÂ∑•‰ΩúËøõÁ®ãÁöÑÁî®Êà∑ÂíåÁî®Êà∑ÁªÑ</strong></p>
</li>
<li>
<p><strong><code>worker_processes</code>ÔºöÊåáÂÆöÂ∑•‰ΩúËøõÁ®ãÊï∞Èáè</strong></p>
<p><code>auto</code>Ë°®Á§∫Ëá™Âä®‰∏é CPU Ê†∏ÂøÉÊï∞‰∏ÄËá¥</p>
</li>
<li>
<p><strong><code>error_log</code>ÔºöËÆæÁΩÆÈîôËØØÊó•ÂøóÁöÑË∑ØÂæÑÂíåÊó•ÂøóÁ∫ßÂà´</strong></p>
<p>NginxÊîØÊåÅÁöÑÊó•ÂøóÁ∫ßÂà´Ôºà‰ªéÈ´òÂà∞‰ΩéÔºâÂ¶Ç‰∏ãÔºö</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th>Á∫ßÂà´</th>
          <th>ÊèèËø∞</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>debug</code></td>
          <td>ËÆ∞ÂΩïÊâÄÊúâ‰ø°ÊÅØÔºå‰∏ªË¶ÅÁî®‰∫éÂºÄÂèëÊàñË∞ÉËØïÔºå‰ø°ÊÅØÈáèÊûÅÂ§ß„ÄÇÈÄöÂ∏∏ÈúÄÁºñËØëÊó∂ÂêØÁî®</td>
      </tr>
      <tr>
          <td><code>info</code></td>
          <td>ÊôÆÈÄö‰ø°ÊÅØÔºåÂ¶ÇÈÖçÁΩÆÂä†ËΩΩÊàêÂäü„ÄÅËøõÁ®ãÂêØÂä®„ÄÅËøûÊé•ÂàõÂª∫Á≠â</td>
      </tr>
      <tr>
          <td><code>notice</code></td>
          <td>Ê≠£Â∏∏‰ΩÜÈáçË¶ÅÁöÑ‰∫ã‰ª∂ÔºåÂ¶ÇÈÖçÁΩÆÊñá‰ª∂ÈáçËΩΩ„ÄÅËøõÁ®ãÂÖ≥Èó≠Á≠â</td>
      </tr>
      <tr>
          <td><code>warn</code></td>
          <td>Ë≠¶Âëä‰ø°ÊÅØÔºåÈùûËá¥ÂëΩÈîôËØØÔºåÊØîÂ¶ÇÈÖçÁΩÆ‰∏≠Â≠òÂú®ÈóÆÈ¢ò‰ΩÜÂèØ‰ª•ÂøΩÁï•ÊàñÁªßÁª≠ËøêË°å</td>
      </tr>
      <tr>
          <td><code>error</code></td>
          <td>ËøêË°åËøáÁ®ã‰∏≠Âá∫Áé∞ÁöÑÈîôËØØÔºåÂ¶ÇËøûÊé•Â§±Ë¥•„ÄÅÊúçÂä°‰∏çÂèØËææÁ≠â</td>
      </tr>
      <tr>
          <td><code>crit</code></td>
          <td>‰∏•ÈáçÈîôËØØÔºåNginxÂèØËÉΩÊó†Ê≥ïÁªßÁª≠ËøêË°å</td>
      </tr>
      <tr>
          <td><code>alert</code></td>
          <td>ÂøÖÈ°ªÁ´ãÂàªÂ§ÑÁêÜÁöÑ‰∏•ÈáçÈóÆÈ¢ò</td>
      </tr>
      <tr>
          <td><code>emerg</code></td>
          <td>Á¥ßÊÄ•Áä∂ÊÄÅÔºåÊØîÂ¶ÇÁ≥ªÁªüÂ¥©Ê∫ÉÔºåNginxÊó†Ê≥ïÂêØÂä®</td>
      </tr>
  </tbody>
</table></div>
</li>
<li>
<p><strong><code>pid</code>ÔºöÊåáÂÆöËÆ∞ÂΩï‰∏ªËøõÁ®ãPIDÁöÑÊñá‰ª∂Ë∑ØÂæÑ</strong></p>
</li>
</ul>
<h2 id="eventsÂùó">eventsÂùó
</h2><p>Á¥ßÈöèÂÖ®Â±ÄÂùó‰πãÂêéÔºå‰∏ÄÁ∫ßÂùó</p>
<p>Áî®‰∫éÈÖçÁΩÆ‰∏éÁΩëÁªúËøûÊé•Â§ÑÁêÜÁõ∏ÂÖ≥ÁöÑÊåá‰ª§ÔºåÂΩ±ÂìçÂ∑•‰ΩúËøõÁ®ãÁöÑÂπ∂ÂèëÊÄßËÉΩ</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#c678dd">events</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">worker_connections</span> <span style="color:#d19a66">1024</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>
<p><strong><code>worker_connections</code>ÔºöÊØè‰∏™Â∑•‰ΩúËøõÁ®ãÂèØÂêåÊó∂Â§ÑÁêÜÁöÑÊúÄÂ§ßËøûÊé•Êï∞</strong></p>
<p>ÊÄªÂπ∂ÂèëËøûÊé•Êï∞Á∫¶‰∏∫<code>worker_processes * worker_connections</code></p>
</li>
</ul>
<h2 id="httpÂùó">httpÂùó
</h2><p>Á¥ßÈöèeventsÂùó‰πãÂêéÔºå‰∏ÄÁ∫ßÂùó</p>
<p>Áî®‰∫éÈÖçÁΩÆHTTPÂçèËÆÆÁõ∏ÂÖ≥ÁöÑÊåá‰ª§ÔºåÊòØÈÖçÁΩÆWebÊúçÂä°ÁöÑÊ†∏ÂøÉÈÉ®ÂàÜ</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#c678dd">http</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">include</span>       <span style="color:#98c379">/etc/nginx/mime.types</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">default_type</span>  <span style="color:#98c379">application/octet-stream</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">log_format</span>  <span style="color:#98c379">main</span>  <span style="color:#98c379">&#39;</span><span style="color:#e06c75">$remote_addr</span> <span style="color:#98c379">-</span> <span style="color:#e06c75">$remote_user</span> <span style="color:#98c379">[</span><span style="color:#e06c75">$time_local]</span> <span style="color:#98c379">&#34;</span><span style="color:#e06c75">$request&#34;</span> <span style="color:#98c379">&#39;</span>
</span></span><span style="display:flex;"><span>                      <span style="color:#98c379">&#39;</span><span style="color:#e06c75">$status</span> <span style="color:#e06c75">$body_bytes_sent</span> <span style="color:#98c379">&#34;</span><span style="color:#e06c75">$http_referer&#34;</span> <span style="color:#98c379">&#39;</span>
</span></span><span style="display:flex;"><span>                      <span style="color:#98c379">&#39;&#34;</span><span style="color:#e06c75">$http_user_agent&#34;</span> <span style="color:#98c379">&#34;</span><span style="color:#e06c75">$http_x_forwarded_for&#34;&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">access_log</span>  <span style="color:#98c379">/var/log/nginx/access.log</span>  <span style="color:#98c379">main</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">sendfile</span>        <span style="color:#e06c75">on</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">tcp_nopush</span>      <span style="color:#e06c75">on</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">keepalive_timeout</span>  <span style="color:#d19a66">65</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">server</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">...</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>
<p><strong><code>include</code>ÔºöÂºïÂÖ•Â§ñÈÉ®Êñá‰ª∂</strong></p>
<p>ËøôÈáå<code>/etc/nginx/mime.types</code>Áî®‰∫éMIMEÁ±ªÂûãÈÖçÁΩÆ</p>
</li>
<li>
<p><strong><code>default_type</code>ÔºöÊú™ÊòéÁ°Æ MIME Á±ªÂûãÊó∂ÁöÑÈªòËÆ§Á±ªÂûã</strong></p>
</li>
<li>
<p><strong><code>log_format</code>ÔºöÂÆö‰πâÊó•ÂøóÊ†ºÂºè</strong></p>
</li>
<li>
<p><strong><code>access_log</code>ÔºöÊåáÂÆöËÆøÈóÆÊó•ÂøóÁöÑËæìÂá∫Ë∑ØÂæÑÂèäÊ†ºÂºè</strong></p>
</li>
<li>
<p><strong><code>sendfile</code>ÔºöÂêØÁî®È´òÊïàÊñá‰ª∂‰º†ËæìÊñπÂºè</strong></p>
</li>
<li>
<p><strong><code>tcp_nopush</code>Ôºö‰ºòÂåñÁΩëÁªú‰º†ËæìÊÄßËÉΩÔºåÈÅøÂÖçÈ¢ëÁπÅÂèëÈÄÅÂ∞èÂåÖ</strong></p>
</li>
<li>
<p><strong><code>keepalive_timeout</code>ÔºöËÆæÁΩÆÈïøËøûÊé•Ë∂ÖÊó∂Êó∂Èó¥</strong></p>
</li>
</ul>
<h2 id="serverÂùó">serverÂùó
</h2><p>ÂµåÂ•ó‰∫éhttpÂùóÂÜÖÈÉ®Ôºå‰∫åÁ∫ßÂùóÔºåÂèØÂ≠òÂú®Â§ö‰∏™ÔºåÁî®‰∫éÈÖçÁΩÆÂ§ö‰∏™ËôöÊãü‰∏ªÊú∫</p>
<p>Áî®‰∫éÂÆö‰πâÂçï‰∏™ËôöÊãü‰∏ªÊú∫ÁöÑÈÖçÁΩÆÔºåÈÄöËøáÁõëÂê¨Á´ØÂè£ÂíåÊúçÂä°Âô®ÂêçÁß∞ÂØπËØ∑Ê±ÇËøõË°åÂàÜÂèë</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#c678dd">server</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">listen</span> <span style="color:#d19a66">80</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">server_name</span>  <span style="color:#98c379">localhost</span>;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">location</span> <span style="color:#98c379">/</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">...</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>
<p><strong><code>listen</code>ÔºöËÆæÁΩÆÁõëÂê¨ÁöÑÁ´ØÂè£</strong></p>
<p>Âè™ÊúâËÆøÈóÆ‰∏ªÊú∫ËØ•Á´ØÂè£ÁöÑËØ∑Ê±ÇÊâç‰ºöË¢´Êé•Âèó</p>
<p><strong>‰∏çËøáÂæóÊ≥®ÊÑèÔºåÂ¶ÇÊûú‰ΩøÁî®dockerÔºådockerÂÆπÂô®‰∏ÄËà¨‰ºöÊääËøô‰∏™Á´ØÂè£ËΩ¨ÂèëÂà∞‰∏ªÊú∫ÁöÑÊüê‰∏™Á´ØÂè£‰∏ä</strong></p>
<p>Âü∫Êú¨Áî®Ê≥ïÔºö</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#c678dd">listen</span> <span style="color:#98c379">&lt;Âú∞ÂùÄ&gt;:&lt;Á´ØÂè£&gt;</span> <span style="color:#98c379">[ÂèÇÊï∞]</span>;
</span></span></code></pre></div><p><strong><code>Âú∞ÂùÄ</code></strong>ÔºàÂèØÈÄâÔºâÔºöÊåáÂÆöÁªëÂÆöÁöÑ IPÔºàÈªòËÆ§ÊòØÊâÄÊúâIPÔºâ</p>
<p><strong><code>Á´ØÂè£</code></strong>ÔºöÁõëÂê¨ÁöÑÁ´ØÂè£</p>
<p><strong><code>ÂèÇÊï∞</code></strong>ÔºàÂèØÈÄâÔºâÔºö‰æãÂ¶Ç<code>default_server</code>„ÄÅ<code>ssl</code>„ÄÅ<code>http2</code> Á≠âÔºàÊàë‰ª¨ÂêéÈù¢ÈÉΩ‰ºöÊèêÂà∞Ôºâ</p>
<p><strong>Êúâ‰∏Ä‰∏™ÊØîËæÉÁâπÊÆäÁöÑÂèÇÊï∞Ôºö<code>default_server</code>ÔºåÁî®Êù•ÊåáÂÆöÈªòËÆ§ÁöÑserverÂùóÔºåÂΩìNginxÊî∂Âà∞ËØ∑Ê±Ç‰ΩÜÊâæ‰∏çÂà∞‰ªª‰Ωï<code>server_name</code>ÂåπÈÖçÊó∂ÔºåÂ∞±‰ºö‰ΩøÁî®Ëøô‰∏™ÈªòËÆ§ÈÖçÁΩÆÊù•Â§ÑÁêÜËØ∑Ê±Ç</strong></p>
<p><span style="color:yellow;"><strong>‰ªãÁªçÂá†ÁßçÂ∏∏ËßÅ<code>listen</code>Â≠óÊÆµÂÜôÊ≥ïÔºö</strong></span></p>
<p><code>80</code>ÔºöÁõëÂê¨ÊâÄÊúâIPÁöÑ80Á´ØÂè£Ôºà80ÊòØÈªòËÆ§HTTPÁ´ØÂè£ÔºâÔºåÁõ∏ÂΩì‰∫é<code>0.0.0.0:8080</code></p>
<p><code>127.0.0.1:8080</code>Ôºö‰ªÖÁõëÂê¨Êú¨Âú∞ÂõûÁéØÂú∞ÂùÄÁöÑ8080Á´ØÂè£</p>
<p><code>[::]:80</code>ÔºöIPv6Âú∞ÂùÄÁõëÂê¨80Á´ØÂè£</p>
</li>
<li>
<p><strong><code>server_name</code>ÔºöÂåπÈÖçËØ∑Ê±ÇÁöÑ‰∏ªÊú∫ÂêçÊàñÂüüÂêç</strong></p>
<p>Âè™ÊúâËØ∑Ê±ÇÂ§¥‰∏≠ÁöÑHostÂ≠óÊÆµÁ¨¶ÂêàÔºåNginxÊâç‰ºöÊääËØ∑Ê±Ç‰∫§ÁªôËøô‰∏™<code>server</code>ÂùóÂ§ÑÁêÜ</p>
<p>ÂèØ‰ª•Âú®<code>server_name</code>‰∏≠ÂÜôÂ§ö‰∏™ÂÄºÔºå‰πüÊîØÊåÅÈÄöÈÖçÁ¨¶<code>*</code>Ôºå‰πüÂèØ‰ª•‰ΩøÁî®<code>_</code>Ë°®Á§∫‰ªª‰ΩïHostÂÄº</p>
<p>Â¶ÇÊûú‰∏çÂÜôËøô‰∏™Â≠óÊÆµÔºåhttpÂùóÂèàÂè™Êúâ‰∏Ä‰∏™serverÔºåÈÇ£‰πàËøô‰∏™serverÂùó‰ºöÊâÄÊúâËØ∑Ê±ÇÈÉΩÂåπÈÖçÔºàÂåÖÊã¨ IPÔºâ</p>
<p>Â¶ÇÊûú‰∏çÂÜôËøô‰∏™Â≠óÊÆµÔºåhttpÂùóÂèàÊúâÂ§ö‰∏™serverÔºåÈÇ£‰πàËøô‰∏™serverÂùó‰ºö‰Ωú‰∏∫ÈªòËÆ§serverÔºåÂ§ÑÁêÜÊú™ÂåπÈÖçÁöÑËØ∑Ê±Ç</p>
</li>
</ul>
<h2 id="locationÂùó">locationÂùó
</h2><p>ÂµåÂ•ó‰∫éserverÂùóÂÜÖÈÉ®Ôºå‰∏âÁ∫ßÂùó</p>
<p>Áî®‰∫éÂØπURIÔºàÊ≥®ÊÑè‰∏çÊòØURLÔºâËøõË°åÂåπÈÖçÔºåÂà∂ÂÆöËØ∑Ê±ÇÁöÑÂ§ÑÁêÜÊñπÂºèÔºåÂ¶ÇËµÑÊ∫êË∑ØÂæÑ„ÄÅ‰ª£ÁêÜËßÑÂàôÁ≠â</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#c678dd">location</span> <span style="color:#98c379">/</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">root</span>   <span style="color:#98c379">/usr/share/nginx/html</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">index</span>  <span style="color:#98c379">index.html</span> <span style="color:#98c379">index.htm</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>
<p><strong><code>location</code>ÔºöÁî®‰∫éÂåπÈÖçÂÆ¢Êà∑Á´ØËØ∑Ê±ÇÁöÑURI</strong></p>
<p>Á§∫‰æãËøôÈáåÊòØÂåπÈÖç‰ª•<code>/</code>ÂºÄÂ§¥ÁöÑURIÔºàÂÆûÈôÖ‰∏äÂ∞±ÊòØÂåπÈÖçÊâÄÊúâËØ∑Ê±ÇÔºåÂõ†‰∏∫URIÂ∞±ÊòØ‰ª•<code>/</code>ÂºÄÂ§¥ÁöÑÔºâ</p>
<p><strong>Ê≠§Â§ñÔºåNginxÊèê‰æõÂ§öÁßçÂåπÈÖçÊñπÂºèÔºå‰ºòÂÖàÁ∫ß‰∏çÂêåÔºö</strong></p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th>Á±ªÂûã</th>
          <th>ËØ≠Ê≥ï</th>
          <th>Á§∫‰æã</th>
          <th>ËØ¥Êòé</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Á≤æÁ°ÆÂåπÈÖç</td>
          <td><code>=</code></td>
          <td><code>location = /login {}</code></td>
          <td>‰ªÖÂåπÈÖç URI Á≠â‰∫é <code>/login</code> ÁöÑËØ∑Ê±Ç</td>
      </tr>
      <tr>
          <td>ÂâçÁºÄÂåπÈÖç</td>
          <td><code>/</code></td>
          <td><code>location /images/ {}</code></td>
          <td>ÂåπÈÖç‰ª• <code>/images/</code> ÂºÄÂ§¥ÁöÑ URI</td>
      </tr>
      <tr>
          <td>Ê≠£ÂàôÂåπÈÖç</td>
          <td><code>~</code>ÔºàÂå∫ÂàÜÂ§ßÂ∞èÂÜôÔºâ<br /><code>~*</code>Ôºà‰∏çÂå∫ÂàÜÂ§ßÂ∞èÂÜôÔºâ</td>
          <td><code>location ~ \.php$ {}</code></td>
          <td>‰ΩøÁî®Ê≠£ÂàôË°®ËææÂºèÂåπÈÖç URI</td>
      </tr>
      <tr>
          <td>‰ºòÂÖàÂåπÈÖç</td>
          <td><code>^~</code></td>
          <td><code>location ^~ /static/ {}</code></td>
          <td>ÂâçÁºÄÂåπÈÖç‰ºòÂÖà‰∫éÊ≠£ÂàôÂåπÈÖç</td>
      </tr>
  </tbody>
</table></div>
</li>
<li>
<p><strong><code>root</code>ÔºöËÆæÁΩÆËØ∑Ê±ÇËµÑÊ∫êÁöÑÊ†πÁõÆÂΩïË∑ØÂæÑ</strong></p>
<p>ÂΩì‰∏Ä‰∏™ËØ∑Ê±ÇÂà∞ËææÊó∂ÔºåNginx‰ºöÂ∞ÜËØ∑Ê±ÇÁöÑ URI ÊãºÊé•Âà∞Ëøô‰∏™Ë∑ØÂæÑÂêéÈù¢Ôºå‰ª•Á°ÆÂÆöÊñá‰ª∂ÁöÑÂÖ∑‰Ωì‰ΩçÁΩÆ</p>
<p>Â¶ÇÊûúÂÆ¢Êà∑Á´ØËÆøÈóÆ<code>/index.html</code>ÔºåÈÇ£‰πàÂÆûÈôÖËÆøÈóÆÁöÑÊòØÊúçÂä°Âô®‰∏äÁöÑ<code>/var/www/html/index.html</code>Êñá‰ª∂</p>
</li>
<li>
<p><strong><code>index</code>ÔºöÊåáÂÆöËÆøÈóÆÁõÆÂΩïÊó∂ÁöÑÈªòËÆ§Êñá‰ª∂ÂêçÁß∞</strong></p>
<p>Â¶ÇÊûúÁî®Êà∑ËÆøÈóÆÁöÑÊòØÁõÆÂΩïËÄå‰∏çÊòØÂÖ∑‰ΩìÊñá‰ª∂ÔºåNginx‰ºöÂú®<code>/usr/share/nginx/html/</code>ÁõÆÂΩï‰∏ãÊåâÈ°∫Â∫èÊü•ÊâæÔºö</p>
<ol>
<li><code>index.html</code></li>
<li><code>index.htm</code></li>
</ol>
<p>Âè™Ë¶ÅÊâæÂà∞ÂÖ∂‰∏≠‰∏Ä‰∏™Êñá‰ª∂ÔºåÂ∞±Á´ãÂç≥ËøîÂõûËØ•Êñá‰ª∂‰Ωú‰∏∫ÂìçÂ∫îÔºõÂ¶ÇÊûúÈÉΩÊâæ‰∏çÂà∞Ôºå‰ºöËøîÂõû 403ÔºàÁ¶ÅÊ≠¢ËÆøÈóÆÔºâÊàñ 404ÔºàÊú™ÊâæÂà∞ÔºâÔºåËßÜÈÖçÁΩÆËÄåÂÆö</p>
<p><strong><code>root</code>Âíå<code>index</code>‰πüÂèØ‰ª•Áõ¥Êé•ÂÜôÂú®serverÂùóÈáåÈù¢Ôºå‰Ωú‰∏∫ÊâÄÊúâlocationÂùóÁöÑÈªòËÆ§ÂÄº</strong></p>
</li>
</ul>
<p><span style="color:yellow;font-size:18px"><strong>ËØ¥‰∫ÜËøô‰πàÂ§öÔºåÊàë‰ª¨ÊúÄÂêéÊÄªÁªì‰∏Ä‰∏ã<code>listen</code>„ÄÅ<code>server_name</code>„ÄÅ<code>location</code> ‰∏âËÄÖÊòØÂ¶Ç‰ΩïÈÖçÂêàÂ∑•‰ΩúÁöÑÔºö</strong></span></p>
<p>Áî®Êà∑ËÆøÈóÆÊµèËßàÂô®ËæìÂÖ•Ôºö</p>
<pre tabindex="0"><code class="language-url" data-lang="url">http://localhost/images/logo.png
</code></pre><p>NginxÂÜÖÈÉ®Â§ÑÁêÜÊµÅÁ®ãÂ¶Ç‰∏ãÔºö</p>
<ol>
<li>
<p><strong>ÁúãÁ´ØÂè£Ôºö</strong>
ËØ•ËØ∑Ê±ÇÊòØÂèëÁªôÂì™‰∏™Á´ØÂè£ÔºåÊòØ80ÔºåÈÇ£Â∞±ÂåπÈÖçÊâÄÊúâlisten 80ÁöÑserver</p>
</li>
<li>
<p><strong>ÁúãHostÂ§¥Ôºö</strong>
HostÊòØlocalhostÔºåÊâæÂì™‰∏™server_nameÂåπÈÖç‰∏ä‰∫ÜÔºåËøõÂÖ•ËØ•serverÂùó</p>
</li>
<li>
<p><strong>ÁúãURIÔºö</strong>
URIÊòØ/images/logo.pngÔºåÂú®Ëøô‰∏™server‰∏≠ÊâæÂì™‰∏™locationÂåπÈÖçÂæóÊúÄÂ•ΩÔºåÊâßË°åËØ•locationÁöÑËßÑÂàô</p>
</li>
</ol>
<h1 id="Ê†∏ÂøÉÂäüËÉΩ--webÊúçÂä°">Ê†∏ÂøÉÂäüËÉΩ ‚Äî‚Äî WebÊúçÂä°
</h1><p>Web ÊúçÂä°ÊòØ Nginx ÊúÄÂü∫Á°ÄÔºå‰πüÊòØÊúÄÊ†∏ÂøÉÁöÑÂäüËÉΩÔºåÂÆÉËÉΩÂ§üÈ´òÊïàÂú∞Â§ÑÁêÜÂÆ¢Êà∑Á´ØÂØπÈùôÊÄÅËµÑÊ∫êÁöÑËØ∑Ê±Ç</p>
<p>Ëøô‰∏ªË¶ÅÈÄöËøá<code>server</code>Âùó‰∏≠ÁöÑ<code>root</code>„ÄÅ<code>index</code>„ÄÅ<code>location</code>Êù•ÂçèÂêåÂÆåÊàê</p>
<h2 id="ÈÉ®ÁΩ≤ÈùôÊÄÅËµÑÊ∫ê">ÈÉ®ÁΩ≤ÈùôÊÄÅËµÑÊ∫ê
</h2><p>ÂèØ‰ª•ÊääNginx‰Ωú‰∏∫ÈùôÊÄÅËµÑÊ∫êÊúçÂä°Âô®ÔºåÂΩìÁî®Êà∑ËØ∑Ê±ÇÊó∂ÔºåNginx‰ªéÊúçÂä°Âô®ÁöÑÊåáÂÆöÊñá‰ª∂Ë∑ØÂæÑ‰∏≠Êü•ÊâæÂπ∂ËøîÂõûÂØπÂ∫îÁöÑÊñá‰ª∂Ôºö</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#c678dd">server</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">listen</span> <span style="color:#d19a66">80</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">server_name</span> <span style="color:#98c379">example.com</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">root</span> <span style="color:#98c379">/var/www/my-project/public</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">index</span> <span style="color:#98c379">index.html</span> <span style="color:#98c379">index.htm</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">location</span> <span style="color:#98c379">/</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">try_files</span> <span style="color:#e06c75">$uri</span> <span style="color:#e06c75">$uri/</span> =<span style="color:#d19a66">404</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">location</span> ~<span style="color:#98c379">*</span> <span style="color:#98c379">\.(jpg|jpeg|gif|png|css|js|ico|webp)</span>$ {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">expires</span> <span style="color:#98c379">30d</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>
<p><strong><code>try_files $uri $uri/ =404</code></strong></p>
<p>ËøôÊòØ‰∏Ä‰∏™ÈùûÂ∏∏Âº∫Â§ßÁöÑÊåá‰ª§ÔºåÂ∏∏Áî®‰∫éÂ§ÑÁêÜÂçïÈ°µÂ∫îÁî®ÔºàSPAÔºâÁöÑË∑ØÁî±ÔºåÂÆÉÁöÑÂ∑•‰ΩúÂéüÁêÜÊòØÔºö</p>
<ol>
<li><code>$uri</code>ÔºöÂ∞ùËØïÂ∞ÜURIÁõ¥Êé•‰Ωú‰∏∫Êñá‰ª∂ÂêçËøõË°åÊü•Êâæ</li>
<li><code>$uri/</code>ÔºöÂ¶ÇÊûú‰∏ä‰∏ÄÊ≠•Â§±Ë¥•ÔºåÂàôÂ∞ùËØïÂ∞ÜURI‰Ωú‰∏∫‰∏Ä‰∏™ÁõÆÂΩïÂêçÔºåÂπ∂Âú®ËØ•ÁõÆÂΩï‰∏ãÊü•ÊâæÁî±<code>index</code>Êåá‰ª§ÂÆö‰πâÁöÑÊñá‰ª∂</li>
<li><code>=404</code>ÔºöÂ¶ÇÊûúÂâç‰∏§Ê≠•ÈÉΩÂ§±Ë¥•ÔºåÂàôËøîÂõû‰∏Ä‰∏™404 Not FoundÈîôËØØ</li>
</ol>
</li>
<li>
<p><strong><code>location ~* \.(jpg|jpeg|gif|png|css|js|ico|webp)$</code></strong></p>
<p>ËøôÊòØ‰∏Ä‰∏™Ê≠£ÂàôÂåπÈÖçÔºå<code>~*</code>Ë°®Á§∫‰∏çÂå∫ÂàÜÂ§ßÂ∞èÂÜôÁöÑÊ≠£ÂàôÔºåÂÆÉ‰ºöÂåπÈÖçÊâÄÊúâ‰ª•‰∏äËø∞ÂêéÁºÄÁªìÂ∞æÁöÑËØ∑Ê±Ç</p>
</li>
<li>
<p><strong><code>expires 30d</code></strong></p>
<p>Áî®‰∫éËÆæÁΩÆHTTPÂìçÂ∫îÂ§¥‰∏≠ÁöÑ<code>Expires</code>Âíå<code>Cache-Control</code></p>
<p>ÂëäËØâÂÆ¢Êà∑Á´ØÊµèËßàÂô®ÂèØ‰ª•Â∞ÜËøô‰∫õÈùôÊÄÅËµÑÊ∫êÁºìÂ≠ò30Â§©Ôºå‰ªéËÄåÂáèÂ∞ë‰∏çÂøÖË¶ÅÁöÑËØ∑Ê±ÇÔºåÊèêÂçáÂêéÁª≠ËÆøÈóÆÈÄüÂ∫¶</p>
</li>
</ul>
<h2 id="ÈÖçÁΩÆhttpsÊúçÂä°">ÈÖçÁΩÆHTTPSÊúçÂä°
</h2><p>‰∏∫ÁΩëÁ´ôÂêØÁî®HTTPSÂèØ‰ª•ÂØπÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Âô®‰πãÈó¥ÁöÑ‰º†ËæìÊï∞ÊçÆËøõË°åÂä†ÂØÜÔºåÁ°Æ‰øùÊï∞ÊçÆÂÆâÂÖ®</p>
<p>ÈÖçÁΩÆÂâçÔºåÊàë‰ª¨ÈúÄË¶Å‰ªéËØÅ‰π¶È¢ÅÂèëÊú∫ÊûÑÔºàCAÔºâËé∑ÂèñSSL/TLSËØÅ‰π¶Êñá‰ª∂ÂíåÁßÅÈí•Êñá‰ª∂</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Nginx" data-lang="Nginx"><span style="display:flex;"><span><span style="color:#c678dd">server</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">listen</span> <span style="color:#d19a66">443</span> <span style="color:#98c379">ssl</span> <span style="color:#98c379">http2</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">server_name</span> <span style="color:#98c379">yourdomain.com</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">ssl_certificate</span> <span style="color:#98c379">/path/to/fullchain.pem</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">ssl_certificate_key</span> <span style="color:#98c379">/path/to/privkey.pem</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">ssl_session_cache</span> <span style="color:#98c379">shared:SSL:10m</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">ssl_session_timeout</span> <span style="color:#d19a66">10m</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">ssl_protocols</span> <span style="color:#98c379">TLSv1.2</span>  <span style="color:#98c379">TLSv1.3</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">ssl_ciphers</span> <span style="color:#98c379">&#39;TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384&#39;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">ssl_prefer_server_ciphers</span> <span style="color:#e06c75">off</span>;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">root</span> <span style="color:#98c379">/var/www/my-project/public</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">index</span> <span style="color:#98c379">index.html</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">location</span> <span style="color:#98c379">/</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">try_files</span> <span style="color:#e06c75">$uri</span> <span style="color:#e06c75">$uri/</span> =<span style="color:#d19a66">404</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">server</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">listen</span> <span style="color:#d19a66">80</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">server_name</span> <span style="color:#98c379">yourdomain.com</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">return</span> <span style="color:#d19a66">301</span> <span style="color:#98c379">https://</span><span style="color:#e06c75">$server_name$request_uri</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>
<p><strong><code>listen 443 ssl http2</code></strong></p>
<ul>
<li>
<p><code>443</code>ÊòØHTTPSÁöÑÊ†áÂáÜÁ´ØÂè£</p>
</li>
<li>
<p><code>ssl</code>ÂèÇÊï∞Ë°®Á§∫Âú®Ê≠§Á´ØÂè£‰∏äÂêØÁî®SSL/TLSÂä†ÂØÜ</p>
</li>
<li>
<p><code>http2</code>ÂèÇÊï∞Ë°®Á§∫ÂêåÊó∂ÂêØÁî®HTTP/2ÂçèËÆÆÔºåÂÆÉÂèØ‰ª•ÊòæËëóÊèêÂçáÈ°µÈù¢Âä†ËΩΩÊÄßËÉΩ</p>
</li>
</ul>
</li>
<li>
<p><strong><code>ssl_certificate</code></strong></p>
<p>ÊåáÂÆöËØÅ‰π¶Êñá‰ª∂ÁöÑË∑ØÂæÑÔºåËøôÈÄöÂ∏∏ÊòØ<code>.pem</code>Êàñ<code>.crt</code>Ê†ºÂºèÁöÑÂÖ¨Èí•ËØÅ‰π¶ÈìæÊñá‰ª∂</p>
</li>
<li>
<p><strong><code>ssl_certificate_key</code></strong></p>
<p>ÊåáÂÆö‰∏éËØÅ‰π¶ÈÖçÂØπÁöÑÁßÅÈí•Êñá‰ª∂ÁöÑË∑ØÂæÑÔºåÈÄöÂ∏∏ÊòØ<code>.key</code>Ê†ºÂºè</p>
</li>
<li>
<p><strong><code>ssl_session_cache</code></strong></p>
<p>ÂºÄÂêØSSL‰ºöËØùÁºìÂ≠òÔºåÁî®‰∫éÂ§çÁî®TLSÊè°ÊâãËøáÁ®ãÔºåÊèêÂçáÊÄßËÉΩ</p>
</li>
<li>
<p><strong><code>ssl_session_timeout</code></strong></p>
<p>ËÆæÁΩÆSSL‰ºöËØùÁöÑÊúâÊïàÊó∂Èó¥</p>
</li>
<li>
<p><strong><code>ssl_protocols TLSv1.2 TLSv1.3</code></strong></p>
<p>ÊåáÂÆöÂè™‰ΩøÁî®ÂÆâÂÖ®ÁöÑTLSÂçèËÆÆÁâàÊú¨ÔºåÂ∫üÂºÉËÄÅÊóß‰∏î‰∏çÂÆâÂÖ®ÁöÑSSLv3, TLSv1.0, TLSv1.1</p>
</li>
<li>
<p><strong><code>ssl_ciphers</code></strong></p>
<p>ÊåáÂÆöÂä†ÂØÜÊó∂‰ΩøÁî®ÁöÑÂä†ÂØÜÂ•ó‰ª∂ÂàóË°®ÔºåÈÖçÁΩÆÂÆâÂÖ®ÁöÑÂ•ó‰ª∂ÂèØ‰ª•Èò≤Ê≠¢ÈôçÁ∫ßÊîªÂáª</p>
</li>
<li>
<p><strong><code>ssl_prefer_server_ciphers</code></strong></p>
<p>ÊòØÂê¶‰ºòÂÖà‰ΩøÁî®ÊúçÂä°Âô®Á´ØÊåáÂÆöÁöÑÂä†ÂØÜÂ•ó‰ª∂Ôºå<code>off</code>Ë°®Á§∫ÂÆ¢Êà∑Á´Ø‰ºòÂÖà</p>
</li>
<li>
<p><strong><code>return 301 https://$server_name$request_uri</code></strong></p>
<p><code>return 301</code>Ë°®Á§∫ÂèëÈÄÅ‰∏Ä‰∏™Ê∞∏‰πÖÈáçÂÆöÂêëÁöÑHTTPÁä∂ÊÄÅÁ†Å</p>
<p><code>$server_name</code>Âíå<code>$request_uri</code>ÊòØNginxÂèòÈáèÔºåÂàÜÂà´‰ª£Ë°®ÂΩìÂâçËØ∑Ê±ÇÁöÑÂüüÂêçÂíåÂÆåÊï¥ÁöÑ URIÔºàÂåÖÂê´ÂèÇÊï∞Ôºâ</p>
<p>ËøôËÉΩÁ°Æ‰øùÁî®Êà∑ËÆøÈóÆ‰ªª‰ΩïHTTPÈ°µÈù¢Êó∂ÈÉΩËÉΩË¢´ÂáÜÁ°ÆÂú∞ÈáçÂÆöÂêëÂà∞ÂØπÂ∫îÁöÑHTTPSÁâàÊú¨</p>
</li>
</ul>
<h1 id="Ê†∏ÂøÉÂäüËÉΩ--ÂèçÂêë‰ª£ÁêÜ">Ê†∏ÂøÉÂäüËÉΩ ‚Äî‚Äî ÂèçÂêë‰ª£ÁêÜ
</h1><p>ÂèçÂêë‰ª£ÁêÜÊòØNginxÁöÑ‰∏Ä‰∏™Ê†∏ÂøÉÂäüËÉΩ</p>
<p><strong>Nginx‰Ωú‰∏∫‰∏Ä‰∏™‰∏≠Èó¥Â±ÇÔºåÊé•Êî∂ÂÆ¢Êà∑Á´ØÁöÑËØ∑Ê±ÇÔºåÂÜçÂ∞ÜËØ∑Ê±ÇËΩ¨ÂèëÁªôÂêéÁ´ØÊúçÂä°Âô®Â§ÑÁêÜÔºåÁÑ∂ÂêéÂ∞ÜÂìçÂ∫îËøîÂõûÁªôÂÆ¢Êà∑Á´Ø</strong></p>
<p>ËøôÁßçÊñπÂºèÁöÑÂ•ΩÂ§ÑÂåÖÊã¨Ôºö</p>
<ul>
<li>ÂèØ‰ª•ÈöêËóèÂêéÁ´ØÊúçÂä°Âô®ÁöÑÁúüÂÆûÂú∞ÂùÄÂíåÁªìÊûÑ</li>
<li>ÂèØ‰ª•Áªü‰∏ÄÂØπÂ§ñÁöÑÂÖ•Âè£Ôºå‰æø‰∫éÂÆâÂÖ®ÊéßÂà∂ÂíåËøêÁª¥ÁÆ°ÁêÜ</li>
<li>ÂèØ‰ª•ÂÆûÁé∞Ë¥üËΩΩÂùáË°°„ÄÅÈ´òÂèØÁî®Á≠âÂ§çÊùÇÂäüËÉΩÔºàÂêéÁª≠ÂÜçËÆ≤Ôºâ</li>
</ul>
<p>‰∏ãÈù¢ÊòØ‰∏Ä‰∏™ÊúÄÁÆÄÂçïÁöÑNginxÈÖçÁΩÆÁ§∫‰æãÔºåÂè™ÂÆûÁé∞ÊääËØ∑Ê±ÇËΩ¨ÂèëÂà∞ÂêéÁ´ØÊúçÂä°Âô®ÁöÑÂäüËÉΩÔºö</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#c678dd">server</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">listen</span> <span style="color:#d19a66">80</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">server_name</span> <span style="color:#98c379">www.example.com</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">location</span> <span style="color:#98c379">/</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">proxy_pass</span> <span style="color:#98c379">http://127.0.0.1:3000</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>
<p><strong><code>proxy_pass http://127.0.0.1:3000;</code></strong></p>
<p><span style="color:red;"><strong>ËøôÊòØÂèçÂêë‰ª£ÁêÜÁöÑÊ†∏ÂøÉËØ≠Âè•ÔºåÂç≥Â∞ÜÂåπÈÖçÂà∞ÁöÑËØ∑Ê±ÇËΩ¨ÂèëÂà∞Êú¨Êú∫ÁöÑ3000Á´ØÂè£ÔºåÁî±Êú¨Âú∞Êüê‰∏™ÊúçÂä°Êù•ÂÆûÈôÖÂ§ÑÁêÜËØ∑Ê±Ç</strong></span></p>
</li>
</ul>
<p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåNginxÊääËØ∑Ê±ÇËΩ¨ÂèëÁªôÂêéÁ´ØÊó∂Ôºå‰∏ç‰ºöÊê∫Â∏¶ÂéüÂßãÂÆ¢Êà∑Á´ØÁöÑ‰ø°ÊÅØ</p>
<p><span style="color:yellow;"><strong>Â¶ÇÊûúÂêéÁ´ØÊúçÂä°Ë¶ÅËé∑ÂèñÁî®Êà∑ÁöÑÁúüÂÆûIP„ÄÅËØ∑Ê±ÇÂçèËÆÆ„ÄÅÂéüÂßãÂüüÂêçÁ≠â‰ø°ÊÅØÔºåÂ∞±ÈúÄË¶Å‰ΩøÁî®<code>proxy_set_header</code>Êù•ÊâãÂä®ËÆæÁΩÆ</strong>Ôºö</span></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#c678dd">server</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">listen</span> <span style="color:#d19a66">80</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">server_name</span> <span style="color:#98c379">www.example.com</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">location</span> <span style="color:#98c379">/</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">proxy_pass</span> <span style="color:#98c379">http://127.0.0.1:3000</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">proxy_set_header</span> <span style="color:#98c379">Host</span> <span style="color:#e06c75">$host</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">proxy_set_header</span> <span style="color:#98c379">X-Real-IP</span> <span style="color:#e06c75">$remote_addr</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">proxy_set_header</span> <span style="color:#98c379">X-Forwarded-For</span> <span style="color:#e06c75">$proxy_add_x_forwarded_for</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">proxy_set_header</span> <span style="color:#98c379">X-Forwarded-Proto</span> <span style="color:#e06c75">$scheme</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Ëøô‰∫õ<code>proxy_set_header</code>ÊòØÁªôÂêéÁ´ØÂ∫îÁî®Áî®ÁöÑÔºö</p>
<ul>
<li><strong><code>Host $host</code></strong>ÔºöÂéüÂßãËØ∑Ê±Ç‰∏≠ÁöÑ‰∏ªÊú∫Âêç</li>
<li><strong><code>X-Real-IP $remote_addr</code></strong>ÔºöÂÆ¢Êà∑Á´ØÁöÑÁúüÂÆû IP</li>
<li><strong><code>X-Forwarded-For $proxy_add_x_forwarded_for</code></strong>ÔºöÁªèËøáÁöÑÊâÄÊúâ‰ª£ÁêÜ IP ÂàóË°®</li>
<li><strong><code>X-Forwarded-Proto $scheme</code></strong>ÔºöÂéüÂßãËØ∑Ê±ÇÁöÑÂçèËÆÆÔºàhttp Êàñ httpsÔºâ</li>
</ul>
<p><span style="color:yellow;"><strong>Â¶ÇÊûúÊàë‰ª¨ÊúâÂ§ö‰∏™ÂêéÁ´ØÊúçÂä°ÔºàÊØîÂ¶ÇÂ§ö‰∏™ËøõÁ®ã„ÄÅÂ§ö‰∏™Êú∫Âô®ÔºâÔºåÂèØ‰ª•Áî®<code>upstream</code>Êù•Áªü‰∏ÄÁÆ°ÁêÜÂêéÁ´ØÊúçÂä°Âô®ÁªÑ</strong>Ôºö</span></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#c678dd">upstream</span> <span style="color:#98c379">backend</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">server</span> <span style="color:#e06c75">127.0.0.1</span>:<span style="color:#d19a66">3000</span>;
</span></span><span style="display:flex;"><span> <span style="color:#7f848e"># server 127.0.0.1:3001;     #ÂèØ‰ª•Ê∑ªÂä†Â§ö‰∏™
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">server</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">listen</span> <span style="color:#d19a66">80</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">server_name</span> <span style="color:#98c379">www.example.com</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">location</span> <span style="color:#98c379">/</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">proxy_pass</span> <span style="color:#98c379">http://backend</span>;   <span style="color:#7f848e">#&lt;--ËøôÈáå‰∏ç‰∏ÄÊ†∑‰∫ÜÔºå‰ΩøÁî®ÁöÑÊòØupstream
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">proxy_set_header</span> <span style="color:#98c379">Host</span> <span style="color:#e06c75">$host</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">proxy_set_header</span> <span style="color:#98c379">X-Real-IP</span> <span style="color:#e06c75">$remote_addr</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">proxy_set_header</span> <span style="color:#98c379">X-Forwarded-For</span> <span style="color:#e06c75">$proxy_add_x_forwarded_for</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">proxy_set_header</span> <span style="color:#98c379">X-Forwarded-Proto</span> <span style="color:#e06c75">$scheme</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Áé∞Âú®ÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅÂú®<code>proxy_pass</code>‰∏≠ÂÜô <code>http://backend</code>Âç≥ÂèØ</p>
<p>ÂÖ∑‰ΩìÁöÑÂú∞ÂùÄÈÉΩÈõÜ‰∏≠ÂÜôÂú®<code>upstream backend</code>Âùó‰∏≠ÔºåÊñπ‰æøÁÆ°ÁêÜÂíåË¥üËΩΩÂùáË°°</p>
<h1 id="Ê†∏ÂøÉÂäüËÉΩ--Ë¥üËΩΩÂùáË°°">Ê†∏ÂøÉÂäüËÉΩ ‚Äî‚Äî Ë¥üËΩΩÂùáË°°
</h1><p>ÂΩì<code>upstream</code>Âùó‰∏≠ÂÆö‰πâ‰∫ÜÂ§öÂè∞<code>server</code>Êó∂ÔºåNginxÂ∞±Ëá™ÁÑ∂Âú∞Êàê‰∏∫‰∫Ü‰∏Ä‰∏™Ë¥üËΩΩÂùáË°°Âô®</p>
<p>ÂÆÉ‰ºöÊ†πÊçÆÊåáÂÆöÁöÑÁ≠ñÁï•Â∞ÜËØ∑Ê±ÇÂàÜÂèëÂà∞‰∏çÂêåÁöÑÊúçÂä°Âô®Ôºå‰ª•ÂàÜÊãÖÊµÅÈáèÂéãÂäõ</p>
<h2 id="httpË¥üËΩΩÂùáË°°ÈÖçÁΩÆ">HTTPË¥üËΩΩÂùáË°°ÈÖçÁΩÆ
</h2><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Nginx" data-lang="Nginx"><span style="display:flex;"><span><span style="color:#c678dd">upstream</span> <span style="color:#98c379">backend_cluster</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">server</span> <span style="color:#98c379">backend1.example.com</span> <span style="color:#98c379">weight=5</span>; 
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">server</span> <span style="color:#98c379">backend2.example.com</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">server</span> <span style="color:#98c379">backend3.example.com</span> <span style="color:#98c379">backup</span>; 
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">server</span> <span style="color:#98c379">backend4.example.com</span> <span style="color:#98c379">down</span>;   
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">server</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">listen</span> <span style="color:#d19a66">80</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">location</span> <span style="color:#98c379">/</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">proxy_pass</span> <span style="color:#98c379">http://backend_cluster</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">proxy_connect_timeout</span> <span style="color:#98c379">5s</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">proxy_read_timeout</span> <span style="color:#98c379">10s</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>
<p><strong><code>weight=5</code></strong></p>
<p>‰∏∫ÊúçÂä°Âô®ËÆæÁΩÆÊùÉÈáçÔºåÂú®ÈªòËÆ§ÁöÑËΩÆËØ¢Á≠ñÁï•‰∏ãÔºåÊùÉÈáçË∂äÈ´òÁöÑÊúçÂä°Âô®Êé•Êî∂Âà∞ÁöÑËØ∑Ê±ÇÊØî‰æãÂ∞±Ë∂äÈ´ò</p>
<p>ËøôÈáå<code>backend1</code>ÁöÑËØ∑Ê±ÇÈáèÂ§ßÁ∫¶ÊòØ<code>backend2</code>ÁöÑ5ÂÄç</p>
</li>
<li>
<p><strong><code>backup</code></strong></p>
<p>Â∞ÜÊúçÂä°Âô®Ê†áËÆ∞‰∏∫Â§áÁî®ÊúçÂä°Âô®</p>
<p>Âè™ÊúâÂΩìÊâÄÊúâÈùûÂ§áÁî®ÁöÑ‰∏ªÊúçÂä°Âô®ÈÉΩÊó†Ê≥ïËÆøÈóÆÊó∂ÔºåNginxÊâç‰ºöÂ∞ÜËØ∑Ê±ÇËΩ¨ÂèëÁªôÂÆÉ</p>
</li>
<li>
<p><strong><code>down</code></strong></p>
<p>Â∞ÜÊúçÂä°Âô®Ê†áËÆ∞‰∏∫Ê∞∏‰πÖ‰∏ãÁ∫øÔºåNginx‰∏ç‰ºöÂêëÂÆÉËΩ¨Âèë‰ªª‰ΩïËØ∑Ê±Ç</p>
<p>ËøôÈÄöÂ∏∏Áî®‰∫éÊúçÂä°Âô®Áª¥Êä§</p>
</li>
<li>
<p><strong><code>proxy_connect_timeout</code> &amp; <code>proxy_read_timeout</code></strong></p>
<p>ËÆæÁΩÆNginx‰∏éÂêéÁ´ØÊúçÂä°Âô®Âª∫Á´ãËøûÊé•ÁöÑË∂ÖÊó∂Êó∂Èó¥ÂíåËØªÂèñÂìçÂ∫îÁöÑË∂ÖÊó∂Êó∂Èó¥</p>
<p>ÂèØ‰ª•Èò≤Ê≠¢Âõ†‰∏™Âà´ÂêéÁ´ØÊúçÂä°ÂìçÂ∫îÁºìÊÖ¢ËÄåÂØºËá¥ËØ∑Ê±ÇÈïøÊó∂Èó¥ÊåÇËµ∑</p>
</li>
</ul>
<h3 id="Ë¥üËΩΩÂùáË°°Á≠ñÁï•">Ë¥üËΩΩÂùáË°°Á≠ñÁï•
</h3><h3 id="ËΩÆËØ¢">ËΩÆËØ¢
</h3><p>ÈªòËÆ§Á≠ñÁï•ÔºåÊó†ÈúÄ‰ªª‰ΩïÊåá‰ª§</p>
<p>ËØ∑Ê±ÇË¢´ÊåâÈ°∫Â∫è„ÄÅËΩÆÊµÅÂàÜÂèëÂà∞ÊØèÂè∞ÊúçÂä°Âô®ÔºåÂπ∂ËÄÉËôëÊùÉÈáç</p>
<h3 id="ÊùÉÈáçweight">ÊùÉÈáçÔºàweightÔºâ
</h3><p><strong>Â∞±ÂÉèÊàë‰ª¨‰πãÂâçÊèêÂà∞ËøáÁöÑ‰æãÂ≠êÔºå<code>weight</code>Ë∂äÈ´òÔºåÂàÜÈÖçÁöÑËØ∑Ê±ÇË∂äÂ§ö</strong></p>
<p>Ê≠§Á≠ñÁï•ÈÄÇÂêàÂêéÁ´ØÊÄßËÉΩ‰∏ç‰∏ÄËá¥ÁöÑÊÉÖÂÜµÔºàÂº∫Êú∫Â§öÂπ≤Ê¥ªÔºâ</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#c678dd">upstream</span> <span style="color:#98c379">backend_cluster</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">server</span> <span style="color:#e06c75">192.168.0.1</span>  <span style="color:#98c379">weight=3</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">server</span> <span style="color:#e06c75">192.168.0.2</span>  <span style="color:#98c379">weight=1</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>‰∏ä‰æã‰∏≠ÔºåÁ¨¨‰∏Ä‰∏™ÊúçÂä°Âô®Â∞ÜËé∑ÂæóÂ§ßÁ∫¶75%ÁöÑËØ∑Ê±ÇÔºåÁ¨¨‰∫å‰∏™Á∫¶25%</p>
<h3 id="ipÂìàÂ∏åip_hash">IPÂìàÂ∏åÔºàip_hashÔºâ
</h3><p><strong>Ê†πÊçÆÂÆ¢Êà∑Á´ØIPÂú∞ÂùÄÁöÑÂìàÂ∏åÂÄºÊù•ÈÄâÊã©ÊúçÂä°Âô®</strong>ÔºåËøôËÉΩÁ°Æ‰øùÊù•Ëá™Âêå‰∏Ä‰∏™ÂÆ¢Êà∑Á´ØÁöÑËØ∑Ê±ÇÂßãÁªàË¢´ÂÆöÂêëÂà∞Âêå‰∏ÄÂè∞ÂêéÁ´ØÊúçÂä°Âô®</p>
<p>Ê≠§Á≠ñÁï•ÂØπ‰∫éÈúÄË¶Å‰øùÊåÅÁî®Êà∑‰ºöËØùÁä∂ÊÄÅÁöÑÂ∫îÁî®ÈùûÂ∏∏ÈáçË¶Å</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Nginx" data-lang="Nginx"><span style="display:flex;"><span><span style="color:#c678dd">upstream</span> <span style="color:#98c379">backend_cluster</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">ip_hash</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">server</span> <span style="color:#98c379">backend1.example.com</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">server</span> <span style="color:#98c379">backend2.example.com</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="ÊúÄÂ∞ëËøûÊé•-least_conn">ÊúÄÂ∞ëËøûÊé• (least_conn)
</h3><p><strong>Â∞ÜÊñ∞ËØ∑Ê±ÇÂèëÈÄÅÂà∞ÂΩìÂâçÊ¥ªÂä®ËøûÊé•Êï∞ÊúÄÂ∞ëÁöÑÊúçÂä°Âô®</strong></p>
<p>Ê≠§Á≠ñÁï•Âú®Â§ÑÁêÜËÄóÊó∂‰∏çÂêåÊàñÈïøËøûÊé•ËæÉÂ§öÁöÑËØ∑Ê±ÇÊó∂ÔºåËÉΩ‰ΩøË¥üËΩΩÂàÜÂ∏ÉÂæóÊõ¥Âä†ÂùáÂåÄ</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Nginx" data-lang="Nginx"><span style="display:flex;"><span><span style="color:#c678dd">upstream</span> <span style="color:#98c379">backend_cluster</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">least_conn</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">server</span> <span style="color:#98c379">backend1.example.com</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">server</span> <span style="color:#98c379">backend2.example.com</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h1 id="Ê†∏ÂøÉÂäüËÉΩ--tcpudp‰ª£ÁêÜ">Ê†∏ÂøÉÂäüËÉΩ ‚Äî‚Äî TCP/UDP‰ª£ÁêÜ
</h1><p>Nginx‰∏ç‰ªÖËÉΩ‰ª£ÁêÜHTTPÔºåËøòËÉΩÈÄöËøá<code>stream</code>Ê®°ÂùóÂú®Êõ¥Â∫ïÂ±ÇÁöÑ‰º†ËæìÂ±ÇÔºàTCP/UDPÔºâËøõË°å‰ª£ÁêÜ</p>
<p>‰æãÂ¶Ç‰ª£ÁêÜÊï∞ÊçÆÂ∫ìËøûÊé•„ÄÅÊ∏∏ÊàèÊúçÂä°Âô®„ÄÅDNS Êü•ËØ¢Á≠â</p>
<p><code>stream</code>ÂùóÂøÖÈ°ªÈÖçÁΩÆÂú®<code>http</code>Âùó‰πãÂ§ñÔºå‰Ωç‰∫é‰∏ªÈÖçÁΩÆÊñá‰ª∂ÁöÑÈ°∂Â±ÇÔºåÂíå<code>http</code>ÊòØÂπ≥Á∫ßÁöÑ</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Nginx" data-lang="Nginx"><span style="display:flex;"><span><span style="color:#c678dd">stream</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">upstream</span> <span style="color:#98c379">mysql_cluster</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">server</span> <span style="color:#e06c75">192.168.1.101</span>:<span style="color:#d19a66">3306</span> <span style="color:#98c379">weight=2</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">server</span> <span style="color:#e06c75">192.168.1.102</span>:<span style="color:#d19a66">3306</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">server</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">listen</span> <span style="color:#d19a66">3307</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">proxy_pass</span> <span style="color:#98c379">mysql_cluster</span>; 
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">proxy_timeout</span> <span style="color:#98c379">20s</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">server</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">listen</span> <span style="color:#d19a66">53</span> <span style="color:#98c379">udp</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">proxy_pass</span> <span style="color:#e06c75">8.8.8.8</span>:<span style="color:#d19a66">53</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>‰Ω†ÂèØ‰ª•ÁúãÂà∞ÔºåstreamÂùóÂíåhttpÂùóÁöÑÂÜôÊ≥ïÂü∫Êú¨‰∏äÊòØ‰∏ÄÊ†∑ÁöÑÔºå‰ΩÜÊòØÁªÜËäÇ‰∏äËøòÊòØÊúâ‰∫õ‰∏çÂêåÔºö</p>
<ul>
<li><strong><code>stream</code>Âùó‰∏çÊîØÊåÅ<code>location</code>ÔºåÊ≤°ÊúâË∑ØÂæÑÂåπÈÖç</strong></li>
<li><strong><code>stream</code>Âùó‰∏çËß£ÊûêÂçèËÆÆÂÜÖÂÆπÔºåÊ≤°Êúâ<code>proxy_set_header</code>ÔºåÂè™ËΩ¨ÂèëÂéüÂßãTCP/UDPÊï∞ÊçÆÊµÅ</strong></li>
<li><strong><code>stream</code>Âùó‰∏çÊîØÊåÅ<code>ip_hash</code>ÁöÑË¥üËΩΩÂùáË°°Á≠ñÁï•</strong></li>
</ul>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/web/">Web</a>
        
            <a href="/tags/linux/">Linux</a>
        
    </section>


    <section class="article-lastmod">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



        <span>
            ÊúÄÂêéÊõ¥Êñ∞‰∫é 2025-07-26
        </span>
    </section></footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">Áõ∏ÂÖ≥ÊñáÁ´†</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/p/%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8Bdocker/">
        
        

        <div class="article-details">
            <h2 class="article-title">Âø´ÈÄü‰∏äÊâãdocker</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/wiresharktshark%E7%AE%80%E6%98%93%E6%8C%87%E5%8C%97/">
        
        

        <div class="article-details">
            <h2 class="article-title">wireshark&amp;tsharkÁÆÄÊòìÊåáÂåó</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/vim%E7%BC%96%E8%BE%91%E5%99%A8%E5%AE%8C%E5%85%A8%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/">
        
        

        <div class="article-details">
            <h2 class="article-title">VimÁºñËæëÂô®ÂÆåÂÖ®‰ΩøÁî®ÊïôÁ®ã</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/volatility%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/">
        
        

        <div class="article-details">
            <h2 class="article-title">volatility‰ΩøÁî®ËØ¥Êòé</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <script src='//unpkg.com/@waline/client@v2/dist/waline.js'></script>
<link href='//unpkg.com/@waline/client@v2/dist/waline.css' rel='stylesheet'/>
<div id="waline" class="waline-container"></div>
<style>
    .waline-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
        --waline-font-size: var(--article-font-size);
    }
    .waline-container .wl-count {
        color: var(--card-text-color-main);
    }
</style><script>
    
    Waline.init({"dark":"html[data-scheme=\"dark\"]","el":"#waline","emoji":["https://npm.elemecdn.com/@waline/emojis@1.1.0/bilibili","https://npm.elemecdn.com/@waline/emojis@1.1.0/bmoji","https://npm.elemecdn.com/@waline/emojis@1.1.0/weibo"],"lang":"zh-cn","locale":{"admin":"Admin","placeholder":null},"pageview":true,"placeholder":"Ê¨¢ËøéËØÑËÆ∫Ôºå‰∏çÂ•ΩÁöÑËØÑËÆ∫Êàë‰ºöÂà†üôÑüíÖüèª","requiredMeta":["name","email","url"],"serverURL":"https://comment.928330.xyz/"});
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 2025 - 2025 kakahuote | ÂºïÁî®ËØ∑Ê≥®ÊòéÊñáÁ´†ÈìæÊé•
    </section>

    <section class="running-time">
        Ë∑ùÁ¶ªÂ∞èÁ´ôÁ¨¨‰∏ÄË°å‰ª£Á†ÅË¢´ÁΩÆ‰∏ãÂ∑≤ÁªèËøáÂéª
        <span id="runningdays" class="running-days"></span>    
    </section>

    <section class="powerby">
        ‰ΩøÁî® <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> ÊûÑÂª∫ <br />
        ‰∏ªÈ¢ò <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.30.0">Stack</a></b> Áî± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> ËÆæËÆ° <br />

        <span>...ÂΩìÁÑ∂ËøòÊúâkakahuoteü§ìüëÜ</span>
    </section>
</footer>

    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>
<style>
     
     
     
    @font-face {
     font-family: 'yuan';  
     src: url(https://blog.928330.xyz/font/round.ttf) format('truetype');  
    }

     
     
     
    :root {
     --base-font-family: 'yuan';  
     --code-font-family: 'yuan';  
      
    }

     

     
     
     
    #backTopBtn {
     position: fixed;  
     bottom: 30px;  
     right: 450px;  
     z-index: 99;  
     cursor: pointer;  
     width: 30px;  
     height: 30px;  
     background-image: url(https://blog.928330.xyz/icons/backTop.svg);  
     background-size: cover;  
     transition: transform 0.1s linear;  
     transform-origin: center center;  
    }

    #backTopBtn.rotating {
     transform: rotate(360deg);  
    }

     
     
     
    .highlight {
      
     max-height: 400px;  
     overflow: hidden;  
     position: relative;  
     transition: max-height 0.3s ease-out;  
    }

    .code-show {
     max-height: none !important;  
    }

    .code-more-box {
     width: 100%;  
     padding-top: 20px;  
     background-image: linear-gradient(to bottom, rgba(255, 255, 255, 0), #fff);  
     position: absolute;  
     left: 0;
     right: 0;
     bottom: 0;
     z-index: 1;  
     text-align: center;  
    }

    .code-more-btn {
     display: inline-block;  
     padding: 5px 15px;  
     background: #f0f0f5;  
     border-radius: 5px;  
     cursor: pointer;  
     font-size: 0.9em;  
    }
   </style>

   <script>
     
     
     

    let s1 = '2025-5-8 15:00:00'; 
    s1 = new Date(s1.replace(/-/g, "/"));
    let s2 = new Date();
    let timeDifference = s2.getTime() - s1.getTime();

    let days = Math.floor(timeDifference / (1000 * 60 * 60 * 24));
    let hours = Math.floor((timeDifference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    let minutes = Math.floor((timeDifference % (1000 * 60 * 60)) / (1000 * 60));

    let result = days + "Â§©" + hours + "Â∞èÊó∂" + minutes + "ÂàÜÈíü";
    if (document.getElementById('runningdays')) {
        document.getElementById('runningdays').innerHTML = result;
    }
    
     
     
     
    

    function initScrollTop() {
     let rightSideBar = document.querySelector(".right-sidebar");
     if (!rightSideBar) {
      return;
     }

     
     let btn = document.createElement("div");
     btn.id = "backTopBtn";
     let isRotating = false; 

     btn.onclick = function() {
      if (!isRotating) {
       isRotating = true;
       backToTop(this, () => {
        isRotating = false; 
       });
      }
     };
     rightSideBar.appendChild(btn);

     
     btn.style.display = "block";
    }

    

    function backToTop(button, onComplete) {
     let rotation = 0;
     let animationInterval;

     window.scrollTo({ top: 0, behavior: "smooth" }); 

     animationInterval = setInterval(() => {
      rotation += 30; 
      button.style.transform = `rotate(${rotation}deg)`;

      if (window.scrollY === 0) {
       clearInterval(animationInterval); 
       button.style.transform = `rotate(0deg)`; 
       if (onComplete) {
        onComplete();
       }
      } else if (rotation >= 360 && window.scrollY !== 0) {
       
      }
     }, 20); 
    }

    
    initScrollTop();
    
    


     
     
     
    function initCodeMoreBox() {
     let codeBlocks = document.querySelectorAll(".highlight");
     if (!codeBlocks) {
      return;
     }
     codeBlocks.forEach(codeBlock => {
      
      if (codeBlock.scrollHeight <= codeBlock.clientHeight) {
       return;
      }
      
      
      let codeMoreBox = document.createElement('div');
      codeMoreBox.classList.add('code-more-box');
      
      let codeMoreBtn = document.createElement('span');
      codeMoreBtn.classList.add('code-more-btn');
      codeMoreBtn.innerText = 'ÊòæÁ§∫Êõ¥Â§ö'; 
      let isExpanded = false; 

      codeMoreBtn.addEventListener('click', () => {
       if (!isExpanded) {
        codeBlock.classList.add('code-show'); 
        codeMoreBtn.innerText = 'ÊäòÂè†'; 
        isExpanded = true;
       } else {
        codeBlock.classList.remove('code-show'); 
        codeMoreBtn.innerText = 'ÊòæÁ§∫Êõ¥Â§ö'; 
        isExpanded = false;
       }
       
       window.dispatchEvent(new Event('resize'));
      });
      
      codeMoreBox.appendChild(codeMoreBtn);
      codeBlock.appendChild(codeMoreBox);
     });
    }

    initCodeMoreBox();
   </script>
    </body>
</html>
